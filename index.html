<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PD2 Character Planner</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="/icon.png">
    <script defer src="https://cloud.umami.is/script.js" data-website-id="72048bb5-a72a-4c78-9750-4c1c9a17e30c"></script>
    <script src="items.js"></script>



<body>
  <button onclick="document.body.classList.toggle('moody')" style="position: fixed; top: 10px; right: 10px; z-index: 10000;">
    Load/Stop Theme
</button>
<div>
<div class="polyrellife">Polynomial Relative Life<div id="polyrellife"></div>
</div>


<div class="particles-container"></div>
<script>

 
          function createParticles() {
              const container = document.querySelector('.particles-container');
              
              function spawnParticle() {
                  if (!document.body.classList.contains('moody')) return;
                  
                  
                  
                  const particle = document.createElement('div');
  
                  particle.classList.add('particle');
  
                  // Randomly select and add particle type
                  const randomType = Math.floor(Math.random() * 3) + 1;
                  particle.classList.add('type' + randomType);
                  
                  const size = Math.random() * 60 + 12;
                  particle.style.width = `${size}px`;
                  particle.style.height = `${size}px`;
                  
                  const x = Math.random() * window.innerWidth;
                  const y = Math.random() * window.innerHeight;
                  particle.style.left = `${x}px`;
                  particle.style.top = `${y}px`;
                  
                  particle.style.animation = `float ${Math.random() * 3 + 2}s ease-out`;
                  
                  container.appendChild(particle);
                  
                  particle.addEventListener('animationend', () => {
                      particle.remove();
                  });
              }
  
              setInterval(spawnParticle, 35);
          }
  
          createParticles();
      </script>




<div class="menucontainer">
<h4>Class</h4>
<select id="selectClass">
<option>Amazon</option>
<option>Assassin</option>
<option>Barbarian</option>
<option>Druid</option>
<option>Necromancer</option>
<option>Paladin</option>
<option>Sorceress</option>
</select>  
</div>


<div>	
<div class="slidecontainer">
<h4>Level</h4>
<input type="number" min="1" max="99" value="1" id="lvlValue">
<span id="startLvlValue"></span> 
<span id="lifeValue"></span> 
</div>

<div>	
<div class="total-life" div id="totalLifeDisplay">
</div>	


<div class="statcontainer">
Stats
<br>	
<input type="number" min="15" max="530" value="15" id="str">Strength<span id="straccr"></span><br>
<input type="number" min="15" max="530" value="15" id="dex">Dexterity<span id="dexaccr"></span><br>
<input type="number" min="15" max="530" value="15" id="vit">Vitality<span id="vitaccr"></span><br>
<input type="number" min="15" max="530" value="15" id="enr">Energy<span id="enraccr"></span><br>
</div>	

<div class="blockcontainer" style="display: none;">
Block chance %
<input type="number" min="0" max="75" value="0" id="blockValue"> 
</div>	

<div class="gethitcontainer" style="display: none;">
Chance to get hit %
<input type="number" min="1" max="100" value="50" id="getHitValue">
</div>	

<div class="firerescontainer" style="display: none;">
Resistance to fire %
<input type="number" min="-100" max="90" value="0" id="fireResValue">
</div>

<br><br>


<div class="grouphelms">
<label for="helms-dropdown">Helm:</label>
<select id="helms-dropdown" name="helms">
 
<option value="Biggin's Bonnet">Biggin's Bonnet</option>
<option value="Tarnhelm">Tarnhelm</option>
<option value="Coif of Glory">Coif of Glory</option>
<option value="Duskeep">Duskeep</option>
<option value="The Face of Horror">The Face of Horror</option>
<option value="Wormskull">Wormskull</option>
<option value="Howltusk">Howltusk</option>
<option value="Undead Crown">Undead Crown</option>
<option value="Peasant Crown">Peasant Crown</option>
<option value="Rockstopper">Rockstopper</option>
<option value="Stealskull">Stealskull</option>
<option value="Darksight Helm">Darksight Helm</option>
<option value="Blackhorn's Face">Blackhorn's Face</option>
<option value="Valkyrie Wing">Valkyrie Wing</option>
<option value="Crown of Thieves">Crown of Thieves</option>
<option value="Harlequin Crest">Harlequin Crest</option>
<option value="Steel Shade">Steel Shade</option>
<option value="Andariel's Visage">Andariel's Visage</option>
<option value="Giant Skull">Giant Skull</option>
<option value="Veil of Steel">Veil of Steel</option>
<option value="Nightwing's Veil">Nightwing's Veil</option>
<option value="Crown of Ages">Crown of Ages</option>
<option value="Overlord's Helm">Overlord's Helm</option>
<option value="Kira's Guardian">Kira's Guardian</option>
<option value="Griffon's Eye">Griffon's Eye</option>
<option value="Cyclopean Roar">Cyclopean Roar</option>
<option value="Arreat's Face">Arreat's Face</option>
<option value="Wolfhowl">Wolfhowl</option>
<option value="Demonhorn's Edge">Demonhorn's Edge</option>
<option value="Halaberd's Reign">Halaberd's Reign</option>
<option value="Raekor's Virtue">Raekor's Virtue</option>
<option value="Quetzalcoatl">Quetzalcoatl</option>
<option value="Jalal's Mane">Jalal's Mane</option>
<option value="Cerebus' Bite">Cerebus' Bite</option>
<option value="Denmother">Denmother</option>
<option value="Ravenlore">Ravenlore</option>
<option value="Spirit Keeper">Spirit Keeper</option>
<option value="Ursa's Nightmare">Ursa's Nightmare</option>
<option value="Arcanna's Head">Arcanna's Head</option>

    
  
</select>
<div id="helm-info"></div>
</div>
 

<div class="grouparmors">
<label for="armors-dropdown">Armor:</label>
<select id="armors-dropdown" name="armors">
 
<option value="Greyform">Greyform</option>
<option value="Blinkbat's Form">Blinkbat's Form</option>
<option value="The Centurion">The Centurion</option>
<option value="Twitchthroe">Twitchthroe</option>
<option value="Darkglow">Darkglow</option>
<option value="Hawkmail">Hawkmail</option>
<option value="Sparking Mail">Sparking Mail</option>
<option value="Venom Ward">Venom Ward</option>
<option value="Iceblink">Iceblink</option>
<option value="Boneflesh">Boneflesh</option>
<option value="Rockfleece">Rockfleece</option>
<option value="Rattlecage">Rattlecage</option>
<option value="Heavenly Garb">Heavenly Garb</option>
<option value="Goldskin">Goldskin</option>
<option value="Silks of the Victor">Silks of the Victor</option>
<option value="Spirit Shroud">Spirit Shroud</option>
<option value="Vipermagi">Vipermagi</option>
</select>
<div id="armor-info"></div>
</div>
<br><br>

  <div class="groupweapons">
    <label for="weapons-dropdown">Main Weapon:</label>
    <select id="weapons-dropdown" name="weapons">
    <option value="The Gnasher">The Gnasher</option>
    <option value="Bladebone">Bladebone</option>
    <option value="Skull Splitter">Skull Splitter</option>
    <option value="Rakescar">Rakescar</option>
    <option value="Axe of Fechmar">Axe of Fechmar</option>
    <option value="Goreshovel">Goreshovel</option>  
    <option value="The Chieftain">The Chieftain</option>
    <option value="Brainhew">Brainhew</option>
    <option value="Humongous">Humongous</option>
    <option value="Felloak">Felloak</option>
    <option value="Stoutnail">Stoutnail</option>
    <option value="Crushflange">Crushflange</option>
    <option value="Bloodrise">Bloodrise</option>
    <option value="The General's Tan Do Li Ga">The General's Tan Do Li Ga</option>
    <option value="Ironstone">Ironstone</option>
    <option value="Bonesnap">Bonesnap</option>
    <option value="Upped Bonesnap">Upped Bonesnap</option>
    <option value="Steeldriver">Steeldriver</option>
    <option value="Rixot's Keen">Rixot's Keen</option>  
    <option value="Blood Crescent">Blood Crescent</option>
    <option value="Skewer of Krintiz">Skewer of Krintiz</option>
    <option value="Gleamscythe">Gleamscythe</option>
    <option value="Griswold's Edge">Griswold's Edge</option>
    <option value="Hellplague">Hellplague</option>
    <option value="Culwen's Point">Culwen's Point</option>
    <option value="Shadowfang">Shadowfang</option>
    <option value="Soulflay">Soulflay</option>
    <option value="Kinemil's Awl">Kinemil's Awl</option>
    <option value="Blacktongue">Blacktongue</option>
    <option value="Ripsaw">Ripsaw</option>
    <option value="The Patriarch">The Patriarch</option>
    <option value="Gull">Gull</option>
    <option value="The Diggler">The Diggler</option>
    <option value="The Jade Tan Do">The Jade Tan Do</option>  
    <option value="Spectral Shard">Spectral Shard</option>
    <option value="The Gidbinn">The Gidbinn</option>
    <option value="The Dragon Chang">The Dragon Chang</option>
    <option value="Razortine">Razortine</option>
    <option value="Bloodthief">Bloodthief</option>
    <option value="Lance of Yaggai">Lance of Yaggai</option>
    <option value="The Tannr Gorerod">The Tannr Gorerod</option>
    <option value="Dimoak's Hew">Dimoak's Hew</option>
    <option value="Steelgoad">Steelgoad</option>
    <option value="The Battlebranch">The Battlebranch</option>
    <option value="Woestave">Woestave</option>
    <option value="The Grim Reaper">The Grim Reaper</option>
    <option value="Pluckeye">Pluckeye</option>
    <option value="Witherstring">Witherstring</option>
    <option value="Raven Claw">Raven Claw</option>
    <option value="Rogue's Bow">Rogue's Bow</option>
    <option value="Stormstrike">Stormstrike</option>
    <option value="Wizendraw">Wizendraw</option>
    <option value="Hellclap">Hellclap</option>
    <option value="Blastbark">Blastbark</option>
    <option value="Skystrike">Skystrike</option>
    <option value="Riphook">Riphook</option>
    <option value="Kuko Shakaku">Kuko Shakaku</option>
    <option value="Endlesshail">Endlesshail</option>
    <option value="Witchwild String">Witchwild String</option>
    <option value="Cliffkiller">Cliffkiller</option>
    <option value="Magewrath">Magewrath</option>
    <option value="Goldstrike Arch">Goldstrike Arch</option>
    <option value="Eaglehorn">Eaglehorn</option>
    <option value="Widowmaker">Widowmaker</option>
    <option value="Windforce">Windforce</option> 
    <option value="Leadcrow">Leadcrow</option>
    <option value="Ichorsting">Ichorsting</option>
    <option value="Hellcast">Hellcast</option>
    <option value="Doomslinger">Doomslinger</option>
    <option value="Bane Ash">Bane Ash</option>
    <option value="Serpent Lord">Serpent Lord</option>
    <option value="Spire of Lazarus">Spire of Lazarus</option>
    <option value="The Salamander">The Salamander</option>
    <option value="The Iron Jang Bong">The Iron Jang Bong</option>
    <option value="Knell Striker">Knell Striker</option>
    <option value="Rust Handle">Rust Handle</option>
    <option value="Stormeye">Stormeye</option>
    <option value="True Silver">True Silver</option>
    <option value="Mage Slayer">Mage Slayer</option>
    <option value="Tempest">Tempest</option>	
    <option value="Spraynard Trash Eth True Silver">Spraynard Trash Eth True Silver</option>	
 
  </select>
  <div id="weapon-info"></div>
  </div>
<br>
        
<div class="groupoffs">
<label for="offs-dropdown">Off-Weapon/Shield:</label>
<select id="offs-dropdown" name="offs">

<option value="Pelta Lunata">Pelta Lunata</option>
<option value="Umbral Disk">Umbral Disk</option>
<option value="Swordback Hold">Swordback Hold</option>
<option value="Steelclash">Steelclash</option>
<option value="Wall of the Eyeless">Wall of the Eyeless</option>
<option value="Bverrit Keep">Bverrit Keep</option>
<option value="The Ward">The Ward</option>
<option value="Visceratuant">Visceratuant</option>
</select>
<div id="off-info"></div>
</div>



<div>
<div class="defensecontainer">Defense
<div id="defensecontainer">
</div>


<div>
<div class="realblockcontainer">Block
<div id="realblockcontainer">
</div>

<div>
<div class="iascontainer">IAS
<div id="iascontainer">
</div>
 
<div>
<div class="fcrcontainer">FCR
<div id="fcrcontainer">
</div>

<div>
<div class="frwcontainer">FRW
<div id="frwcontainer">
</div>

<div>
<div class="fhrcontainer">FHR
<div id="fhrcontainer">
</div>

<div>
<div class="cbfcontainer">CBF
<div id="cbfcontainer">
</div>

<div>
<div class="plrcontainer">PLR
<div id="plrcontainer">
</div>

<div>
<div class="drcontainer">DR%
<div id="drcontainer">
</div>

<div>
<div class="pdrcontainer">PDR
<div id="pdrcontainer">
</div>

<div>
<div class="mdrcontainer">MDR
<div id="mdrcontainer">
</div>

<div>
<div class="fireresistcontainer">Fire resist
<div id="fireresistcontainer">
</div>
               
<div>
<div class="coldresistcontainer">Cold resist
<div id="coldresistcontainer">
</div>

<div>
<div class="lightresistcontainer">Light resist
<div id="lightresistcontainer">
</div>

<div>
<div class="poisonresistcontainer">Poison resist
<div id="poisonresistcontainer">
</div>

<div>
<div class="curseresistcontainer">Curse resist
<div id="curseresistcontainer">
</div>

<div>
<div class="onehandmindmgcontainer">One-hand Damage Minimum
<div id="onehandmindmgcontainer">0</div>

<div>
<div class="onehandmaxdmgcontainer">One-hand Damage Maximum
<div id="onehandmaxdmgcontainer">
</div>

<div>
<div class="twohandmindmgcontainer">Two-hand Damage Minimum
<div id="twohandmindmgcontainer">
</div>
  
<div>
<div class="twohandmaxdmgcontainer">Two-hand Damage Maximum
<div id="twohandmaxdmgcontainer">
</div>
  






<div class="groupgloves">
<label for="gloves-dropdown">Gloves:</label>
<select id="gloves-dropdown" name="gloves">
<option value="The Hand of Broc">The Hand of Broc</option>
<option value="Bloodfist">Bloodfist</option>
<option value="Chance Guards">Chance Guards</option>
<option value="Magefist">Magefist</option>
<option value="Frostburn">Frostburn</option>
</select>
<div id="glove-info"></div>
</div>

<div class="groupbelts">
  <label for="belts-dropdown">Belt:</label>
  <select id="belts-dropdown" name="belts">
  <option value="Lenymo">Lenymo</option>
  <option value="Snakecord">Snakecord</option>
  <option value="Nightsmoke">Nightsmoke</option>
  <option value="Goldwrap">Goldwrap</option>
  <option value="Bladebuckle">Bladebuckle</option>
  <option value="String of Ears">String of Ears</option>
  
  </select>
  <div id="belt-info"></div>
</div>


<div class="groupboots">
  <label for="boots-dropdown">Boots:</label>
  <select id="boots-dropdown" name="boots">
  <option value="Hotspur">Hotspur</option>
  <option value="Gorefoot">Gorefoot</option>
  <option value="Treads of Cthon">Treads of Cthon</option>
  <option value="Goblin Toe">Goblin Toe</option>
  <option value="Tearhaunch">Tearhaunch</option>
  <option value="Infernostride">Infernostride</option>
  
  </select>
  <div id="boot-info"></div>
</div>


<div class="groupringsone">
  <label for="ringsone-dropdown">Ring:</label>
  <select id="ringsone-dropdown" name="ringone">
  <option value="Nagelring">Nagelring</option>
  <option value="Manald Heal">Manald Heal</option>
  <option value="The Stone of Jordan">The Stone of Jordan</option>
  <option value="Dwarf Star">Dwarf Star</option>
  <option value="Raven Frost">Raven Frost</option>
  <option value="Bul-Kathos' Wedding Band">Bul-Kathos' Wedding Band</option>
  <option value="Carrion Wind">Carrion Wind</option>
  <option value="Nature's Peace">Nature's Peace</option>
  <option value="Wisp Projector">Wisp Projector</option>
  <option value="Kadala's Heirloom">Kadala's Heirloom</option>
  
  </select>
  <div id="ringsone-info"></div>
</div>



<div class="groupringstwo">
    <label for="ringstwo-dropdown">Ring:</label>
    <select id="ringstwo-dropdown" name="ringtwo">
    <option value="Nagelring">Nagelring</option>
    <option value="Manald Heal">Manald Heal</option>
    <option value="The Stone of Jordan">The Stone of Jordan</option>
    <option value="Dwarf Star">Dwarf Star</option>
    <option value="Raven Frost">Raven Frost</option>
    <option value="Bul-Kathos' Wedding Band">Bul-Kathos' Wedding Band</option>
    <option value="Carrion Wind">Carrion Wind</option>
    <option value="Nature's Peace">Nature's Peace</option>
    <option value="Wisp Projector">Wisp Projector</option>
    <option value="Kadala's Heirloom">Kadala's Heirloom</option>
    
    </select>
    <div id="ringstwo-info"></div>
</div>


<div class="groupamulets">
    <label for="amulets-dropdown">Amulet:</label>
    <select id="amulets-dropdown" name="amulets">
    <option value="Nokozan Relic">Nokozan Relic</option>
    <option value="The Eye of Etlich">The Eye of Etlich</option>
    <option value="The Mahim-Oak Curio">The Mahim-Oak Curio</option>
    <option value="Saracen's Chance">Saracen's Chance</option>
    <option value="Crescent Moon">Crescent Moon</option>
    <option value="The Cat's Eye">The Cat's Eye</option>
    <option value="Atma's Scarab">Atma's Scarab</option>
    <option value="Highlord's Wrath">Highlord's Wrath</option>
    <option value="The Rising Sun">The Rising Sun</option>
    <option value="Seraph's Hymn">Seraph's Hymn</option>
    <option value="Mara's Caleidoscope">Mara's Caleidoscope</option>
    <option value="Metalgrid">Metalgrid</option>
    <option value="The Third Eye">The Third Eye</option>
    <option value="Amulet of the Viper">Amulet of the Viper</option>
    </select>
    <div id="amulet-info"></div>
</div>


<div>
<div class="allskillscontainer">All sk
<div id="allskillscontainer">
</div>
                           
  
<div class="magicfindcontainer">Magic Find
<div id="magicfindcontainer">
</div>
    
<div class="goldfindcontainer">Gold Find
<div id="goldfindcontainer">
</div>
    
<div class="owcontainer">OW
<div id="owcontainer">
</div>

<div class="owdmgcontainer">OW Dmg/s
<div id="owdmgcontainer">
</div>
       
<div class="cbcontainer">CB
<div id="cbcontainer">
</div>
    
<div class="cbdmgcontainer">Cb Dmg
<div id="cbdmgcontainer">
</div>  


<div class="piercephyscontainer">Pierce Phys<div id="piercephyscontainer"></div>
<div class="piercefirecontainer">Pierce Fire<div id="piercefirecontainer"></div>
<div class="piercecoldcontainer">Pierce Cold<div id="piercecoldcontainer"></div>
<div class="piercelightcontainer">Pierce Light<div id="piercelightcontainer"></div>
<div class="piercepoisoncontainer">Pierce Poison<div id="piercepoisoncontainer"></div>
<div class="piercemagiccontainer">Pierce Magic<div id="piercemagiccontainer"></div>

<div class="flatfirecontainer">Fire Dmg<div id="flatfirecontainer"></div>
<div class="flatcoldcontainer">Cold Dmg<div id="flatcoldcontainer"></div>
<div class="flatlightcontainer">Light Dmg<div id="flatlightcontainer"></div>
<div class="flatpoisoncontainer">Poison Dmg<div id="flatpoisoncontainer"></div>
<div class="flatmagiccontainer">Magic Dmg<div id="flatmagiccontainer"></div>

<div class="criticalhitcontainer">Critical Hit<div id="criticalhitcontainer"></div>
<div class="deadlystrikecontainer">Deadly Strike<div id="deadlystrikecontainer"></div>
<div class="weaponmasterycontainer">Weapon Mastery<div id="weaponmasterycontainer"></div>

<div class="crithitmultipliercontainer">Crit Hit dmg multiplier<div id="crithitmultipliercontainer"></div>
</div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>

<div class="inventorycontainer">
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div> 
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div> 
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>  
  <div class="charm1"></div>  
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
  <div class="charm1"></div>
</div>
  
  


<!-- Modal -->
<div id="charmModal" class="modal">
  <div class="modal-content">
    <span id="closeModal" class="close">&times;</span>
    <h2>Choose Charm Type when you drag charm with RMB, it will duplicate</h2>
    <div class="charm-types">
      </div>
    <button data-type="small-charm">Small Charm</button>
    <button data-type="large-charm">Large Charm</button>
    <button data-type="grand-charm">Grand Charm</button>
    <div class="prefixproperties" style="display: none;">
    <h3>Prefix</h3>
    <div class="propertycontainer">
      <button data-property="Stout">Stout</button>
      <input type="range" id="stoutRange" min="1" max="1" value="1" class="propertyrange">
      <span id="stoutValue">1</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Stout2">Stout</button>
      <input type="range" id="stout2Range" min="4" max="8" value="4" class="propertyrange">
      <span id="stout2Value">4</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Burly">Burly</button>
      <input type="range" id="burlyRange" min="15" max="20" value="15" class="propertyrange">
      <span id="burlyValue">15</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Stalwart">Stalwart</button>
      <input type="range" id="stalwartRange" min="20" max="30" value="20" class="propertyrange">
      <span id="stalwartValue">20</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Red">Red</button>
      <input type="range" id="redRange" min="1" max="1" value="1" class="propertyrange">
      <span id="redValue">1</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Jagged">Jagged</button>
      <input type="range" id="jaggedRange" min="1" max="1" value="1" class="propertyrange">
      <span id="jaggedValue">1</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Bronze">Bronze</button>
      <input type="range" id="bronzeRange" min="2" max="4" value="2" class="propertyrange">
      <span id="bronzeValue">8</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Bronze2">Bronze</button>
      <input type="range" id="bronze2Range" min="6" max="12" value="6" class="propertyrange">
      <span id="bronze2Value">8</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Iron">Iron</button>
      <input type="range" id="ironRange" min="13" max="24" value="13" class="propertyrange">
      <span id="ironValue">13</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Steel">Steel</button>
      <input type="range" id="steelRange" min="25" max="36" value="25" class="propertyrange">
      <span id="steelValue">25</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Fine">Fine</button>
      <input type="range" id="fineRange" min="1" max="3" value="1" class="propertyrange">
      <span id="fineValue">1</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Lizards">Lizard's</button>
      <input type="range" id="lizardsRange" min="1" max="2" value="1" class="propertyrange">
      <span id="lizardsValue">1</span>
    </div>
    <div class="propertycontainer">
      <button data-property="Lizards2">Lizard's</button>
      <input type="range" id="lizards2Range" min="3" max="7" value="3" class="propertyrange">
      <span id="lizards2Value">3</span>
    </div>
      <div class="propertycontainer">
        <button data-property="Snakes">Snake's</button>
        <input type="range" id="snakesRange" min="8" max="12" value="8" class="propertyrange">
        <span id="snakesValue">8</span>
    </div>
      <div class="propertycontainer">
        <button data-property="Serpents">Serpent's</button>
        <input type="range" id="serpentsRange" min="13" max="17" value="13" class="propertyrange">
        <span id="serpentsValue">13</span>
    </div>
      <div class="propertycontainer">
        <button data-property="Shimmering">Shimmering</button>
        <input type="range" id="shimmeringRange" min="3" max="5" value="3" class="propertyrange">
        <span id="shimmeringValue">3</span>
    </div>
      <div class="propertycontainer">
        <button data-property="Azure">Azure</button>
        <input type="range" id="azureRange" min="3" max="5" value="3" class="propertyrange">
      <span id="azureValue">3</span>
   </div>
   <div class="propertycontainer">
    <button data-property="Lapis">Lapis</button>
    <input type="range" id="lapisRange" min="6" max="7" value="6" class="propertyrange">
  <span id="lapisValue">6</span>
</div>
<div class="propertycontainer">
  <button data-property="Cobalt">Cobalt</button>
  <input type="range" id="cobaltRange" min="8" max="9" value="8" class="propertyrange">
<span id="cobaltValue">8</span>
</div>
<div class="propertycontainer">
  <button data-property="Sapphire">Sapphire</button>
  <input type="range" id="sapphireRange" min="10" max="11" value="10" class="propertyrange">
<span id="sapphireValue">10</span>
</div>
<div class="propertycontainer">
  <button data-property="Crimson">Crimson</button>
  <input type="range" id="crimsonRange" min="3" max="5" value="3" class="propertyrange">
<span id="crimsonValue">3</span>
</div>
<div class="propertycontainer">
  <button data-property="Russet">Russet</button>
  <input type="range" id="russetRange" min="6" max="7" value="6" class="propertyrange">
<span id="russetValue">6</span>
</div>
<div class="propertycontainer">
  <button data-property="Garnet">Garnet</button>
  <input type="range" id="garnetRange" min="8" max="9" value="8" class="propertyrange">
<span id="garnetValue">8</span>
</div>
<div class="propertycontainer">
  <button data-property="Ruby">Ruby</button>
  <input type="range" id="rubyRange" min="10" max="11" value="10" class="propertyrange">
<span id="rubyValue">10</span>
</div>
<div class="propertycontainer">
  <button data-property="Tangerine">Tangerine</button>
  <input type="range" id="tangerineRange" min="3" max="5" value="3" class="propertyrange">
<span id="tangerineValue">3</span>
</div>
<div class="propertycontainer">
  <button data-property="Ocher">Ocher</button>
  <input type="range" id="ocherRange" min="6" max="7" value="6" class="propertyrange">
<span id="ocherValue">6</span>
</div>
<div class="propertycontainer">
  <button data-property="Coral">Coral</button>
  <input type="range" id="coralRange" min="8" max="9" value="8" class="propertyrange">
<span id="coralValue">8</span>
</div>
<div class="propertycontainer">
  <button data-property="Amber">Amber</button>
  <input type="range" id="amberRange" min="10" max="11" value="10" class="propertyrange">
<span id="amberValue">10</span>
</div>
<div class="propertycontainer">
  <button data-property="Beryl">Beryl</button>
  <input type="range" id="berylRange" min="3" max="5" value="3" class="propertyrange">
<span id="berylValue">3</span>
</div>
<div class="propertycontainer">
  <button data-property="Viridian">Viridian</button>
  <input type="range" id="viridianRange" min="6" max="7" value="6" class="propertyrange">
<span id="viridianValue">6</span>
</div>
<div class="propertycontainer">
  <button data-property="Jade">Jade</button>
  <input type="range" id="jadeRange" min="8" max="9" value="8" class="propertyrange">
<span id="jadeValue">8</span>
</div>   
<div class="propertycontainer">
  <button data-property="Emerald">Emerald</button>
  <input type="range" id="emeraldRange" min="10" max="11" value="10" class="propertyrange">
<span id="emeraldValue">10</span>
</div>
<div class="propertycontainer">
  <button data-property="Snowy">Snowy</button>
  <input type="range" id="snowyRange" min="2" max="4" value="2" class="propertyrange">
<span id="snowyValue">2</span>
</div>
<div class="propertycontainer">
  <button data-property="Shivering">Shivering</button>
  <input type="range" id="shiveringRange" min="4" max="8" value="4" class="propertyrange">
<span id="shiveringValue">4</span>
</div>
<div class="propertycontainer">
  <button data-property="Boreal">Boreal</button>
  <input type="range" id="borealRange" min="8" max="16" value="8" class="propertyrange">
<span id="borealValue">8</span>
</div>
<div class="propertycontainer">
  <button data-property="Hibernal">Hibernal</button>
  <input type="range" id="hibernalRange" min="13" max="27" value="13" class="propertyrange">
<span id="hibernalValue">13</span>
</div>
<div class="propertycontainer">
  <button data-property="Fiery">Fiery</button>
  <input type="range" id="fieryRange" min="1" max="3" value="1" class="propertyrange">
<span id="fieryValue">1</span>
</div>
<div class="propertycontainer">
  <button data-property="Smoldering">Smoldering</button>
  <input type="range" id="smolderingRange" min="3" max="10" value="3" class="propertyrange">
<span id="smolderingValue">3</span>
</div>
<div class="propertycontainer">
  <button data-property="Smoking">Smoking</button>
  <input type="range" id="smokingRange" min="9" max="19" value="8" class="propertyrange">
<span id="smokingValue">9</span>
</div>
<div class="propertycontainer">
  <button data-property="Flaming">Flaming</button>
  <input type="range" id="flamingRange" min="19" max="29" value="19" class="propertyrange">
<span id="flamingValue">19</span>
</div>
<div class="propertycontainer">
  <button data-property="Static">Static</button>
  <input type="range" id="staticRange" min="1" max="11" value="1" class="propertyrange">
<span id="staticValue">1</span>
</div>
<div class="propertycontainer">
  <button data-property="Glowing">Glowing</button>
  <input type="range" id="glowingRange" min="1" max="17" value="1" class="propertyrange">
<span id="glowingValue">1</span>
</div>
<div class="propertycontainer">
  <button data-property="Arcing">Arcing</button>
  <input type="range" id="arcingRange" min="1" max="30" value="1" class="propertyrange">
<span id="arcingValue">1</span>
</div>
<div class="propertycontainer">
  <button data-property="Shocking">Shocking</button>
  <input type="range" id="shockingRange" min="1" max="50" value="1" class="propertyrange">
<span id="shockingValue">1</span>
</div>
<div class="propertycontainer">
  <button data-property="Septic">Septic</button>
  <input type="range" id="septicRange" min="4" max="4" value="4" class="propertyrange">
<span id="septicValue">4</span>
</div>
<div class="propertycontainer">
  <button data-property="Foul">Foul</button> 
  <input type="range" id="foulRange" min="13" max="13" value="13" class="propertyrange">
<span id="foulValue">13</span>
</div>
<div class="propertycontainer">
  <button data-property="Toxic">Toxic</button>
  <input type="range" id="toxicRange" min="25" max="25" value="25" class="propertyrange">
<span id="toxicValue">25</span> 
</div>
<div class="propertycontainer">
  <button data-property="Pestilent">Pestilent</button>
  <input type="range" id="pestilentRange" min="65" max="65" value="65" class="propertyrange">
<span id="pestilentValue">65</span>
  </div>

  <div class="propertycontainer">
    <button data-property="Customforty">Custom 40 max dmg</button>
    <input type="range" id="customfortyRange" min="1" max="40" value="1" class="propertyrange">
  <span id="customfortyValue">1</span>
    </div>

    <div class="propertycontainer">
      <button data-property="Customeighty">Custom 80 max dmg</button>
      <input type="range" id="customeightyRange" min="41" max="80" value="41" class="propertyrange">
    <span id="customeightyValue">41</span>
      </div>

      <div class="propertycontainer">
        <button data-property="Customhundredtwenty">Custom 120 max dmg</button>
        <input type="range" id="customhundredtwentyRange" min="81" max="120" value="81" class="propertyrange">
      <span id="customhundredtwentyValue">81</span>
        </div>

        <div class="propertycontainer">
          <button data-property="Custommin">Custom Minimum Damage</button>
          <input type="range" id="customminRange" min="1" max="200" value="1" class="propertyrange">
        <span id="customminValue">1</span>
          </div>

          <div class="propertycontainer">
            <button data-property="Customlife">Custom Life</button>
            <input type="range" id="customlifeRange" min="81" max="200" value="1" class="propertyrange">
          <span id="customlifeValue">1</span>
            </div>

            <div class="propertycontainer">
              <button data-property="Customallskills">Custom All skills</button>
              <input type="range" id="customallskillsRange" min="1" max="40" value="1" class="propertyrange">
            <span id="customallskillsValue">1</span>
              </div>
            


  <div class="suffixproperties" style="display: none;">
    <h3>Suffix</h3>
    <div class="propertycontainer">
      <button data-property="Offrost">Of Frost</button>
      <input type="range" id="offrostRange" min="1" max="2" value="1" class="propertyrange">
      <span id="offrostValue">1</span>
    </div>
    
      <div class="propertycontainer">
        <button data-property="Oficicle">Of Icicle</button>
        <input type="range" id="oficicleRange" min="2" max="5" value="2" class="propertyrange">
        <span id="oficicleValue">2</span>
      </div>

       <div class="propertycontainer">
        <button data-property="Ofglacier">Of Glacier</button>
        <input type="range" id="ofglacierRange" min="4" max="8" value="4" class="propertyrange">
        <span id="ofglacierValue">4</span>
      </div>

      <div class="propertycontainer">
        <button data-property="Ofwinter">Of Winter</button>
        <input type="range" id="ofwinterRange" min="7" max="13" value="7" class="propertyrange">
        <span id="ofwinterValue">7</span>
      </div>

      <div class="propertycontainer">
        <button data-property="Offlame">Of Flame</button>
        <input type="range" id="offlameRange" min="1" max="2" value="1" class="propertyrange">
        <span id="offlameValue">1</span>
    </div>

      <div class="propertycontainer">
        <button data-property="Offire">Of Fire</button>
        <input type="range" id="offireRange" min="2" max="5" value="2" class="propertyrange">
        <span id="offireValue">2</span>
      </div>

      <div class="propertycontainer">
        <button data-property="Ofburning">Of Burning</button>
        <input type="range" id="ofburningRange" min="5" max="9" value="5" class="propertyrange">
        <span id="ofburningValue">5</span>
      </div>

       <div class="propertycontainer">
        <button data-property="Ofincineration">Of Incineration</button>
        <input type="range" id="ofincinerationRange" min="8" max="14" value="8" class="propertyrange">
        <span id="ofincinerationValue">8</span>
      </div> 

      <div class="propertycontainer">
        <button data-property="Ofshock">Of Shock</button>
        <input type="range" id="ofshockRange" min="1" max="5" value="1" class="propertyrange">
        <span id="ofshockValue">1</span>
      </div>

      <div class="propertycontainer">
        <button data-property="Oflightning">Of Lightning</button>
        <input type="range" id="oflightningRange" min="1" max="9" value="1" class="propertyrange">
        <span id="oflightningValue">1</span>
        </div>
         
      <div class="propertycontainer">
        <button data-property="Ofthunder">Of Thunder</button>
        <input type="range" id="ofthunderRange" min="1" max="16" value="1" class="propertyrange">
        <span id="ofthunderValue">1</span>
        </div>

           <div class="propertycontainer">
            <button data-property="Ofstorms">Of Storms</button>
            <input type="range" id="ofstormsRange" min="1" max="25" value="1" class="propertyrange">
            <span id="ofstormsValue">1</span>
            </div>

            <div class="propertycontainer">
              <button data-property="Ofcraftsmanship">Of Craftsmanship</button>
              <input type="range" id="ofcraftsmanshipRange" min="1" max="2" value="1" class="propertyrange">
              <span id="ofcraftsmanshipValue">1</span>
              </div>

                 <div class="propertycontainer">
                  <button data-property="Ofblight">Of Blight</button>
                  <input type="range" id="ofblightRange" min="3" max="3" value="3" class="propertyrange">
                  <span id="ofblightValue">3</span>
                  </div>

                  <div class="propertycontainer">
                    <button data-property="Ofvenom">Of Venom</button>
                    <input type="range" id="ofvenomRange" min="6" max="6" value="6" class="propertyrange">
                    <span id="ofvenomValue">6</span>
                    </div>

                    <div class="propertycontainer">
                      <button data-property="Ofpestilence">Of Pestilence</button>
                      <input type="range" id="ofpestilenceRange" min="12" max="12" value="12" class="propertyrange">
                      <span id="ofpestilenceValue">12</span>
                      </div>

 <div class="propertycontainer">
  <button data-property="Ofanthrax">Of Anthrax</button>
  <input type="range" id="ofanthraxRange" min="20" max="20" value="20" class="propertyrange">
  <span id="ofanthraxValue">20</span>
  </div> 

  <div class="propertycontainer">
    <button data-property="Ofbalance">Of Balance</button>
    <input type="range" id="ofbalanceRange" min="5" max="5" value="5" class="propertyrange">
    <span id="ofbalanceValue">5</span>
    </div>

    <div class="propertycontainer">
      <button data-property="Ofgreed">Of Greed</button>
      <input type="range" id="ofgreedRange" min="5" max="10" value="5" class="propertyrange">
      <span id="ofgreedValue">5</span>
      </div>

      <div class="propertycontainer">
        <button data-property="Offortune">Of Fortune</button>
        <input type="range" id="offortuneRange" min="3" max="5" value="3" class="propertyrange">
        <span id="offortuneValue">5</span>
        </div>

        <div class="propertycontainer">
          <button data-property="Ofgoodluck">Of Good Luck</button>
          <input type="range" id="ofgoodluckRange" min="6" max="7" value="6" class="propertyrange">
          <span id="ofgoodluckValue">6</span>
          </div> 

          <div class="propertycontainer">
            <button data-property="Oflife">Of Life</button>
            <input type="range" id="oflifeRange" min="5" max="10" value="5" class="propertyrange">
            <span id="oflifeValue">5</span>
            </div> 

            <div class="propertycontainer">
              <button data-property="Ofsustenance">Of Sustenance</button>
              <input type="range" id="ofsustenanceRange" min="11" max="15" value="11" class="propertyrange">
              <span id="ofsustenanceValue">11</span>
              </div>

              <div class="propertycontainer">
                <button data-property="Ofvita">Of Vita</button>
                <input type="range" id="ofvitaRange" min="16" max="20" value="16" class="propertyrange">
                <span id="ofvitaValue">16</span>
              </div>

              <div class="propertycontainer">
                <button data-property="Ofstrength">Of Strength</button>
                <input type="range" id="ofstrengthRange" min="1" max="1" value="1" class="propertyrange">
                <span id="ofstrengthValue">1</span>
                </div>

                <div class="propertycontainer">
                  <button data-property="Ofstrength2">Of Strength</button>
                  <input type="range" id="ofstrength2Range" min="2" max="2" value="2" class="propertyrange">
                  <span id="ofstrength2Value">2</span>
                  </div>

                  <div class="propertycontainer">
                    <button data-property="Ofdexterity">Of Dexterity</button>
                    <input type="range" id="ofdexterityRange" min="1" max="1" value="1" class="propertyrange">
                    <span id="ofdexterityValue">1</span>
                    </div>

                    <div class="propertycontainer">
                      <button data-property="Ofdexterity2">Of Dexterity</button>
                      <input type="range" id="ofdexterity2Range" min="2" max="2" value="2" class="propertyrange">
                      <span id="ofdexterity2Value">2</span>
                      </div>

                      <div class="propertycontainer">
                        <button data-property="Ofinertia">Of Inertia</button>
                        <input type="range" id="ofinertiaRange" min="3" max="3" value="3" class="propertyrange">
                        <span id="ofinertiaValue">3</span>
                        </div>

                              

                      </div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>




<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<div id="javelinandspearskillscontainer" class="skill-container">
  <div>Jab:<input min="0" max="20" type="number" id="jabcontainer"></div>
  <div>Poison Javelin:<input min="0" max="20" type="number" id="poisonjavelincontainer"></div>
  <div>Javelin and Spear Mastery:<input min="0" max="20" type="number" id="javelinandspearmasterycontainer" class="hiddenSkill6"></div>
  <div>Power Strike:<input min="0" max="20" type="number" id="powerstrikecontainer" class="hiddenSkill6"></div>
  <div>Lightning Bolt:<input min="0" max="20" type="number" id="lightningboltcontainer" class="hiddenSkill12" ></div>
  <div>Fend:<input min="0" max="20" type="number" id="fendcontainer" class="hiddenSkill18"></div>
  <div>Charged Strike:<input min="0" max="20" type="number" id="chargedstrikecontainer" class="hiddenSkill18"></div>
  <div>Plague Javelin:<input min="0" max="20" type="number" id="plaguejavelincontainer" class="hiddenSkill18"></div>
  <div>Lightning Strike:<input min="0" max="20" type="number" id="lightningstrikecontainer" class="hiddenSkill30"></div>
  <div>Lightning Fury:<input min="0" max="20" type="number" id="lightningfurycontainer" class="hiddenSkill30"></div></div>

  <div id="passiveskillscontainer" class="skill-container">
    <div>Inner Sight:<input min="0" max="20" type="number" id="innersightcontainer"></div>
    <div>Critical Strike:<input min="0" max="20" type="number" id="criticalstrikecontainer"></div>
    <div>Evade:<input min="0" max="20" type="number" id="evadecontainer" class="hiddenSkill6"></div>
    <div>Slow Movement:<input min="0" max="20" type="number" id="slowmovementcontainer" class="hiddenSkill12"></div>
    <div>Pierce:<input min="0" max="20" type="number" id="piercecontainer" class="hiddenSkill12"></div>
    <div>Dodge:<input min="0" max="20" type="number" id="dodgecontainer" class="hiddenSkill18"></div>
    <div>Decoy:<input min="0" max="20" type="number" id="decoycontainer" class="hiddenSkill18"></div>
    <div>Penetrate:<input min="0" max="20" type="number" id="penetratecontainer" class="hiddenSkill24"></div>
    <div>Valkyrie:<input min="0" max="20" type="number" id="valkyriecontainer" class="hiddenSkill30"></div></div>
  

    <div id="bowandcrossbowskillscontainer" class="skill-container">
      <div>Magic Arrow:<input min="0" max="20" type="number" id="magicarrowcontainer"></div>
      <div>Multiple Shot:<input min="0" max="20" type="number" id="multipleshotcontainer" class="hiddenSkill6"></div>
      <div>Fire Arrow:<input min="0" max="20" type="number" id="firearrowcontainer" class="hiddenSkill6"></div>
      <div>Cold Arrow:<input min="0" max="20" type="number" id="coldarrowcontainer" class="hiddenSkill6"></div>
      <div>Ice Arrow:<input min="0" max="20" type="number" id="icearrowcontainer" class="hiddenSkill12"></div>
      <div>Guided Arrow:<input min="0" max="20" type="number" id="guidedarrowcontainer" class="hiddenSkill18"></div>
      <div>Exploding Arrow:<input min="0" max="20" type="number" id="explodingarrowcontainer" class="hiddenSkill18"></div>
      <div>Strafe:<input min="0" max="20" type="number" id="strafecontainer" class="hiddenSkill24"></div>
      <div>Immolation Arrow:<input min="0" max="20" type="number" id="immolationarrowcontainer" class="hiddenSkill30"></div>
      <div>Freezing Arrow:<input min="0" max="20" type="number" id="freezingarrowcontainer" class="hiddenSkill30"></div></div>
     


    <div id="martialartskillscontainer" class="skill-container">
      <div>Tiger Strike:<input type="number" min="0" max="20" value="0" id="tigerstrikecontainer"></div>
      <div>Dragon Talon:<input type="number" min="0" max="20" value="0" id="dragontaloncontainer"></div>
      <div>Dragon Claw:<input type="number" min="0" max="20" value="0" id="dragonclawcontainer" class="hiddenSkill6"></div>
      <div>Fists of Fire:<input type="number" min="0" max="20" value="0" id="fistsoffirecontainer" class="hiddenSkill6"></div>
      <div>Cobra Strike:<input type="number" min="0" max="20" value="0" id="cobrastrikecontainer" class="hiddenSkill12"></div>
      <div>Claws of Thunder:<input type="number" min="0" max="20" value="0" id="clawsofthundercontainer" class="hiddenSkill18"></div>
      <div>Dragon Tail:<input type="number" min="0" max="20" value="0" id="dragontailcontainer" class="hiddenSkill18"></div>
      <div>Dragon Flight:<input type="number" min="0" max="20" value="0" id="dragonflightcontainer" class="hiddenSkill24"></div>
      <div>Blades of Ice:<input type="number" min="0" max="20" value="0" id="bladesoficecontainer" class="hiddenSkill24"></div>
      <div>Phoenix Strike:<input type="number" min="0" max="20" value="0" id="phoenixstrikecontainer" class="hiddenSkill30"></div>
  </div>

  <div id="shadowskillscontainer" class="skill-container">
      <div>Claw and Dagger Mastery:<input type="number" min="0" max="20" value="0" id="clawanddaggermasterycontainer"></div>
      <div>Psychic Hammer:<input type="number" min="0" max="20" value="0" id="psychichammercontainer"></div>
      <div>Burst of Speed:<input type="number" min="0" max="20" value="0" id="burstofspeedcontainer" class="hiddenSkill6"></div>
      <div>Weapon Block:<input type="number" min="0" max="20" value="0" id="weaponblockcontainer" class="hiddenSkill12"></div>
      <div>Cloak of Shadows:<input type="number" min="0" max="20" value="0" id="cloakofshadowscontainer" class="hiddenSkill12"></div>
      <div>Mind Blast:<input type="number" min="0" max="20" value="0" id="mindblastcontainer" class="hiddenSkill18"></div>
      <div>Fade:<input type="number" min="0" max="20" value="0" id="fadecontainer" class="hiddenSkill18"></div>
      <div>Shadow Warrior:<input type="number" min="0" max="20" value="0" id="shadowwarriorcontainer" class="hiddenSkill18"></div>
      <div>Shadow Master:<input type="number" min="0" max="20" value="0" id="shadowmastercontainer" class="hiddenSkill30"></div>
      <div>Venom:<input type="number" min="0" max="20" value="0" id="venomcontainer" class="hiddenSkill30"></div></div>


    <div id="trapskillscontainer" class="skill-container">
      <div>Fire Blast:<input type="number" min="0" max="20" value="0" id="fireblastcontainer"></div>
      <div>Shock Web:<input type="number" min="0" max="20" value="0" id="shockwebcontainer" class="hiddenSkill6"></div>
      <div>Blade Sentinel:<input type="number" min="0" max="20" value="0" id="bladesentinelcontainer" class="hiddenSkill6"></div>
      <div>Charged Bolt Sentry:<input type="number" min="0" max="20" value="0" id="chargedboltsentrycontainer" class="hiddenSkill12"></div>
      <div>Wake of Fire:<input type="number" min="0" max="20" value="0" id="wakeoffirecontainer" class="hiddenSkill12"></div>
      <div>Blade Fury:<input type="number" min="0" max="20" value="0" id="bladefurycontainer" class="hiddenSkill18"></div>
      <div>Blade Shield:<input type="number" min="0" max="20" value="0" id="bladeshieldcontainer" class="hiddenSkill24"></div>
      <div>Lightning Sentry:<input type="number" min="0" max="20" value="0" id="lightningsentrycontainer" class="hiddenSkill24"></div>
      <div>Wake of Inferno:<input type="number" min="0" max="20" value="0" id="wakeofinfernocontainer" class="hiddenSkill24"></div>
      <div>Chain Light Sentry:<input type="number" min="0" max="20" value="0" id="chainlightningsentrycontainer" class="hiddenSkill30"></div>
      <div>Death Sentry:<input type="number" min="0" max="20" value="0" id="deathsentrycontainer" class="hiddenSkill30"></div>
    
    
    
    
    
    
    </div>

    




    <div id="warcriesskillscontainer" class="skill-container">
      <div>Howl:<input type="number" min="0" max="20" value="0" id="howlcontainer"></div>
      <div>Find Potion:<input type="number" min="0" max="20" value="0" id="findpotioncontainer"></div>
      <div>Shout:<input type="number" min="0" max="20" value="0" id="shoutcontainer" class="hiddenSkill6"></div>
      <div>War Cry:<input type="number" min="0" max="20" value="0" id="warcrycontainer" class="hiddenSkill6"></div>
      <div>Find Item:<input type="number" min="0" max="20" value="0" id="finditemcontainer" class="hiddenSkill12"></div>
      <div>Taunt:<input type="number" min="0" max="20" value="0" id="tauntcontainer" class="hiddenSkill18"></div>
      <div>Battle Orders:<input type="number" min="0" max="20" value="0" id="battleorderscontainer" class="hiddenSkill24"></div>
      <div>Grim Ward:<input type="number" min="0" max="20" value="0" id="grimwardcontainer" class="hiddenSkill24"></div>
      <div>Battle Command:<input type="number" min="0" max="20" value="0" id="battlecommandcontainer" class="hiddenSkill30"></div>
      <div>Battle Cry:<input type="number" min="0" max="20" value="0" id="battlecrycontainer" class="hiddenSkill30"></div></div>
      

      <div id="combatmasteriesskillscontainer" class="skill-container">
      <div>General Mastery:<input type="number" min="0" max="20" value="0" id="generalmasterycontainer"></div>
      <div>Throwing Mastery:<input type="number" min="0" max="20" value="0" id="throwingmasterycontainer"></div>
      <div>Polearm and Spear Mastery:<input type="number" min="0" max="20" value="0" id="polearmandspearmasterycontainer" class="hiddenSkill6"></div>
      <div>Combat Reflexes:<input type="number" min="0" max="20" value="0" id="combatreflexescontainer" class="hiddenSkill12"></div>
      <div>Iron Skin:<input type="number" min="0" max="20" value="0" id="ironskincontainer" class="hiddenSkill18"></div>
      <div>Increased Speed:<input type="number" min="0" max="20" value="0" id="increasedspeedcontainer" class="hiddenSkill24"></div>
      <div>Natural Resistance:<input type="number" min="0" max="20" value="0" id="naturalresistancecontainer" class="hiddenSkill30"></div>
      <div>Deep Wounds:<input type="number" min="0" max="20" value="0" id="deepwoundscontainer" class="hiddenSkill30"></div></div>  

      <div id="combatskillsskillscontainer" class="skill-container">
      <div>Bash:<input type="number" min="0" max="20" value="0" id="bashcontainer"></div>
      <div>Double Swing:<input type="number" min="0" max="20" value="0" id="doubleswingcontainer"></div>
      <div>Frenzy:<input type="number" min="0" max="20" value="0" id="frenzycontainer" class="hiddenSkill6"></div>
      <div>Stun:<input type="number" min="0" max="20" value="0" id="stuncontainer" class="hiddenSkill6"></div>
      <div>Concentrate:<input type="number" min="0" max="20" value="0" id="concentratecontainer" class="hiddenSkill12"></div>
      <div>Double Throw:<input type="number" min="0" max="20" value="0" id="doublethrowcontainer" class="hiddenSkill12"></div>
      <div>Leap:<input type="number" min="0" max="20" value="0" id="leapcontainer" class="hiddenSkill12"></div>
      <div>Leap Attack:<input type="number" min="0" max="20" value="0" id="leapattackcontainer" class="hiddenSkill24"></div>
      <div>Berserk:<input type="number" min="0" max="20" value="0" id="berserkcontainer" class="hiddenSkill24"></div>
      <div>Whirlwind:<input type="number" min="0" max="20" value="0" id="whirlwindcontainer" class="hiddenSkill30"></div>
    
    
    
    
    
    
    
    </div>



    <div id="elementalskillsskillscontainer" class="skill-container">
      <div>Firestorm:<input type="number" min="0" max="20" value="0" id="firestormcontainer"></div>
      <div>Arctic Blast:<input type="number" min="0" max="20" value="0" id="arcticblastcontainer"></div>
      <div>Molten Boulder:<input type="number" min="0" max="20" value="0" id="moltenbouldercontainer" class="hiddenSkill6"></div>
      <div>Cyclone Armor:<input type="number" min="0" max="20" value="0" id="cyclonearmorcontainer" class="hiddenSkill6"></div>
      <div>Fissure:<input type="number" min="0" max="20" value="0" id="fissurecontainer" class="hiddenSkill12"></div>
      <div>Twister:<input type="number" min="0" max="20" value="0" id="twistercontainer" class="hiddenSkill12"></div>
      <div>Gust:<input type="number" min="0" max="20" value="0" id="gustcontainer" class="hiddenSkill18"></div>
      <div>Volcano:<input type="number" min="0" max="20" value="0" id="volcanocontainer" class="hiddenSkill24"></div>
      <div>Tornado:<input type="number" min="0" max="20" value="0" id="tornadocontainer" class="hiddenSkill24"></div>
      <div>Hurricane:<input type="number" min="0" max="20" value="0" id="hurricanecontainer" class="hiddenSkill30"></div>
      <div>Armageddon:<input type="number" min="0" max="20" value="0" id="armageddoncontainer" class="hiddenSkill30"></div>
    </div>

    <div id="shapeshiftingskillsskillscontainer" class="skill-container">
      <div>Werewolf:<input type="number" min="0" max="20" value="0" id="werewolfcontainer"></div>
      <div>Werebear:<input type="number" min="0" max="20" value="0" id="werebearcontainer"></div>
      <div>Lycanthropy:<input type="number" min="0" max="20" value="0" id="lycantropycontainer" class="hiddenSkill6"></div>
      <div>Feral Rage:<input type="number" min="0" max="20" value="0" id="feralragecontainer" class="hiddenSkill6"></div>
      <div>Maul:<input type="number" min="0" max="20" value="0" id="maulcontainer" class="hiddenSkill12"></div>
      <div>Hunger:<input type="number" min="0" max="20" value="0" id="hungercontainer" class="hiddenSkill12"></div>
      <div>Rabies:<input type="number" min="0" max="20" value="0" id="rabiescontainer" class="hiddenSkill18"></div>
      <div>Shock Wave:<input type="number" min="0" max="20" value="0" id="shockwavecontainer" class="hiddenSkill24"></div>
      <div>Fire Claws:<input type="number" min="0" max="20" value="0" id="fireclawscontainer" class="hiddenSkill24"></div>
      <div>Fury:<input type="number" min="0" max="20" value="0" id="furycontainer" class="hiddenSkill30"></div>
      
    </div>

    <div id="summoningskillsskillscontainer" class="skill-container">
      <div>Raven:<input type="number" min="0" max="20" value="0" id="ravencontainer"></div>
      <div>Poison Creeper:<input type="number" min="0" max="20" value="0" id="poisoncreepercontainer"></div>
      <div>Heart of Wolverine:<input type="number" min="0" max="20" value="0" id="heartofwolverinecontainer" class="hiddenSkill6"></div>
      <div>Summon Spirit Wolf:<input type="number" min="0" max="20" value="0" id="summonspiritwolfcontainer" class="hiddenSkill12"></div>
      <div>Carrion Vine:<input type="number" min="0" max="20" value="0" id="carrionvinecontainer" class="hiddenSkill12"></div>
      <div>Spirit of Barbs:<input type="number" min="0" max="20" value="0" id="spiritofbarbscontainer" class="hiddenSkill12"></div>
      <div>Summon Dire Wolf<input type="number" min="0" max="20" value="0" id="summondirewolfcontainer" class="hiddenSkill18"></div>
      <div>Solar Creeper:<input type="number" min="0" max="20" value="0" id="solarcreepercontainer" class="hiddenSkill24"></div>
      <div>Oak Sage:<input type="number" min="0" max="20" value="0" id="oaksagecontainer" class="hiddenSkill24"></div>
      <div>Summon Grizzly:<input type="number" min="0" max="20" value="0" id="summongrizzlycontainer" class="hiddenSkill30"></div>
      
    </div>

    <div id="summoningspellsskillscontainer" class="skill-container">
      <div>Raise Skeleton Warrior:<input type="number" min="0" max="20" value="0" id="raiseskeletonwarriorcontainer"></div>
      <div>Skeleton Mastery:<input type="number" min="0" max="20" value="0" id="skeletonmasterycontainer"></div>
      <div>Clay Golem:<input type="number" min="0" max="20" value="0" id="claygolemcontainer" class="hiddenSkill6"></div>
      <div>Raise Skeletal Mage:<input type="number" min="0" max="20" value="0" id="raiseskeletalmagecontainer" class="hiddenSkill12"></div>
      <div>Golem Mastery:<input type="number" min="0" max="20" value="0" id="golemmasterycontainer" class="hiddenSkill12"></div>
      <div>Blood Golem:<input type="number" min="0" max="20" value="0" id="bloodgolemcontainer" class="hiddenSkill18"></div>
      <div>Blood Warp:<input type="number" min="0" max="20" value="0" id="bloodwarpcontainer" class="hiddenSkill24"></div>
      <div>Iron Golem:<input type="number" min="0" max="20" value="0" id="irongolemcontainer" class="hiddenSkill24"></div>
      <div>Raise Skeleton Archer:<input type="number" min="0" max="20" value="0" id="raiseskeletonarchercontainer" class="hiddenSkill24"></div>
      <div>Fire Golem:<input type="number" min="0" max="20" value="0" id="firegolemcontainer" class="hiddenSkill30"></div>
      <div>Revive:<input type="number" min="0" max="20" value="0" id="revivecontainer" class="hiddenSkill30"></div>
      
    </div>

    <div id="poisonandbonespellsskillscontainer" class="skill-container">
      <div>Teeth:<input type="number" min="0" max="20" value="0" id="teethcontainer"></div>
      <div>Poison Strike:<input type="number" min="0" max="20" value="0" id="poisonstrikecontainer"></div>
      <div>Bone Armor:<input type="number" min="0" max="20" value="0" id="bonearmorcontainer" class="hiddenSkill6"></div>
      <div>Corpse Explosion:<input type="number" min="0" max="20" value="0" id="corpseexplosioncontainer" class="hiddenSkill6"></div>
      <div>Bone Wall:<input type="number" min="0" max="20" value="0" id="bonewallcontainer" class="hiddenSkill12"></div>
      <div>Desecrate:<input type="number" min="0" max="20" value="0" id="desecratecontainer" class="hiddenSkill12"></div>
      <div>Bone Spear:<input type="number" min="0" max="20" value="0" id="bonespearcontainer" class="hiddenSkill18"></div>
      <div>Bone Prison:<input type="number" min="0" max="20" value="0" id="boneprisoncontainer" class="hiddenSkill24"></div>
      <div>Poison Nova:<input type="number" min="0" max="20" value="0" id="poisonnovacontainer" class="hiddenSkill30"></div>
      <div>Bone Spirit:<input type="number" min="0" max="20" value="0" id="bonespiritcontainer" class="hiddenSkill30"></div>
      
      
    </div>

    <div id="cursesskillscontainer" class="skill-container">
      <div>Amplify Damage:<input type="number" min="0" max="20" value="0" id="amplifydamagecontainer"></div>
      <div>Curse Mastery:<input type="number" min="0" max="20" value="0" id="cursemasterycontainer"></div>
      <div>Dim Vision:<input type="number" min="0" max="20" value="0" id="dimvisioncontainer" class="hiddenSkill6"></div>
      <div>Dark Pact:<input type="number" min="0" max="20" value="0" id="darkpactcontainer" class="hiddenSkill6"></div>
      <div>Iron Maiden:<input type="number" min="0" max="20" value="0" id="ironmaidencontainer" class="hiddenSkill12"></div>
      <div>Life Tap:<input type="number" min="0" max="20" value="0" id="lifetapcontainer" class="hiddenSkill12"></div>
      <div>Terror:<input type="number" min="0" max="20" value="0" id="terrorcontainer" class="hiddenSkill12"></div>
      <div>Weaken:<input type="number" min="0" max="20" value="0" id="weakencontainer" class="hiddenSkill18"></div>
      <div>Confuse:<input type="number" min="0" max="20" value="0" id="confusecontainer" class="hiddenSkill18"></div>
      <div>Attract:<input type="number" min="0" max="20" value="0" id="attractcontainer" class="hiddenSkill24"></div>
      <div>Decrepify:<input type="number" min="0" max="20" value="0" id="decrepifycontainer" class="hiddenSkill24"></div>
      <div>Lower Resist:<input type="number" min="0" max="20" value="0" id="lowerresistcontainer" class="hiddenSkill30"></div>
    </div>


    <div id="defensiveaurasskillscontainer" class="skill-container">
      <div>Prayer:<input type="number" min="0" max="20" value="0" id="prayercontainer"></div>
      <div>Resist Fire:<input type="number" min="0" max="20" value="0" id="resistfirecontainer"></div>
      <div>Resist Cold:<input type="number" min="0" max="20" value="0" id="resistcoldcontainer"></div>
      <div>Resist Lightning:<input type="number" min="0" max="20" value="0" id="resistlightningcontainer"></div>
      <div>Defiance:<input type="number" min="0" max="20" value="0" id="defiancecontainer" class="hiddenSkill6"></div>
      <div>Cleansing:<input type="number" min="0" max="20" value="0" id="cleansingcontainer" class="hiddenSkill12"></div>
      <div>Vigor:<input type="number" min="0" max="20" value="0" id="vigorcontainer" class="hiddenSkill18"></div>
      <div>Meditation:<input type="number" min="0" max="20" value="0" id="meditationcontainer" class="hiddenSkill24"></div>
      <div>Redemption:<input type="number" min="0" max="20" value="0" id="redemptioncontainer" class="hiddenSkill30"></div>
      <div>Salvation:<input type="number" min="0" max="20" value="0" id="salvationcontainer" class="hiddenSkill30"></div>
      
    </div>

    <div id="offensiveaurasskillscontainer" class="skill-container">
      <div>Might:<input type="number" min="0" max="20" value="0" id="mightcontainer"></div>
      <div>Holy Fire:<input type="number" min="0" max="20" value="0" id="holyfirecontainer" class="hiddenSkill6"></div>
      <div>Thorns:<input type="number" min="0" max="20" value="0" id="thornscontainer" class="hiddenSkill6"></div>
      <div>Blessed Aim:<input type="number" min="0" max="20" value="0" id="blessedaimcontainer" class="hiddenSkill12"></div>
      <div>Concentration:<input type="number" min="0" max="20" value="0" id="concentrationcontainer" class="hiddenSkill18"></div>
      <div>Holy Freeze:<input type="number" min="0" max="20" value="0" id="holyfreezecontainer" class="hiddenSkill18"></div>
      <div>Holy Shock:<input type="number" min="0" max="20" value="0" id="holyshockcontainer" class="hiddenSkill24"></div>
      <div>Sanctuary:<input type="number" min="0" max="20" value="0" id="sanctuarycontainer" class="hiddenSkill24"></div>
      <div>Fanaticism:<input type="number" min="0" max="20" value="0" id="fanaticismcontainer" class="hiddenSkill30"></div>
      <div>Conviction:<input type="number" min="0" max="20" value="0" id="convictioncontainer" class="hiddenSkill30"></div>
      
    </div>

    <div id="combatpalaskillsskillscontainer" class="skill-container">
      <div>Sacrifice:<input type="number" min="0" max="20" value="0" id="sacrificecontainer"></div>
      <div>Holy Bolt:<input type="number" min="0" max="20" value="0" id="holyboltcontainer"></div>
      <div>Smite:<input type="number" min="0" max="20" value="0" id="smitecontainer"></div>
      <div>Zeal:<input type="number" min="0" max="20" value="0" id="zealcontainer" class="hiddenSkill6"></div>
      <div>Holy Light:<input type="number" min="0" max="20" value="0" id="holylightcontainer" class="hiddenSkill6"></div>
      <div>Charge:<input type="number" min="0" max="20" value="0" id="chargecontainer" class="hiddenSkill12"></div>
      <div>Vengeance:<input type="number" min="0" max="20" value="0" id="vengeancecontainer" class="hiddenSkill18"></div>
      <div>Blessed Hammer:<input type="number" min="0" max="20" value="0" id="blessedhammercontainer" class="hiddenSkill18"></div>
      <div>Holy Sword:<input type="number" min="0" max="20" value="0" id="holyswordcontainer" class="hiddenSkill18"></div>
      <div>Joust:<input type="number" min="0" max="20" value="0" id="joustcontainer" class="hiddenSkill24"></div>
      <div>Fist of Heavens:<input type="number" min="0" max="20" value="0" id="fistofheavenscontainer" class="hiddenSkill24"></div>
      <div>Holy Shield:<input type="number" min="0" max="20" value="0" id="holyshieldcontainer" class="hiddenSkill24"></div>
      <div>Holy Nova:<input type="number" min="0" max="20" value="0" id="holynovacontainer" class="hiddenSkill30"></div>
    </div>


    <div id="coldspellsskillscontainer" class="skill-container">
      <div>Ice Bolt:<input type="number" min="0" max="20" value="0" id="iceboltcontainer"></div>
      <div>Cold Enchant:<input type="number" min="0" max="20" value="0" id="coldenchantcontainer"></div>
      <div>Frost Nova:<input type="number" min="0" max="20" value="0" id="frostnovacontainer" class="hiddenSkill6"></div>
      <div>Ice Blast:<input type="number" min="0" max="20" value="0" id="iceblastcontainer" class="hiddenSkill6"></div>
      <div>Shiver Armor:<input type="number" min="0" max="20" value="0" id="shiverarmorcontainer" class="hiddenSkill12"></div>
      <div>Glacial Spike:<input type="number" min="0" max="20" value="0" id="glacialspikecontainer" class="hiddenSkill18"></div>
      <div>Chilling Armor:<input type="number" min="0" max="20" value="0" id="chillingarmorcontainer" class="hiddenSkill24"></div>
      <div>Ice Barrage:<input type="number" min="0" max="20" value="0" id="icebarragecontainer" class="hiddenSkill24"></div>
      <div>Blizzard:<input type="number" min="0" max="20" value="0" id="blizzardcontainer" class="hiddenSkill24"></div>
      <div>Frozen Orb:<input type="number" min="0" max="20" value="0" id="frozenorbcontainer" class="hiddenSkill30"></div>
      <div>Cold Mastery:<input type="number" min="0" max="20" value="0" id="coldmasterycontainer" class="hiddenSkill30"></div>
      
    </div>


    <div id="lightningspellsskillscontainer" class="skill-container">
      <div>Charged Bolt:<input type="number" min="0" max="20" value="0" id="chargedboltcontainer"></div>
      <div>Telekinesis:<input type="number" min="0" max="20" value="0" id="telekinesiscontainer"></div>
      <div>Static Field:<input type="number" min="0" max="20" value="0" id="staticfieldcontainer"></div>
      <div>Nova:<input type="number" min="0" max="20" value="0" id="novacontainer" class="hiddenSkill12"></div>
      <div>Lightning:<input type="number" min="0" max="20" value="0" id="lightningcontainer" class="hiddenSkill12"></div>
      <div>Teleport:<input type="number" min="0" max="20" value="0" id="teleportcontainer" class="hiddenSkill18"></div>
      <div>Chain Lightning:<input type="number" min="0" max="20" value="0" id="chainlightningcontainer" class="hiddenSkill24"></div>
      <div>Thunder Storm:<input type="number" min="0" max="20" value="0" id="thunderstormcontainer" class="hiddenSkill24"></div>
      <div>Energy Shield:<input type="number" min="0" max="20" value="0" id="energyshieldcontainer" class="hiddenSkill30"></div>
      <div>Lightning Mastery:<input type="number" min="0" max="20" value="0" id="lightningmasterycontainer" class="hiddenSkill30"></div>
      
    </div>

    <div id="firespellsskillscontainer" class="skill-container">
      <div>Fire Bolt:<input type="number" min="0" max="20" value="0" id="fireboltcontainer"></div>
      <div>Warmth:<input type="number" min="0" max="20" value="0" id="warmthcontainer"></div>
      <div>Inferno:<input type="number" min="0" max="20" value="0" id="infernocontainer"></div>
      <div>Blaze:<input type="number" min="0" max="20" value="0" id="blazecontainer" class="hiddenSkill6"></div>
      <div>Fire Wall:<input type="number" min="0" max="20" value="0" id="firewallcontainer" class="hiddenSkill12"></div>
      <div>Fire Ball:<input type="number" min="0" max="20" value="0" id="fireballcontainer" class="hiddenSkill12"></div>
      <div>Lesser Hydra:<input type="number" min="0" max="20" value="0" id="lesserhydracontainer" class="hiddenSkill12"></div>
      <div>Enchant Fire:<input type="number" min="0" max="20" value="0" id="enchantfirecontainer" class="hiddenSkill18"></div>
      <div>Meteor:<input type="number" min="0" max="20" value="0" id="meteorcontainer" class="hiddenSkill24"></div>
      <div>Combustion:<input type="number" min="0" max="20" value="0" id="combustioncontainer" class="hiddenSkill24"></div>
      <div>Hydra:<input type="number" min="0" max="20" value="0" id="hydracontainer" class="hiddenSkill30"></div>
      <div>Fire Mastery:<input type="number" min="0" max="20" value="0" id="firemasterycontainer" class="hiddenSkill30"></div>
      
    </div>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    <div id="leftskill">
      <label for="left-skill">Choose skill:</label>
      <select id="left-skill">
        <option value="jabcontainer">Jab</option>
        <option value="poisonjavelincontainer">Poison Javelin</option>
        <option value="powerstrikecontainer">Power Strike</option>
        <option value="lightningboltcontainer">Lightning Bolt</option>
        <option value="fendcontainer">Fend</option>
        <option value="chargedstrikecontainer">Charged Strike</option>
        <option value="plaguejavelincontainer">Plague Javelin</option>
        <option value="lightningstrikecontainer">Lightning Strike</option>
        <option value="lightningfurycontainer">Lightning Fury</option>
        <option value="decoycontainer">Decoy</option>
        <option value="valkyriecontainer">Valkyrie</option>
        <option value="magicarrowcontainer">Magic Arrow</option>
        <option value="multipleshotcontainer">Multiple Shot</option>
        <option value="firearrowcontainer">Fire Arrow</option>
        <option value="coldarrowcontainer">Cold Arrow</option>
        <option value="icearrowcontainer">Ice Arrow</option>
        <option value="guidedarrowcontainer">Guided Arrow</option>
        <option value="explodingarrowcontainer">Exploding Arrow</option>
        <option value="strafecontainer">Strafe</option>
        <option value="immolationarrowcontainer">Immolation Arrow</option>
        <option value="freezingarrowcontainer">Freezing Arrow</option>
      </select>
    </div>
    
    <div class="damage" id="jabValueDisplay">Skill Level: <span id="jabValueOutput">0</span><br> 
      Attack Rating: <span id="attackRatingOutput">0</span><br>
      Damage: <span id="damageOutput">0</span><br>
      Mana Cost: <span id="manaCostOutput">0</span>
  </div>
<script>

document.addEventListener('DOMContentLoaded', function() {
  const select_Class = document.getElementById('selectClass');
  const lvlInput = document.getElementById('lvlValue');
  const lifeDisplay = document.getElementById('lifeValue');
  const helmDropdown = document.getElementById('helms-dropdown');
  const armorDropdown = document.getElementById('armors-dropdown');
  const weaponDropdown = document.getElementById('weapons-dropdown');
  const offDropdown = document.getElementById('offs-dropdown');
  const gloveDropdown = document.getElementById('gloves-dropdown');
  const beltDropdown = document.getElementById('belts-dropdown');
  const bootDropdown = document.getElementById('boots-dropdown');
  const ringOneDropdown = document.getElementById('ringsone-dropdown');
  const ringTwoDropdown = document.getElementById('ringstwo-dropdown');
  const amuletDropdown = document.getElementById('amulets-dropdown');
  function updateOffDropdown() {
   
    offDropdown.innerHTML = '';


    let options = [];
    switch (selectClass.value) {
      
      case 'Assassin':
        options = ['Pelta Lunata', 'Some other claw', 'Ass shield'];
        break;
      case 'Barbarian':
        options = ['Pelta Lunata', 'Massive Axe of Thunder', 'Merciless Savagery'];
        break;
      default:
        options = ['Pelta Lunata', 'Umbral Disk', 'Swordback Hold', 'Steelclash', 'Wall of the Eyeless', 'Bverrit Keep', 'The Ward', 'Visceratuant'];
        break;
    }

    options.forEach(option => {
      const opt = document.createElement('option');
      opt.value = option;
      opt.textContent = option;
      offDropdown.appendChild(opt);
      
    });
    
  }
  




  const skillHandler = {
    getSkillInfo: function(skillName, level) {
        if (skillName === 'javelinAndSpearMastery') {
            return {
                criticalChance: [5, 9, 12, 15, 17, 19, 20, 21, 23, 23, 24, 25, 26, 26, 27, 28, 28, 28, 29, 29, 29, 30, 30, 30, 30, 31, 31, 31, 31, 31, 32, 32, 32, 32, 32, 32, 32, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 35][level - 1]
            };
        }
        if (skillName === 'criticalStrike') {
            return {
                criticalChance: [15, 23, 30, 35, 40, 43, 46, 48, 51, 52, 54, 56, 57, 58, 59, 61, 61, 62, 63, 63, 64, 65, 65, 66, 66, 67, 68, 68, 68, 68, 69, 69, 70, 70, 70, 70, 70, 71, 71, 71, 71, 72, 72, 72, 72, 72, 72, 72, 73, 73, 73, 73, 73, 74, 74, 74, 74, 74, 74, 75][level - 1]
            };
        }
        return null;
    }
};

// Debug function
function updateCriticalAndDeadly() {
    try {
        // Get mastery level and critical strike level
        const masteryLevel = parseInt(document.getElementById('javelinandspearmasterycontainer')?.value || 0);
        const criticalStrikeLevel = parseInt(document.getElementById('criticalstrikecontainer')?.value || 0);
        
        // Get critical hit values from both sources
        let criticalHitValue = 0;
        if (masteryLevel > 0) {
            const masteryInfo = skillHandler.getSkillInfo('javelinAndSpearMastery', masteryLevel);
            criticalHitValue = masteryInfo?.criticalChance || 0;
        }

        // Add critical strike bonus if skilled
        if (criticalStrikeLevel > 0) {
    const criticalStrikeInfo = skillHandler.getSkillInfo('criticalStrike', criticalStrikeLevel);
   
    
    criticalHitValue += criticalStrikeInfo?.criticalChance || 0;
    
}

console.log('Raw deadly strike value:', document.getElementById('deadlystrikecontainer')?.textContent);
        const deadlyStrike = parseFloat(document.getElementById('deadlystrikecontainer')?.textContent || 0);
        console.log('Parsed deadly strike:', deadlyStrike);
        
        const weaponMastery = parseFloat(document.getElementById('weaponmasterycontainer')?.textContent || 0);
        console.log('Weapon mastery:', weaponMastery);
        console.log('Critical hit value:', criticalHitValue);


        const critMultiplier = 0.5 * (1 - (1 - deadlyStrike) * 
                                    (1 - criticalHitValue/100) * 
                                    (1 - weaponMastery/100)) + 1;

       
        document.getElementById('criticalhitcontainer').textContent = criticalHitValue.toFixed(2);
        document.getElementById('crithitmultipliercontainer').textContent = critMultiplier.toFixed(3);
    } catch (error) {
        console.error('Error:', error);
    }
}

window.addEventListener('DOMContentLoaded', () => {
    

    document.getElementById('lvlValue')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('str')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('dex')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('vit')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('enr')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('deadlystrikecontainer')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('weaponmasterycontainer')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('amulets-dropdown')?.addEventListener('change', updateCriticalAndDeadly);
    document.getElementById('javelinandspearmasterycontainer')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('criticalstrikecontainer')?.addEventListener('input', updateCriticalAndDeadly);
    document.getElementById('criticalhitcontainer')?.addEventListener('input', updateCriticalAndDeadly);
    
    updateCriticalAndDeadly();
   
});

  function updateValues() {
    let startLvlValue = Math.min(Math.max(parseInt(lvlInput.value, 10) || 1, 1), 99);
    lvlInput.value = startLvlValue;

    let vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 15, 15), 530);
    let strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 15, 15), 530);
    let dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 15, 15), 530);
    let enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 15, 15), 530);
    let totalLife;
  
   

if (select_Class.value === "Amazon") {
  document.getElementById('vit').min = 20;

  document.getElementById('str').min = 20;
  
  document.getElementById('dex').min = 25;
  
  document.getElementById('enr').min = 15;
  

  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 20);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 20);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 25);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 15);
  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 20, 20), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 20, 20), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 25, 25), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 15, 15), 530);
  
  let sumStats = 95 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5
  

  if (sumStats <= 0) {
  document.getElementById('vit').value = 20;
  document.getElementById('str').value = 20;
  document.getElementById('dex').value = 25;
  document.getElementById('enr').value = 15;
  disableInputs();
  updateValues();

    } 
  
} else if (select_Class.value === "Assassin") {
  document.getElementById('vit').min = 20;
  
  document.getElementById('str').min = 20;
  
  document.getElementById('dex').min = 20;
  
  document.getElementById('enr').min = 25;

  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 20);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 20);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 20);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 25);

  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 20, 20), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 20, 20), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 20, 20), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 25, 25), 530);
  
  let sumStats = 100 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5

  
  if (sumStats <= 0) {
  document.getElementById('vit').value = 20;
  document.getElementById('str').value = 20;
  document.getElementById('dex').value = 20;
  document.getElementById('enr').value = 25;
  disableInputs();
  updateValues();

    } 


} else if (select_Class.value === "Barbarian") {
  document.getElementById('vit').min = 25;
  
  document.getElementById('str').min = 30;
  
  document.getElementById('dex').min = 20;
  
  document.getElementById('enr').min = 10;


  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 25);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 30);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 20);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 10);
  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 25, 25), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 30, 30), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 20, 20), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 10, 10), 530);

  let sumStats = 100 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5

  
  if (sumStats <= 0) {
  document.getElementById('vit').value = 25;
  document.getElementById('str').value = 30;
  document.getElementById('dex').value = 20;
  document.getElementById('enr').value = 10;
  disableInputs();
  updateValues();
    } 

} else if (select_Class.value === "Druid") {
  document.getElementById('vit').min = 25;
  
  document.getElementById('str').min = 15;
  
  document.getElementById('dex').min = 20;
  
  document.getElementById('enr').min = 20;


  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 25);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 15);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 20);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 20);
  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 25, 25), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 15, 15), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 20, 20), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 20, 20), 530);

  let sumStats = 95 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5

  
  if (sumStats <= 0) {
  document.getElementById('vit').value = 25;
  document.getElementById('str').value = 15;
  document.getElementById('dex').value = 20;
  document.getElementById('enr').value = 20;
  disableInputs();
  updateValues();

    } 

} else if (select_Class.value === "Necromancer") {
  document.getElementById('vit').min = 15;
  
  document.getElementById('str').min = 15;
  
  document.getElementById('dex').min = 25;
  
  document.getElementById('enr').min = 25;


  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 15);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 15);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 25);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 25);
  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 15, 15), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 15, 15), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 25, 25), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 25, 25), 530);

  let sumStats = 95 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5

  
  if (sumStats <= 0) {
  document.getElementById('vit').value = 15;
  document.getElementById('str').value = 15;
  document.getElementById('dex').value = 25;
  document.getElementById('enr').value = 25;
  disableInputs();
  updateValues();
    } 

} else if (select_Class.value === "Paladin") {
  document.getElementById('vit').min = 25;
  
  document.getElementById('str').min = 25;
  
  document.getElementById('dex').min = 20;
  
  document.getElementById('enr').min = 15;


  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 25);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 25);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 20);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 15);
  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 25, 25), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 25, 25), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 20, 20), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 15, 15), 530);

  let sumStats = 100 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5

  
  if (sumStats <= 0) {
  document.getElementById('vit').value = 25;
  document.getElementById('str').value = 25;
  document.getElementById('dex').value = 20;
  document.getElementById('enr').value = 15;
  disableInputs();
  updateValues();
    } 

} else {
  document.getElementById('vit').min = 10;
  
  
  document.getElementById('str').min = 10;
  
  document.getElementById('dex').min = 25;
  
  document.getElementById('enr').min = 35;


  document.getElementById('vit').value = Math.max(parseInt(document.getElementById('vit').value, 10), 10);
  document.getElementById('str').value = Math.max(parseInt(document.getElementById('str').value, 10), 10);
  document.getElementById('dex').value = Math.max(parseInt(document.getElementById('dex').value, 10), 25);
  document.getElementById('enr').value = Math.max(parseInt(document.getElementById('enr').value, 10), 35);
  
  vitValue = Math.min(Math.max(parseInt(document.getElementById('vit').value, 10) || 10, 10), 530);
  strValue = Math.min(Math.max(parseInt(document.getElementById('str').value, 10) || 10, 10), 530);
  dexValue = Math.min(Math.max(parseInt(document.getElementById('dex').value, 10) || 25, 25), 530);
  enrValue = Math.min(Math.max(parseInt(document.getElementById('enr').value, 10) || 35, 35), 530);

  let sumStats = 95 - (vitValue + strValue + dexValue + enrValue) + ( 5 * startLvlValue) - 5

  
if (sumStats <= 0) {
document.getElementById('vit').value = 10;
document.getElementById('str').value = 10;
document.getElementById('dex').value = 25;
document.getElementById('enr').value = 35;
disableInputs();

  } 
  
  function updateDamageCalculations() {
    const selectedSkillContainer = document.getElementById('left-skill')?.value;
    const selectedSkillName = skillNameMap[selectedSkillContainer];
    const currentSkillLevel = parseInt(document.getElementById(selectedSkillContainer)?.value || 0);
    const skillInfo = skillHandler.getSkillInfo(selectedSkillName, currentSkillLevel);
   
    const skillDamage = skillHandler.getSkillDamage(selectedSkillName, currentSkillLevel);
    
  const skillValues = this.getTotalSkillValues(selectedSkillName, currentSkillLevel);

  if (skillValues) {
    document.getElementById('jabValueOutput').textContent = currentSkillLevel;
    document.getElementById('attackRatingOutput').textContent = `${skillValues.attackRating || 0}%`;
    document.getElementById('damageOutput').textContent = `${skillValues.damage.min}-${skillValues.damage.max}`;
    document.getElementById('manaCostOutput').textContent = (skillValues.manaCost || 0).toFixed(1);
  }

  
    let totalMinDmg = baseDamage.min + skillDamage.min;
    let totalMaxDmg = baseDamage.max + skillDamage.max;
    
  
    totalMinDmg = Math.floor(totalMinDmg * (1 + totalStr * 1.1/100));
    totalMaxDmg = Math.floor(totalMaxDmg * (1 + totalStr * 1.1/100));
    

    if (skillInfo) {
        if (skillInfo.damage.type === 'poison') {
            
            document.getElementById('damageOutput').textContent = 
                `${skillInfo.damage.min}-${skillInfo.damage.max} poison damage over 2 seconds`;
        } else if (skillInfo.lightningDamage) {
            
            document.getElementById('damageOutput').textContent = 
                `1-${skillInfo.lightningDamage} lightning`;
        } else {
            
            let totalMinDmg = baseMinDmg * (1 + (skillInfo.damage?.min || 0)/100 + totalStr * 1.1/100) * critMultiplier;
            let totalMaxDmg = baseMaxDmg * (1 + (skillInfo.damage?.max || 0) / 100 + totalStr * 1.1 /100) * critMultiplier;
            document.getElementById('damageOutput').textContent = 
                `${Math.floor(totalMinDmg)}-${Math.floor(totalMaxDmg)}`;
        }
    }


}

document.getElementById('left-skill').addEventListener('change', updateDamageCalculations);
document.querySelectorAll('[id$="skillscontainer"] input[type="number"]').forEach(input => {
    input.addEventListener('input', updateDamageCalculations);
});

function setupSkillListeners() {
    document.querySelectorAll('[id$="container"]').forEach(input => {
        input.addEventListener('input', updateDamageCalculations);
    });
}


document.addEventListener('DOMContentLoaded', setupSkillListeners);

} 


  function calculateSumStats() {
    const vitValue = parseInt(document.getElementById('vit').value, 10) || 0;
    const strValue = parseInt(document.getElementById('str').value, 10) || 0;
    const dexValue = parseInt(document.getElementById('dex').value, 10) || 0;
    const enrValue = parseInt(document.getElementById('enr').value, 10) || 0;

    let sumStats = 95 - (vitValue + strValue + dexValue + enrValue) + (5 * startLvlValue) - 5;
  
    if (sumStats < 0) {
    
        disableInputs();
        
    } 
    if (sumStats >= 0)
        enableInputs();
    
}


function disableInputs() {
    document.getElementById('vit').setAttribute('disabled');
    document.getElementById('str').setAttribute('disabled');
    document.getElementById('dex').setAttribute('disabled');
    document.getElementById('enr').setAttribute('disabled');
}

function enableInputs() {
    document.getElementById('vit').removeAttribute('disabled');
    document.getElementById('str').removeAttribute('disabled');
    document.getElementById('dex').removeAttribute('disabled');
    document.getElementById('enr').removeAttribute('disabled');
}


document.getElementById('vit').addEventListener('input', () => {
});
document.getElementById('str').addEventListener('input', () => {  
});
document.getElementById('dex').addEventListener('input', () => {
});
document.getElementById('enr').addEventListener('input', () => {
});



    if (select_Class.value == "Amazon" || select_Class.value === "Assassin" || select_Class.value === "Paladin") {
    totalLife = 50 + (startLvlValue * 2 - 2 + 3 * vitValue);
  } else if (select_Class.value === "Barbarian") {
      totalLife = 50 + (startLvlValue * 2 - 2 + 4 * vitValue);
    } else if (select_Class.value == "Druid" || select_Class.value === "Necromancer") {
      totalLife = 50 + (startLvlValue * 1.5 - 1.5 + 2 * vitValue); 
    } else {
      totalLife = 50 + (startLvlValue * 1 - 1 + 2 * vitValue);
    }

  
    function calculateCbDmg(startLvlValue) {
    if (startLvlValue >= 1 && startLvlValue < 10) {
        return 33.33 * startLvlValue + 66.67;
    } else if (startLvlValue >= 10 && startLvlValue < 30) {
        return 30 * startLvlValue + 100;
    } else if (startLvlValue >= 30 && startLvlValue < 60) {
        return 300 * startLvlValue - 8000;
    } else if (startLvlValue >= 60 && startLvlValue < 80) {
        return 750 * startLvlValue - 35000;
    } else if (startLvlValue >= 80 && startLvlValue <= 99) {
        return 3947.37 * startLvlValue - 257000;
    } else {
        throw new Error("Input out of range. Valid range is 1 to 99.");
    }
}


let totalCbDmg = calculateCbDmg(startLvlValue)*0.1;

 

    let totalStr = strValue;
    let totalDex = dexValue;
    let totalVit = vitValue;
    let totalEnr = enrValue;
    let totalDefense = totalDex / 4;
    let totalBlock = 0;
    let totalIas = 0;
    let totalFcr = 0;
    let totalFrw = 0;
    let totalFhr = 0;
    let totalCbf = 0;
    let totalPlr = 0;
    let totalDr = 0;
    let totalPdr = 0;
    let totalMdr = 0;
    let totalFireRes = 30;
    let totalColdRes = 30;
    let totalLightRes = 30;
    let totalPoisonRes = 30;
    let totalCurseRes = 0;
    let totalMinDmg = 0;
    let totalMaxDmg = 0;
    let totalTwoMinDmg = 0;
    let totalTwoMaxDmg = 0;
    let totalAllSkill = 0;
    let totalMagicFind = 0;
    let totalGoldFind = 0;
    let totalOw = 0;
    let totalOwDmg = (7*startLvlValue/5) * 2 * startLvlValue /64
    let totalCb = 0;
    let totalMaxFireRes = 0;
    let totalMaxColdRes = 0;
    let totalMaxLightRes = 0;
    let totalMaxPoisonRes = 0;
    
    
   
    let totalPiercePhys = 0;
    let totalPierceFire = 0;
    let totalPierceCold = 0;
    let totalPierceLight = 0;
    let totalPiercePoison = 0;
    let totalPierceMagic = 0;
    let totalFlatFireDmg = 0;
    let totalFlatColdDmg = 0;
    let totalFlatLightDmg = 0;
    let totalFlatPoisonDmg = 0;
    let totalFlatMagicDmg = 0;
    let totalCriticalHit = 0;
    let totalDeadlyStrike = 0;
    let totalWeaponMastery = 0;
    let totalCritMultiplier = 1;

let totalEDMG = 0; // total Enhanced Damage defined

    const helmData = itemList[helmDropdown.value];
    const armorData = itemList[armorDropdown.value];
    const weaponData = itemList[weaponDropdown.value];
    const gloveData = itemList[gloveDropdown.value];
    const offData = itemList[offDropdown.value];
    const beltData = itemList[beltDropdown.value];
    const bootData = itemList[bootDropdown.value];
    const ringOneData = itemList[ringOneDropdown.value];
    const ringTwoData = itemList[ringTwoDropdown.value];
    const amuletData = itemList[amuletDropdown.value];


    if (helmData) {
      totalLife += helmData.properties.tolife || 0;
      totalDefense += helmData.properties.defense || 0;
      totalBlock += helmData.properties.block || 0;
      totalIas += helmData.properties.ias || 0;
      totalFcr += helmData.properties.fcr || 0;
      totalFrw += helmData.properties.frw || 0;
      totalFhr += helmData.properties.fhr || 0;
      totalCbf += (helmData.properties.cbf) || 0 + (helmData.properties.freezedur) || 0;
      totalPlr += helmData.properties.plr || 0;
      totalDr += helmData.properties.physdr || 0;
      totalPdr += helmData.properties.pdr || 0;
      totalMdr += helmData.properties.mdr || 0;
      totalFireRes += (helmData.properties.firres) || 0 + (helmData.properties.allres) || 0;
      totalColdRes += (helmData.properties.coldres) || 0 + (helmData.properties.allres) || 0;
      totalLightRes += (helmData.properties.ligres) || 0 + (helmData.properties.allres) || 0;
      totalPoisonRes += (helmData.properties.poisres) || 0 + (helmData.properties.allres) || 0;
      totalCurseRes += helmData.properties.curres || 0;
      totalStr += helmData.properties.str || 0;
      totalDex += helmData.properties.dex || 0;
      totalVit += helmData.properties.vit || 0;
      totalEnr += helmData.properties.enr || 0;
      totalAllSkill += helmData.properties.allsk || 0;
      totalMagicFind += helmData.properties.magicfind || 0;
      totalGoldFind += helmData.properties.goldfind || 0;
      totalOw += helmData.properties.ow || 0;
      totalOwDmg += helmData.properties.owdmg || 0;
      totalFlatFireDmg += (helmData.properties.firedmgmin/2 + helmData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (helmData.properties.colddmgmin/2 + helmData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (helmData.properties.lightdmgmin/2 + helmData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (helmData.properties.poisondmg / helmData.properties.poisontime) || 0;
      totalFlatMagicDmg += (helmData.properties.magicdmgmin/2 + helmData.properties.magicdmgmax/2) || 0;
      totalEDMG += helmData.properties.edmg || 0;
      totalMaxFireRes += helmData.properties.maxfirres || 0;
    }
    if (armorData) {
      totalLife += armorData.properties.tolife || 0;
      totalDefense += armorData.properties.defense || 0;
      totalBlock += armorData.properties.block || 0;
      totalIas += armorData.properties.ias || 0;
      totalFcr += armorData.properties.fcr || 0;
      totalFrw += armorData.properties.frw || 0;
      totalFhr += armorData.properties.fhr || 0;
      totalCbf += (armorData.properties.cbf) || 0 + (armorData.properties.freezedur) || 0;
      totalPlr += armorData.properties.plr || 0;
      totalDr += armorData.properties.physdr || 0;
      totalPdr += armorData.properties.pdr || 0;
      totalMdr += armorData.properties.mdr || 0;
      totalFireRes += (armorData.properties.firres) || 0 + (armorData.properties.allres) || 0;
      totalColdRes += (armorData.properties.coldres) || 0 + (armorData.properties.allres) || 0;
      totalLightRes += (armorData.properties.ligres) || 0 + (armorData.properties.allres) || 0;
      totalPoisonRes += (armorData.properties.poisres) || 0 + (armorData.properties.allres) || 0;
      totalCurseRes += armorData.properties.curres || 0;
      totalStr += armorData.properties.str || 0;
      totalDex += armorData.properties.dex || 0;
      totalVit += armorData.properties.vit || 0;
      totalEnr += armorData.properties.enr || 0;
      totalAllSkill += armorData.properties.allsk || 0;
      totalMagicFind += armorData.properties.magicfind || 0;
      totalGoldFind += armorData.properties.goldfind || 0;
      totalOw += armorData.properties.ow || 0;
      totalOwDmg += armorData.properties.owdmg || 0;
      totalFlatFireDmg += (armorData.properties.firedmgmin/2 + armorData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (armorData.properties.colddmgmin/2 + armorData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (armorData.properties.lightdmgmin/2 + armorData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (armorData.properties.poisondmg / armorData.properties.poisontime) || 0;
      totalFlatMagicDmg += (armorData.properties.magicdmgmin/2 + armorData.properties.magicdmgmax/2) || 0;
      totalCriticalHit += armorData.properties.criticalsk || 0;
      totalDeadlyStrike += armorData.properties.deadlyperlvl*startLvlValue + armorData.properties.deadly || 0; 
      totalWeaponMastery += armorData.properties.weaponmasterysk || 0;
      totalEDMG += armorData.properties.edmg || 0; 
      totalMaxFireRes += armorData.properties.maxfirres || 0;
    }
    if (weaponData) {
      totalLife += weaponData.properties.tolife || 0;
      totalDefense += weaponData.properties.todef || 0;
      totalBlock += weaponData.properties.block || 0;
      totalIas += weaponData.properties.ias || 0;
      totalFcr += weaponData.properties.fcr || 0;
      totalFrw += weaponData.properties.frw || 0;
      totalFhr += weaponData.properties.fhr || 0;
      totalCbf += (weaponData.properties.cbf) || 0 + (weaponData.properties.freezedur) || 0;
      totalPlr += weaponData.properties.plr || 0;
      totalDr += weaponData.properties.physdr || 0;
      totalPdr += weaponData.properties.pdr || 0;
      totalMdr += weaponData.properties.mdr || 0;
      totalFireRes += (weaponData.properties.firres) || 0 + (weaponData.properties.allres) || 0;
      totalColdRes += (weaponData.properties.coldres) || 0 + (weaponData.properties.allres) || 0;
      totalLightRes += (weaponData.properties.ligres) || 0 + (weaponData.properties.allres) || 0;
      totalPoisonRes += (weaponData.properties.poisres) || 0 + (weaponData.properties.allres) || 0;
      totalCurseRes += weaponData.properties.curres || 0;
      totalMinDmg = weaponData.properties.onehandmin || 0;
  	  totalMaxDmg = weaponData.properties.onehandmax || 0;
      totalTwoMinDmg += weaponData.properties.twohandmin || 0;
      totalTwoMaxDmg += weaponData.properties.twohandmax || 0;
      totalStr += weaponData.properties.str || 0;
      totalDex += weaponData.properties.dex || 0;
      totalVit += weaponData.properties.vit || 0;
      totalEnr += weaponData.properties.enr || 0;
      totalAllSkill += weaponData.properties.allsk || 0;
      totalMagicFind += weaponData.properties.magicfind || 0;
      totalGoldFind += weaponData.properties.goldfind || 0;
      totalOw += weaponData.properties.ow || 0;
      totalOwDmg += weaponData.properties.owdmg || 0;
      totalCb += weaponData.properties.cb || 0;
      totalFlatFireDmg += (weaponData.properties.firedmgmin/2 + weaponData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (weaponData.properties.colddmgmin/2 + weaponData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (weaponData.properties.lightdmgmin/2 + weaponData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (weaponData.properties.poisondmg / weaponData.properties.poisontime) || 0;
      totalFlatMagicDmg += (weaponData.properties.magicdmgmin/2 + weaponData.properties.magicdmgmax/2) || 0;
      totalCriticalHit += weaponData.properties.criticalsk || 0;
      totalDeadlyStrike += (weaponData.properties.deadlyperlvl*startLvlValue) || 0 + (weaponData.properties.deadly/100) || 0; 
      totalWeaponMastery += weaponData.properties.weaponmasterysk || 0;
      totalMaxFireRes += weaponData.properties.maxfirres || 0;
      
    }
    if (offData?.properties?.defense > 0) {
      totalDefense += offData.properties.defense;
      totalLife += offData.properties.tolife || 0;
      totalBlock += offData.properties.block1 || 0;
      totalFcr += offData.properties.fcr || 0;
      totalFrw += offData.properties.frw || 0;
      totalFhr += offData.properties.fhr || 0;
      totalCbf += (offData.properties.cbf) || 0 + (offData.properties.freezedur) || 0;
      totalPlr += offData.properties.plr || 0;
      totalDr += offData.properties.physdr || 0;
      totalPdr += offData.properties.pdr || 0;
      totalMdr += offData.properties.mdr || 0;
      totalCurseRes += offData.properties.curres || 0;
      totalStr += offData.properties.str || 0;
      totalDex += offData.properties.dex || 0;
      totalVit += offData.properties.vit || 0;
      totalEnr += offData.properties.enr || 0;
      totalAllSkill += offData.properties.allsk || 0;
      totalMagicFind += offData.properties.magicfind || 0;
      totalGoldFind += offData.properties.goldfind || 0;
      totalOw += offData.properties.ow || 0;
      totalOwDmg += offData.properties.owdmg || 0;
      totalFlatFireDmg += (offData.properties.firedmgmin/2 + offData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (offData.properties.colddmgmin/2 + offData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (offData.properties.lightdmgmin/2 + offData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (offData.properties.poisondmg / offData.properties.poisontime) || 0;
      totalFlatMagicDmg += (offData.properties.magicdmgmin/2 + offData.properties.magicdmgmax/2) || 0;
      totalEDMG += offData.properties.edmg || 0;
      totalMaxFireRes += offData.properties.maxfirres || 0;
    } else {
      totalDefense += offData.properties.todef;
      totalLife += offData.properties.tolife || 0;
     
      totalBlock += offData.properties.block1 || 0;
      totalIas += offData.properties.ias || 0;
      totalFcr += offData.properties.fcr || 0;
      totalFrw += offData.properties.frw || 0;
      totalFhr += offData.properties.fhr || 0;
      totalCbf += (offData.properties.cbf) || 0 + (offData.properties.freezedur) || 0;
      totalPlr += offData.properties.plr || 0;
      totalDr += offData.properties.physdr || 0;
      totalPdr += offData.properties.pdr || 0;
      totalMdr += offData.properties.mdr || 0;
      totalCurseRes += offData.properties.curres || 0;
      totalStr += offData.properties.str || 0;
      totalDex += offData.properties.dex || 0;
      totalVit += offData.properties.vit || 0;
      totalEnr += offData.properties.enr || 0;
      totalAllSkill += offData.properties.allsk || 0;
      totalMagicFind += offData.properties.magicfind || 0;
      totalGoldFind += offData.properties.goldfind || 0;
      //totalOw += offData.properties.ow || 0; Exception, totalOW cannot be counted if dual-wielded - but you can ignore//
      totalOwDmg += offData.properties.owdmg || 0;
      totalFlatFireDmg += (offData.properties.firedmgmin/2 + offData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (offData.properties.colddmgmin/2 + offData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (offData.properties.lightdmgmin/2 + offData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (offData.properties.poisondmg / offData.properties.poisontime) || 0;
      totalFlatMagicDmg += (offData.properties.magicdmgmin/2 + offData.properties.magicdmgmax/2) || 0;
      totalMaxFireRes += offData.properties.maxfirres || 0;
    }
    if (gloveData) {
      totalLife += gloveData.properties.tolife || 0;
      totalDefense += gloveData.properties.defense || 0;
      totalBlock += gloveData.properties.block || 0;
      totalIas += gloveData.properties.ias || 0;
      totalFcr += gloveData.properties.fcr || 0;
      totalFrw += gloveData.properties.frw || 0;
      totalFhr += gloveData.properties.fhr || 0;
      totalCbf += (gloveData.properties.cbf) || 0 + (gloveData.properties.freezedur) || 0;
      totalPlr += gloveData.properties.plr || 0;
      totalDr += gloveData.properties.physdr || 0;
      totalPdr += gloveData.properties.pdr || 0;
      totalMdr += gloveData.properties.mdr || 0;
      totalFireRes += (gloveData.properties.firres) || 0 + (gloveData.properties.allres) || 0;
      totalColdRes += (gloveData.properties.coldres) || 0 + (gloveData.properties.allres) || 0;
      totalLightRes += (gloveData.properties.ligres) || 0 + (gloveData.properties.allres) || 0;
      totalPoisonRes += (gloveData.properties.poisres) || 0 + (gloveData.properties.allres) || 0;
      totalCurseRes += gloveData.properties.curres || 0;
      totalStr += gloveData.properties.str || 0;
      totalDex += gloveData.properties.dex || 0;
      totalVit += gloveData.properties.vit || 0;
      totalEnr += gloveData.properties.enr || 0;
      totalAllSkill += gloveData.properties.allsk || 0;
      totalMagicFind += gloveData.properties.magicfind || 0;
      totalGoldFind += gloveData.properties.goldfind || 0;
      totalOw += gloveData.properties.ow || 0;
      totalOwDmg += gloveData.properties.owdmg || 0;
      totalFlatFireDmg += (gloveData.properties.firedmgmin/2 + gloveData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (gloveData.properties.colddmgmin/2 + gloveData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (gloveData.properties.lightdmgmin/2 + gloveData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (gloveData.properties.poisondmg / gloveData.properties.poisontime) || 0;
      totalFlatMagicDmg += (gloveData.properties.magicdmgmin/2 + gloveData.properties.magicdmgmax/2) || 0;
      totalEDMG += gloveData.properties.edmg || 0;
      totalMaxFireRes += gloveData.properties.maxfirres || 0;
    }

    if (beltData) {
      totalLife += beltData.properties.tolife || 0;
      totalDefense += beltData.properties.defense || 0;
      totalBlock += beltData.properties.block || 0;
      totalIas += beltData.properties.ias || 0;
      totalFcr += beltData.properties.fcr || 0;
      totalFrw += beltData.properties.frw || 0;
      totalFhr += beltData.properties.fhr || 0;
      totalCbf += beltData.properties.cbf || 0;
      totalPlr += beltData.properties.plr || 0;
      totalDr += beltData.properties.physdr || 0;
      totalPdr += beltData.properties.pdr || 0;
      totalMdr += beltData.properties.mdr || 0;
      totalFireRes += (beltData.properties.firres) || 0 + (beltData.properties.allres) || 0;
      totalColdRes += (beltData.properties.coldres) || 0 + (beltData.properties.allres) || 0;
      totalLightRes += (beltData.properties.ligres) || 0 + (beltData.properties.allres) || 0;
      totalPoisonRes += (beltData.properties.poisres) || 0 + (beltData.properties.allres) || 0;
      totalCurseRes += beltData.properties.curres || 0;
      totalStr += beltData.properties.str || 0;
      totalDex += beltData.properties.dex || 0;
      totalVit += beltData.properties.vit || 0;
      totalEnr += beltData.properties.enr || 0;
      totalAllSkill += beltData.properties.allsk || 0;
      totalMagicFind += beltData.properties.magicfind || 0;
      totalGoldFind += beltData.properties.goldfind || 0;
      totalOw += beltData.properties.ow || 0;
      totalOwDmg += beltData.properties.owdmg || 0;
      totalFlatFireDmg += (beltData.properties.firedmgmin/2 + beltData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (beltData.properties.colddmgmin/2 + beltData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (beltData.properties.lightdmgmin/2 + beltData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (beltData.properties.poisondmg / beltData.properties.poisontime) || 0;
      totalFlatMagicDmg += (beltData.properties.magicdmgmin/2 + beltData.properties.magicdmgmax/2) || 0;
      totalEDMG += beltData.properties.edmg || 0;
      totalMaxFireRes += beltData.properties.maxfirres || 0;
    }

    if (bootData) {
      totalLife += bootData.properties.tolife || 0;
      totalDefense += bootData.properties.defense || 0;
      totalBlock += bootData.properties.block || 0;
      totalIas += bootData.properties.ias || 0;
      totalFcr += bootData.properties.fcr || 0;
      totalFrw += bootData.properties.frw || 0;
      totalFhr += bootData.properties.fhr || 0;
      totalCbf += bootData.properties.cbf || 0;
      totalPlr += bootData.properties.plr || 0;
      totalDr += bootData.properties.physdr || 0;
      totalPdr += bootData.properties.pdr || 0;
      totalMdr += bootData.properties.mdr || 0;
      totalFireRes += (bootData.properties.firres) || 0 + (bootData.properties.allres) || 0;
      totalColdRes += (bootData.properties.coldres) || 0 + (bootData.properties.allres) || 0;
      totalLightRes += (bootData.properties.ligres) || 0 + (bootData.properties.allres) || 0;
      totalPoisonRes += (bootData.properties.poisres) || 0 + (bootData.properties.allres) || 0;
      totalCurseRes += bootData.properties.curres || 0;
      totalStr += bootData.properties.str || 0;
      totalDex += bootData.properties.dex || 0;
      totalVit += bootData.properties.vit || 0;
      totalEnr += bootData.properties.enr || 0;
      totalAllSkill += bootData.properties.allsk || 0;
      totalMagicFind += bootData.properties.magicfind || 0;
      totalGoldFind += bootData.properties.goldfind || 0;
      totalOw += bootData.properties.ow || 0;
      totalOwDmg += bootData.properties.owdmg || 0;
      totalFlatFireDmg += (bootData.properties.firedmgmin/2 + bootData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (bootData.properties.colddmgmin/2 + bootData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (bootData.properties.lightdmgmin/2 + bootData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (bootData.properties.poisondmg / bootData.properties.poisontime) || 0;
      totalFlatMagicDmg += (bootData.properties.magicdmgmin/2 + bootData.properties.magicdmgmax/2) || 0;
      totalEDMG += bootData.properties.edmg || 0;
      totalMaxFireRes += bootData.properties.maxfirres || 0;
    }

    if (ringOneData) {
      totalLife += ringOneData.properties.tolife || 0;
      
      totalBlock += ringOneData.properties.block || 0;
      totalIas += ringOneData.properties.ias || 0;
      totalFcr += ringOneData.properties.fcr || 0;
      totalFrw += ringOneData.properties.frw || 0;
      totalFhr += ringOneData.properties.fhr || 0;
      totalCbf += ringOneData.properties.cbf || 0;
      totalPlr += ringOneData.properties.plr || 0;
      totalDr += ringOneData.properties.physdr || 0;
      totalPdr += ringOneData.properties.pdr || 0;
      totalMdr += ringOneData.properties.mdr || 0;
      totalFireRes += (ringOneData.properties.firres) || 0 + (ringOneData.properties.allres) || 0;
      totalColdRes += (ringOneData.properties.coldres) || 0 + (ringOneData.properties.allres) || 0;
      totalLightRes += (ringOneData.properties.ligres) || 0 + (ringOneData.properties.allres) || 0;
      totalPoisonRes += (ringOneData.properties.poisres) || 0 + (ringOneData.properties.allres) || 0;
      totalCurseRes += ringOneData.properties.curres || 0;
      totalStr += ringOneData.properties.str || 0;
      totalDex += ringOneData.properties.dex || 0;
      totalVit += ringOneData.properties.vit || 0;
      totalEnr += ringOneData.properties.enr || 0;
      totalAllSkill += ringOneData.properties.allsk || 0;
      totalMagicFind += ringOneData.properties.magicfind || 0;
      totalGoldFind += ringOneData.properties.goldfind || 0;
      totalOw += ringOneData.properties.ow || 0;
      totalOwDmg += ringOneData.properties.owdmg || 0;
      totalFlatFireDmg += (ringOneData.properties.firedmgmin/2 + ringOneData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (ringOneData.properties.colddmgmin/2 + ringOneData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (ringOneData.properties.lightdmgmin/2 + ringOneData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (ringOneData.properties.poisondmg / ringOneData.properties.poisontime) || 0;
      totalFlatMagicDmg += (ringOneData.properties.magicdmgmin/2 + ringOneData.properties.magicdmgmax/2) || 0;
      totalEDMG += ringOneData.properties.edmg || 0;
      totalMaxFireRes += ringOneData.properties.maxfirres || 0;
    }

    if (ringTwoData) {
      totalLife += ringTwoData.properties.tolife || 0;
      
      totalBlock += ringTwoData.properties.block || 0;
      totalIas += ringTwoData.properties.ias || 0;
      totalFcr += ringTwoData.properties.fcr || 0;
      totalFrw += ringTwoData.properties.frw || 0;
      totalFhr += ringTwoData.properties.fhr || 0;
      totalCbf += ringTwoData.properties.cbf || 0;
      totalPlr += ringTwoData.properties.plr || 0;
      totalDr += ringTwoData.properties.physdr || 0;
      totalPdr += ringTwoData.properties.pdr || 0;
      totalMdr += ringTwoData.properties.mdr || 0;
      totalFireRes += (ringTwoData.properties.firres) || 0 + (ringTwoData.properties.allres) || 0;
      totalColdRes += (ringTwoData.properties.coldres) || 0 + (ringTwoData.properties.allres) || 0;
      totalLightRes += (ringTwoData.properties.ligres) || 0 + (ringTwoData.properties.allres) || 0;
      totalPoisonRes += (ringTwoData.properties.poisres) || 0 + (ringTwoData.properties.allres) || 0;
      totalCurseRes += ringTwoData.properties.curres || 0;
      totalStr += ringTwoData.properties.str || 0;
      totalDex += ringTwoData.properties.dex || 0;
      totalVit += ringTwoData.properties.vit || 0;
      totalEnr += ringTwoData.properties.enr || 0;
      totalAllSkill += ringTwoData.properties.allsk || 0;
      totalMagicFind += ringTwoData.properties.magicfind|| 0;
      totalGoldFind += ringTwoData.properties.goldfind || 0;
      totalOw += ringTwoData.properties.ow || 0;
      totalOwDmg += ringTwoData.properties.owdmg || 0;
      totalFlatFireDmg += (ringTwoData.properties.firedmgmin/2 + ringTwoData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (ringTwoData.properties.colddmgmin/2 + ringTwoData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (ringTwoData.properties.lightdmgmin/2 + ringTwoData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (ringTwoData.properties.poisondmg / ringTwoData.properties.poisontime) || 0;
      totalFlatMagicDmg += (ringTwoData.properties.magicdmgmin/2 + ringTwoData.properties.magicdmgmax/2) || 0;
      totalEDMG += ringTwoData.properties.edmg || 0;
      totalMaxFireRes += ringTwoData.properties.maxfirres || 0;
    }

    if (amuletData) {
      totalLife += amuletData.properties.tolife || 0;
      
      totalBlock += amuletData.properties.block || 0;
      totalIas += amuletData.properties.ias || 0;
      totalFcr += amuletData.properties.fcr || 0;
      totalFrw += amuletData.properties.frw || 0;
      totalFhr += amuletData.properties.fhr || 0;
      totalCbf += amuletData.properties.cbf || 0;
      totalPlr += amuletData.properties.plr || 0;
      totalDr += amuletData.properties.physdr || 0;
      totalPdr += amuletData.properties.pdr || 0;
      totalMdr += amuletData.properties.mdr || 0;
      totalFireRes += (amuletData.properties.firres) || 0 + (amuletData.properties.allres) || 0;
      totalColdRes += (amuletData.properties.coldres) || 0 + (amuletData.properties.allres) || 0;
      totalLightRes += (amuletData.properties.ligres) || 0 + (amuletData.properties.allres) || 0;
      totalPoisonRes += (amuletData.properties.poisres) || 0 + (amuletData.properties.allres) || 0;
      totalCurseRes += amuletData.properties.curres || 0;
      totalStr += (amuletData.properties.str) || 0 + (amuletData.properties.allstats) || 0;
      totalDex += (amuletData.properties.dex) || 0 + (amuletData.properties.allstats) || 0;
      totalVit += (amuletData.properties.vit) || 0 + (amuletData.properties.allstats) || 0;
      totalEnr += (amuletData.properties.enr) || 0 + (amuletData.properties.allstats) || 0;
      totalAllSkill += amuletData.properties.allsk || 0;
      totalMagicFind += amuletData.properties.magicfind || 0;
      totalGoldFind += amuletData.properties.goldfind || 0;
      totalOw += amuletData.properties.ow || 0;
      totalOwDmg += amuletData.properties.owdmg || 0;
      totalCb += amuletData.properties.cb || 0;
      totalFlatFireDmg += (amuletData.properties.firedmgmin/2 + amuletData.properties.firedmgmax/2) || 0;
      totalFlatColdDmg += (amuletData.properties.colddmgmin/2 + amuletData.properties.colddmgmax/2) || 0;
      totalFlatLightDmg += (amuletData.properties.lightdmgmin/2 + amuletData.properties.lightdmgmax/2) || 0;
      totalFlatPoisonDmg += (amuletData.properties.poisondmg / amuletData.properties.poisontime) || 0;
      totalFlatMagicDmg += (amuletData.properties.magicdmgmin/2 + amuletData.properties.magicdmgmax/2) || 0;
      totalCriticalHit += amuletData.properties.criticalsk || 0;
      totalDeadlyStrike += amuletData.properties.deadlyperlvl*startLvlValue/100 || 0; 
      totalWeaponMastery += amuletData.properties.weaponmasterysk || 0; 
      totalEDMG += amuletData.properties.edmg || 0;
      totalMaxFireRes += amuletData.properties.maxfirres || 0;
    }

    let block = helmData?.properties.block || 0;
    let block1 = offData?.properties.block1 || 0;
    let block2 = offData?.properties.block1 + 5|| 0;
    let block3 = offData?.properties.block1 + 10 || 0;
    if (select_Class.value == "Druid" || select_Class.value === "Necromancer" || select_Class.value === "Sorceress") {
    totalBlock = Math.min(Math.floor((block + block1) * (totalDex - 15) / (startLvlValue * 2)), 75);
  } else {
    totalBlock = Math.min(Math.floor((block + block2) * (totalDex - 15) / (startLvlValue * 2)), 75);
  }

  


  totalMinDmg = Math.floor(totalMinDmg);
  totalMaxDmg = Math.floor(totalMaxDmg);
  
    

  
  totalTwoMinDmg = Math.floor(totalTwoMinDmg * (1 + totalStr * 1.1/100));
  totalTwoMaxDmg = Math.floor(totalTwoMaxDmg * (1 + totalStr * 1.1/100));
  totalCritMultiplier = 0.5 * (1 - (1 - totalDeadlyStrike) * (1 - totalCriticalHit) * (1 - totalWeaponMastery)) + 1;
   
    let totalLifeAccr;
    if (select_Class.value === "Amazon") {
    totalLifeAccr = (totalVit * 3 - vitValue * 3) + totalLife;
  } else if (select_Class.value === "Barbarian") {
    totalLifeAccr = (totalVit * 4 - vitValue * 4) + totalLife;
    } else {
    totalLifeAccr = (totalVit * 2 - vitValue * 2) + totalLife; 
    }
    
    
    lifeDisplay.textContent = `Life: ${totalLifeAccr}`;

    document.getElementById('helm-info').innerHTML = helmData.description; 
    document.getElementById('armor-info').innerHTML = armorData.description; 
    document.getElementById('weapon-info').innerHTML = weaponData.description; 
    document.getElementById('off-info').innerHTML = offData.description; 
    document.getElementById('glove-info').innerHTML = gloveData.description;
    document.getElementById('belt-info').innerHTML = beltData.description;
    document.getElementById('boot-info').innerHTML = bootData.description;
    document.getElementById('ringsone-info').innerHTML = ringOneData.description;
    document.getElementById('ringstwo-info').innerHTML = ringTwoData.description;
    document.getElementById('amulet-info').innerHTML = amuletData.description;


   


    updateCriticalAndDeadly();
    calculateBlock(totalLifeAccr, totalDefense, totalStr, totalDex, totalVit, totalEnr, totalBlock, totalIas, totalFcr, totalFrw, totalFhr, totalCbf, totalPlr, totalDr, totalPdr, totalMdr, totalFireRes, totalColdRes, totalLightRes, totalPoisonRes, totalCurseRes, totalMinDmg, totalMaxDmg, totalTwoMinDmg, totalTwoMaxDmg, totalAllSkill, totalMagicFind, totalGoldFind, totalOw, totalOwDmg, totalCb, totalCbDmg,
      totalPiercePhys, totalPierceFire, totalPierceCold, totalPierceLight, totalPiercePoison, totalPierceMagic, totalFlatFireDmg, totalFlatColdDmg, totalFlatLightDmg, totalFlatMagicDmg, totalFlatPoisonDmg, totalCriticalHit, totalDeadlyStrike, totalWeaponMastery, totalCritMultiplier
    );
  }

 




  function calculateBlock(totalLifeAccr, totalDefense, totalStr, totalDex, totalVit, totalEnr, totalBlock, totalIas, totalFcr, totalFrw, totalFhr, totalCbf, totalPlr, totalDr, totalPdr, totalMdr, totalFireRes, totalColdRes, totalLightRes, totalPoisonRes, totalCurseRes, totalMinDmg, totalMaxDmg, totalTwoMinDmg, totalTwoMaxDmg, totalAllSkill, totalMagicFind, totalGoldFind, totalOw, totalOwDmg, totalCb, totalCbDmg, 
    totalPiercePhys, totalPierceFire, totalPierceCold, totalPierceLight, totalPiercePoison, totalPierceMagic, totalFlatFireDmg, totalFlatColdDmg, totalFlatLightDmg, totalFlatMagicDmg, totalFlatPoisonDmg, totalCriticalHit, totalDeadlyStrike, totalWeaponMastery, totalCritMultiplier) {
    let blockValue = parseInt(document.getElementById('blockValue').value, 10) || 0;
    let getHitValue = parseInt(document.getElementById('getHitValue').value, 10) || 0; 
    let fireResValue = parseInt(document.getElementById('fireResValue').value, 10) || 0; 
    let calculatedValue = 1 / (1 - (blockValue / 100));
    let getHitChance = 1 / (getHitValue / 200);
    let fireResMod = 1 / (1 - (fireResValue / 100));

    
    let polyrellife = (totalLifeAccr) * calculatedValue * getHitChance / 2 * fireResMod / 2;
   
    
    document.getElementById('polyrellife').innerHTML = polyrellife.toFixed(0);
    document.getElementById('defensecontainer').innerHTML = totalDefense.toFixed(0);
    document.getElementById('straccr').innerHTML = totalStr.toFixed(0);
    document.getElementById('dexaccr').innerHTML = totalDex.toFixed(0);
    document.getElementById('vitaccr').innerHTML = totalVit.toFixed(0);
    document.getElementById('enraccr').innerHTML = totalEnr.toFixed(0);
    document.getElementById('realblockcontainer').innerHTML = totalBlock.toFixed(0);
    document.getElementById('iascontainer').innerHTML = totalIas.toFixed(0);
    document.getElementById('fcrcontainer').innerHTML = totalFcr.toFixed(0);
    document.getElementById('frwcontainer').innerHTML = totalFrw.toFixed(0);
    document.getElementById('fhrcontainer').innerHTML = totalFhr.toFixed(0);
    document.getElementById('cbfcontainer').innerHTML = totalCbf.toFixed(1);
    document.getElementById('plrcontainer').innerHTML = totalPlr.toFixed(0);
    document.getElementById('drcontainer').innerHTML = totalDr.toFixed(0);
    document.getElementById('pdrcontainer').innerHTML = totalPdr.toFixed(0);
    document.getElementById('mdrcontainer').innerHTML = totalMdr.toFixed(0);
    document.getElementById('fireresistcontainer').innerHTML = totalFireRes.toFixed(0);
    document.getElementById('coldresistcontainer').innerHTML = totalColdRes.toFixed(0);
    document.getElementById('lightresistcontainer').innerHTML = totalLightRes.toFixed(0);
    document.getElementById('poisonresistcontainer').innerHTML = totalPoisonRes.toFixed(0);
    document.getElementById('curseresistcontainer').innerHTML = totalCurseRes.toFixed(0);  
    document.getElementById('onehandmindmgcontainer').innerHTML = totalMinDmg.toFixed(0); 
    document.getElementById('onehandmaxdmgcontainer').innerHTML = totalMaxDmg.toFixed(0);
    document.getElementById('twohandmindmgcontainer').innerHTML = totalTwoMinDmg.toFixed(0);
    document.getElementById('twohandmaxdmgcontainer').innerHTML = totalTwoMaxDmg.toFixed(0);
    document.getElementById('allskillscontainer').innerHTML = totalAllSkill.toFixed(0);
    document.getElementById('magicfindcontainer').innerHTML = totalMagicFind.toFixed(0);
    document.getElementById('goldfindcontainer').innerHTML = totalGoldFind.toFixed(0);
    document.getElementById('owcontainer').innerHTML = totalOw.toFixed(0);
    document.getElementById('owdmgcontainer').innerHTML = totalOwDmg.toFixed(0);
    document.getElementById('cbcontainer').innerHTML = totalCb.toFixed(0);
    document.getElementById('cbdmgcontainer').innerHTML = totalCbDmg.toFixed(0);
    document.getElementById('piercephyscontainer').innerHTML = totalPiercePhys.toFixed(0);
    document.getElementById('piercefirecontainer').innerHTML = totalPierceFire.toFixed(0);
    document.getElementById('piercecoldcontainer').innerHTML = totalPierceCold.toFixed(0);
    document.getElementById('piercelightcontainer').innerHTML = totalPierceLight.toFixed(0);
    document.getElementById('piercepoisoncontainer').innerHTML = totalPiercePoison.toFixed(0);
    document.getElementById('piercemagiccontainer').innerHTML = totalPierceMagic.toFixed(0);
    document.getElementById('flatfirecontainer').innerHTML = totalFlatFireDmg.toFixed(0);
    document.getElementById('flatcoldcontainer').innerHTML = totalFlatColdDmg.toFixed(0);
    document.getElementById('flatlightcontainer').innerHTML = totalFlatLightDmg.toFixed(0);
    document.getElementById('flatpoisoncontainer').innerHTML = totalFlatPoisonDmg.toFixed(0);
    document.getElementById('flatmagiccontainer').innerHTML = totalFlatMagicDmg.toFixed(0);
    document.getElementById('criticalhitcontainer').innerHTML = totalCriticalHit.toFixed(0);
    document.getElementById('deadlystrikecontainer').innerHTML = totalDeadlyStrike.toFixed(2);
    document.getElementById('weaponmasterycontainer').innerHTML = totalWeaponMastery.toFixed(0);
    document.getElementById('crithitmultipliercontainer').innerHTML = totalCritMultiplier.toFixed(3);
} 
  
  lvlInput.addEventListener('input', updateValues);
  select_Class.addEventListener('change', updateValues);
  helmDropdown.addEventListener('change', updateValues);
  armorDropdown.addEventListener('change', updateValues);
  weaponDropdown.addEventListener('change', updateValues);
  offDropdown.addEventListener('change', updateValues);
  gloveDropdown.addEventListener('change', updateValues);
  beltDropdown.addEventListener('change', updateValues);
  bootDropdown.addEventListener('change', updateValues);
  ringOneDropdown.addEventListener('change', updateValues);
  ringTwoDropdown.addEventListener('change', updateValues);
  amuletDropdown.addEventListener('change', updateValues);
  document.getElementById('blockValue').addEventListener('input', updateValues);
  document.getElementById('getHitValue').addEventListener('input', updateValues);
  document.getElementById('fireResValue').addEventListener('input', updateValues);
  document.getElementById('str').addEventListener('input', updateValues);
  document.getElementById('dex').addEventListener('input', updateValues);
  document.getElementById('vit').addEventListener('input', updateValues);
  document.getElementById('enr').addEventListener('input', updateValues);
  select_Class.addEventListener('change', updateOffDropdown);
  lvlInput.addEventListener('input', updateValues);
  
  updateValues();
  updateOffDropdown();

});




  
const jabskills = document.getElementById('jabcontainer');
const poisonjavelinskills = document.getElementById('poisonjavelincontainer');
const javelinandspearmasteryskills = document.getElementById('javelinandspearmasterycontainer');
const powerstrikeskills = document.getElementById('powerstrikecontainer');
const lightningboltskills = document.getElementById('lightningboltcontainer');
const fendskills = document.getElementById('fendcontainer');
const chargedstrikeskills = document.getElementById('chargedstrikecontainer');
const plaguejavelinskills = document.getElementById('plaguejavelincontainer');
const lightningstrikeskills = document.getElementById('lightningstrikecontainer');
const lightningfuryskills = document.getElementById('lightningfurycontainer');
const innersightskills = document.getElementById('innersightcontainer');
const criticalstrikeskills = document.getElementById('criticalstrikecontainer');
const evadeskills = document.getElementById('evadecontainer');
const slowmovementskills = document.getElementById('slowmovementcontainer');
const pierceskills = document.getElementById('piercecontainer');
const dodgeskills = document.getElementById('dodgecontainer');
const decoyskills = document.getElementById('decoycontainer');
const penetrateskills = document.getElementById('penetratecontainer');
const valkyrieskills = document.getElementById('valkyriecontainer');
const magicarrowskills = document.getElementById('magicarrowcontainer');
const multipleshotskills = document.getElementById('multipleshotcontainer');
const firearrowskills = document.getElementById('firearrowcontainer');
const coldarrowskills = document.getElementById('coldarrowcontainer');
const icearrowskills = document.getElementById('icearrowcontainer');
const guidedarrowskills = document.getElementById('guidedarrowcontainer');
const explodingarrowskills = document.getElementById('explodingarrowcontainer');
const strafeskills = document.getElementById('strafecontainer');
const immolationarrowskills = document.getElementById('immolationarrowcontainer');
const freezingarrowskills = document.getElementById('freezingarrowcontainer');
const tigerstrikeskills = document.getElementById('tigerstrikecontainer');
const cobrastrikeskills = document.getElementById('cobrastrikecontainer');
const phoenixstrikeskills = document.getElementById('phoenixstrikecontainer');
const dragontalonskills = document.getElementById('dragontaloncontainer');
const fistsoffireskills = document.getElementById('fistsoffirecontainer');
const clawsofthunderskills = document.getElementById('clawsofthundercontainer');
const dragonclawskills = document.getElementById('dragonclawcontainer');
const dragontailskills = document.getElementById('dragontailcontainer');
const dragonflightskills = document.getElementById('dragonflightcontainer');
const bladesoficeskills = document.getElementById('bladesoficecontainer');
const burstofspeedskills = document.getElementById('burstofspeedcontainer');
const weaponblockskills = document.getElementById('weaponblockcontainer');
const cloakofshadowsskills = document.getElementById('cloakofshadowscontainer');
const mindblastskills = document.getElementById('mindblastcontainer');
const fadeskills = document.getElementById('fadecontainer');
const shadowwarriorskills = document.getElementById('shadowwarriorcontainer');
const shadowmasterskills = document.getElementById('shadowmastercontainer');
const venomskills = document.getElementById('venomcontainer');
const clawanddaggermasteryskills = document.getElementById('clawanddaggermasterycontainer');
const psychichammerskills = document.getElementById('psychichammercontainer');
const fireblastskills = document.getElementById('fireblastcontainer');
const shockwebskills = document.getElementById('shockwebcontainer');
const chargedboltsentryskills = document.getElementById('chargedboltsentrycontainer');
const bladesentinelskills = document.getElementById('bladesentinelcontainer');
const wakeoffireskills = document.getElementById('wakeoffirecontainer');
const bladefuryskills = document.getElementById('bladefurycontainer');
const bladeshieldskills = document.getElementById('bladeshieldcontainer');
const lightningsentryskills = document.getElementById('lightningsentrycontainer');
const wakeofinfernoskills = document.getElementById('wakeofinfernocontainer');  
const chainlightningsentryskills = document.getElementById('chainlightningsentrycontainer');
const deathsentryskills = document.getElementById('deathsentrycontainer');
const howlskills = document.getElementById('howlcontainer');
const findpotionskills = document.getElementById('findpotioncontainer');
const shoutskills = document.getElementById('shoutcontainer');
const warcryskills = document.getElementById('warcrycontainer');
const finditemskills = document.getElementById('finditemcontainer');
const tauntskills = document.getElementById('tauntcontainer');
const battleordersskills = document.getElementById('battleorderscontainer');
const grimwardskills = document.getElementById('grimwardcontainer');
const battlecommandskills = document.getElementById('battlecommandcontainer');
const battlecryskills = document.getElementById('battlecrycontainer');
const generalmasteryskills = document.getElementById('generalmasterycontainer');
const throwingmasteryskills = document.getElementById('throwingmasterycontainer');
const polearmandspearmasteryskills = document.getElementById('polearmandspearmasterycontainer');
const combatreflexesskills = document.getElementById('combatreflexescontainer');
const ironskinskills = document.getElementById('ironskincontainer');
const increasedspeedskills = document.getElementById('increasedspeedcontainer');
const naturalresistanceskills = document.getElementById('naturalresistancecontainer');
const deepwoundsskills = document.getElementById('deepwoundscontainer');
const bashskills = document.getElementById('bashcontainer');
const doubleswingskills = document.getElementById('doubleswingcontainer');
const frenzyskills = document.getElementById('frenzycontainer');
const stunskills = document.getElementById('stuncontainer');
const concentrateskills = document.getElementById('concentratecontainer');
const doublethrowskills = document.getElementById('doublethrowcontainer');
const leapskills = document.getElementById('leapcontainer');
const leapattackskills = document.getElementById('leapattackcontainer');
const berserkskills = document.getElementById('berserkcontainer');
const whirlwindskills = document.getElementById('whirlwindcontainer');
const firestormskills = document.getElementById('firestormcontainer');
const arcticblastskills = document.getElementById('arcticblastcontainer');
const moltenboulderskills = document.getElementById('moltenbouldercontainer');
const cyclonearmorskills = document.getElementById('cyclonearmorcontainer');
const fissureskills = document.getElementById('fissurecontainer');
const twisterskills = document.getElementById('twistercontainer');
const gustskills = document.getElementById('gustcontainer');
const volcanoskills = document.getElementById('volcanocontainer');
const tornadoskills = document.getElementById('tornadocontainer');
const hurricaneskills = document.getElementById('hurricanecontainer');
const armageddonskills = document.getElementById('armageddoncontainer');
const ravenskills = document.getElementById('ravencontainer');
const poisoncreeperskills = document.getElementById('poisoncreepercontainer');
const heartofwolverineskills = document.getElementById('heartofwolverinecontainer');
const summonspiritwolfskills = document.getElementById('summonspiritwolfcontainer');
const carrionvineskills = document.getElementById('carrionvinecontainer');
const spiritofbarbsskills = document.getElementById('spiritofbarbscontainer');
const summondirewolfskills = document.getElementById('summondirewolfcontainer');
const solarcreeperskills = document.getElementById('solarcreepercontainer');
const oaksageskills = document.getElementById('oaksagecontainer');
const summongrizzlyskills = document.getElementById('summongrizzlycontainer');
const werewolfskills = document.getElementById('werewolfcontainer');
const werebearskills = document.getElementById('werebearcontainer');
const lycantropyskills = document.getElementById('lycantropycontainer');
const feralrageskills = document.getElementById('feralragecontainer');
const maulskills = document.getElementById('maulcontainer');
const hungerskills = document.getElementById('hungercontainer');
const rabiesskills = document.getElementById('rabiescontainer');
const shockwaveskills = document.getElementById('shockwavecontainer');
const fireclawsskills = document.getElementById('fireclawscontainer');
const furyskills = document.getElementById('furycontainer');
const raiseskeletonwarriorskills = document.getElementById('raiseskeletonwarriorcontainer');
const skeletonmasteryskills = document.getElementById('skeletonmasterycontainer');
const claygolemskills = document.getElementById('claygolemcontainer');
const raiseskeletalmageskills = document.getElementById('raiseskeletalmagecontainer');
const golemmasteryskills = document.getElementById('golemmasterycontainer');
const bloodgolemskills = document.getElementById('bloodgolemcontainer');
const bloodwarpskills = document.getElementById('bloodwarpcontainer');
const irongolemskills = document.getElementById('irongolemcontainer');
const raiseskeletonarcherskills = document.getElementById('raiseskeletonarchercontainer');
const firegolemskills = document.getElementById('firegolemcontainer');
const reviveskills = document.getElementById('revivecontainer');
const teethskills = document.getElementById('teethcontainer');
const poisonstrikeskills = document.getElementById('poisonstrikecontainer');
const bonearmorskills = document.getElementById('bonearmorcontainer');
const corpseexplosionskills = document.getElementById('corpseexplosioncontainer');
const bonewallskills = document.getElementById('bonewallcontainer');
const desecrateskills = document.getElementById('desecratecontainer');
const bonespearskills = document.getElementById('bonespearcontainer');
const boneprisonskills = document.getElementById('boneprisoncontainer');
const poisonnovaskills = document.getElementById('poisonnovacontainer');
const bonespiritskills = document.getElementById('bonespiritcontainer');
const amplifydamageskills = document.getElementById('amplifydamagecontainer');
const cursemasteryskills = document.getElementById('cursemasterycontainer');
const dimvisionskills = document.getElementById('dimvisioncontainer');
const darkpactskills = document.getElementById('darkpactcontainer');
const ironmaidenskills = document.getElementById('ironmaidencontainer');
const lifetapskills = document.getElementById('lifetapcontainer');
const terrorskills = document.getElementById('terrorcontainer');
const weakenskills = document.getElementById('weakencontainer');
const confuseskills = document.getElementById('confusecontainer');
const attractskills = document.getElementById('attractcontainer');
const decrepifyskills = document.getElementById('decrepifycontainer');
const lowerresistskills = document.getElementById('lowerresistcontainer');
const mightskills = document.getElementById('mightcontainer');
const holyfireskills = document.getElementById('holyfirecontainer');
const thornsskills = document.getElementById('thornscontainer');
const blessedaimskills = document.getElementById('blessedaimcontainer');
const concentrationskills = document.getElementById('concentrationcontainer');
const holyfreezyskills = document.getElementById('holyfreezecontainer');
const holyshockskills = document.getElementById('holyshockcontainer');
const sanctuaryskills = document.getElementById('sanctuarycontainer');
const fanaticismskills = document.getElementById('fanaticismcontainer');
const convictionskills = document.getElementById('convictioncontainer');
const sacrificeskills = document.getElementById('sacrificecontainer');
const holyboltskills = document.getElementById('holyboltcontainer');
const smiteskills = document.getElementById('smitecontainer');
const zealskills = document.getElementById('zealcontainer');
const holylightskills = document.getElementById('holylightcontainer');
const chargeskills = document.getElementById('chargecontainer');
const vengeanceskills = document.getElementById('vengeancecontainer');
const blessedhammerskills = document.getElementById('blessedhammercontainer');
const holyswordskills = document.getElementById('holyswordcontainer');
const joustskills = document.getElementById('joustcontainer');
const fistofheavensskills = document.getElementById('fistofheavenscontainer');
const holyshieldskills = document.getElementById('holyshieldcontainer');
const holynovaskills = document.getElementById('holynovacontainer');
const prayerskills = document.getElementById('prayercontainer');
const resistfireskills = document.getElementById('resistfirecontainer');
const resistcoldskills = document.getElementById('resistcoldcontainer');
const resistlightningskills = document.getElementById('resistlightningcontainer');
const defianceskills = document.getElementById('defiancecontainer');
const cleansingskills = document.getElementById('cleansingcontainer');
const vigorskills = document.getElementById('vigorcontainer');
const meditationskills = document.getElementById('meditationcontainer');
const redemptionskills = document.getElementById('redemptioncontainer');
const salvationskills = document.getElementById('salvationcontainer');
const iceboltskills = document.getElementById('iceboltcontainer');
const coldenchantskills = document.getElementById('coldenchantcontainer');
const frostnovaskills = document.getElementById('frostnovacontainer');
const iceblastskills = document.getElementById('iceblastcontainer');
const shiverarmorskills = document.getElementById('shiverarmorcontainer');
const glacialspikeskills = document.getElementById('glacialspikecontainer');
const chillingarmorskills = document.getElementById('chillingarmorcontainer');
const icebarrageskills = document.getElementById('icebarragecontainer');
const blizzardskills = document.getElementById('blizzardcontainer');
const frozenorbskills = document.getElementById('frozenorbcontainer');
const coldmasteryskills = document.getElementById('coldmasterycontainer');


const chargedboltskills = document.getElementById('chargedboltcontainer');
const telekinesisskills = document.getElementById('telekinesiscontainer');
const staticfieldskills = document.getElementById('staticfieldcontainer');
const novaskills = document.getElementById('novacontainer');
const lightningskills = document.getElementById('lightningcontainer');
const teleportskills = document.getElementById('teleportcontainer');
const chainlightningskills = document.getElementById('chainlightningcontainer');
const thunderstormskills = document.getElementById('thunderstormcontainer');
const energyshieldskills = document.getElementById('energyshieldcontainer');
const lightningmasteryskills = document.getElementById('lightningmasterycontainer');


const fireboltskills = document.getElementById('fireboltcontainer');
const warmthskills = document.getElementById('warmthcontainer');
const infernoskills = document.getElementById('infernocontainer');
const blazeskills = document.getElementById('blazecontainer');
const firewallskills = document.getElementById('firewallcontainer');
const fireballskills = document.getElementById('fireballcontainer');
const lesserhydraskills = document.getElementById('lesserhydracontainer');
const enchantfireskills = document.getElementById('enchantfirecontainer');
const meteorskills = document.getElementById('meteorcontainer');
const combustionskills = document.getElementById('combustioncontainer');
const hydraskills = document.getElementById('hydracontainer');
const firemasteryskills = document.getElementById('firemasterycontainer');



function updateVisibility() {

  
        
  let jabvalue = Math.min(Math.max(parseInt(jabskills.value, 10) || 0, 0), 20); 
    let poisonjavelinvalue = Math.min(Math.max(parseInt(poisonjavelinskills.value, 10) || 0, 0), 20); 
    let javelinandspearmasteryvalue = Math.min(Math.max(parseInt(javelinandspearmasteryskills.value, 10) || 0, 0), 20); 
    let powerstrikevalue = Math.min(Math.max(parseInt(powerstrikeskills.value, 10) || 0, 0), 20); 
        let lightningboltvalue = Math.min(Math.max(parseInt(lightningboltskills.value, 10) || 0, 0), 20);
        let fendvalue = Math.min(Math.max(parseInt(fendskills.value, 10) || 0, 0), 20);
        let chargedstrikevalue = Math.min(Math.max(parseInt(chargedstrikeskills.value, 10) || 0, 0), 20);
        let plaguejavelinvalue = Math.min(Math.max(parseInt(plaguejavelinskills.value, 10) || 0, 0), 20);
        let lightningstrikevalue = Math.min(Math.max(parseInt(lightningstrikeskills.value, 10) || 0, 0), 20);
        let lightningfuryvalue = Math.min(Math.max(parseInt(lightningfuryskills.value, 10) || 0, 0), 20);
        let innersightvalue = Math.min(Math.max(parseInt(innersightskills.value, 10) || 0, 0), 20);
        let criticalstrikevalue = Math.min(Math.max(parseInt(criticalstrikeskills.value, 10) || 0, 0), 20);
        let evadevalue = Math.min(Math.max(parseInt(evadeskills.value, 10) || 0, 0), 20);
        let slowmovementvalue = Math.min(Math.max(parseInt(slowmovementskills.value, 10) || 0, 0), 20);
        let piercevalue = Math.min(Math.max(parseInt(pierceskills.value, 10) || 0, 0), 20);
        let dodgevalue = Math.min(Math.max(parseInt(dodgeskills.value, 10) || 0, 0), 20);
        let decoyvalue = Math.min(Math.max(parseInt(decoyskills.value, 10) || 0, 0), 20);
        let penetratevalue = Math.min(Math.max(parseInt(penetrateskills.value, 10) || 0, 0), 20);
        let valkyrievalue = Math.min(Math.max(parseInt(valkyrieskills.value, 10) || 0, 0), 20);
        let magicarrowvalue = Math.min(Math.max(parseInt(magicarrowskills.value, 10) || 0, 0), 20);
        let multipleshotvalue = Math.min(Math.max(parseInt(multipleshotskills.value, 10) || 0, 0), 20);
        let firearrowvalue = Math.min(Math.max(parseInt(firearrowskills.value, 10) || 0, 0), 20);
        let coldarrowvalue = Math.min(Math.max(parseInt(coldarrowskills.value, 10) || 0, 0), 20);
        let icearrowvalue = Math.min(Math.max(parseInt(icearrowskills.value, 10) || 0, 0), 20);
        let guidedarrowvalue = Math.min(Math.max(parseInt(guidedarrowskills.value, 10) || 0, 0), 20);
        let explodingarrowvalue = Math.min(Math.max(parseInt(explodingarrowskills.value, 10) || 0, 0), 20);
        let strafevalue = Math.min(Math.max(parseInt(strafeskills.value, 10) || 0, 0), 20);
        let immolationarrowvalue = Math.min(Math.max(parseInt(immolationarrowskills.value, 10) || 0, 0), 20);
        let freezingarrowvalue = Math.min(Math.max(parseInt(freezingarrowskills.value, 10) || 0, 0), 20);
let tigerstrikevalue = Math.min(Math.max(parseInt(tigerstrikeskills.value, 10) || 0, 0), 20);
let cobrastrikevalue = Math.min(Math.max(parseInt(cobrastrikeskills.value, 10) || 0, 0), 20);
let dragontalonvalue = Math.min(Math.max(parseInt(dragontalonskills.value, 10) || 0, 0), 20);
let fistsoffirevalue = Math.min(Math.max(parseInt(fistsoffireskills.value, 10) || 0, 0), 20);
let clawsofthundervalue = Math.min(Math.max(parseInt(clawsofthunderskills.value, 10) || 0, 0), 20);
let dragonclawvalue = Math.min(Math.max(parseInt(dragonclawskills.value, 10) || 0, 0), 20);
let dragontailvalue = Math.min(Math.max(parseInt(dragontailskills.value, 10) || 0, 0), 20);
let dragonflightvalue = Math.min(Math.max(parseInt(dragonflightskills.value, 10) || 0, 0), 20);
let bladesoficevalue = Math.min(Math.max(parseInt(bladesoficeskills.value, 10) || 0, 0), 20);
let phoenixstrikevalue = Math.min(Math.max(parseInt(phoenixstrikeskills.value, 10) || 0, 0), 20);
let clawanddaggermasteryvalue = Math.min(Math.max(parseInt(clawanddaggermasteryskills.value, 10) || 0, 0), 20);
let psychichammervalue = Math.min(Math.max(parseInt(psychichammerskills.value, 10) || 0, 0), 20);
let burstofspeedvalue = Math.min(Math.max(parseInt(burstofspeedskills.value, 10) || 0, 0), 20);
let weaponblockvalue = Math.min(Math.max(parseInt(weaponblockskills.value, 10) || 0, 0), 20);
let cloakofshadowsvalue = Math.min(Math.max(parseInt(cloakofshadowsskills.value, 10) || 0, 0), 20);
let mindblastvalue = Math.min(Math.max(parseInt(mindblastskills.value, 10) || 0, 0), 20);
let fadevalue = Math.min(Math.max(parseInt(fadeskills.value, 10) || 0, 0), 20);
let shadowwarriorvalue = Math.min(Math.max(parseInt(shadowwarriorskills.value, 10) || 0, 0), 20);
let shadowmastervalue = Math.min(Math.max(parseInt(shadowmasterskills.value, 10) || 0, 0), 20);
let venomvalue = Math.min(Math.max(parseInt(venomskills.value, 10) || 0, 0), 20);
let fireblastvalue = Math.min(Math.max(parseInt(fireblastskills.value, 10) || 0, 0), 20);
let shockwebvalue = Math.min(Math.max(parseInt(shockwebskills.value, 10) || 0, 0), 20);
let bladesentinelvalue = Math.min(Math.max(parseInt(bladesentinelskills.value, 10) || 0, 0), 20);
let chargedboltsentryvalue = Math.min(Math.max(parseInt(chargedboltsentryskills.value, 10) || 0, 0), 20);
let wakeoffirevalue = Math.min(Math.max(parseInt(wakeoffireskills.value, 10) || 0, 0), 20);
let bladefuryvalue = Math.min(Math.max(parseInt(bladefuryskills.value, 10) || 0, 0), 20); 
let bladeshieldvalue = Math.min(Math.max(parseInt(bladeshieldskills.value, 10) || 0, 0), 20);
let lightningsentryvalue = Math.min(Math.max(parseInt(lightningsentryskills.value, 10) || 0, 0), 20);
let wakeofinfernovalue = Math.min(Math.max(parseInt(wakeofinfernoskills.value, 10) || 0, 0), 20);
let chainlightningsentryvalue = Math.min(Math.max(parseInt(chainlightningsentryskills.value, 10) || 0, 0), 20);
let deathsentryvalue = Math.min(Math.max(parseInt(deathsentryskills.value, 10) || 0, 0), 20);
let howlvalue = Math.min(Math.max(parseInt(howlskills.value, 10) || 0, 0), 20);
let findpotionvalue = Math.min(Math.max(parseInt(findpotionskills.value, 10) || 0, 0), 20);
let shoutvalue = Math.min(Math.max(parseInt(shoutskills.value, 10) || 0, 0), 20);
let warcryvalue = Math.min(Math.max(parseInt(warcryskills.value, 10) || 0, 0), 20);
let finditemvalue = Math.min(Math.max(parseInt(finditemskills.value, 10) || 0, 0), 20);
let tauntvalue = Math.min(Math.max(parseInt(tauntskills.value, 10) || 0, 0), 20);
let battleordersvalue = Math.min(Math.max(parseInt(battleordersskills.value, 10) || 0, 0), 20);
let grimwardvalue = Math.min(Math.max(parseInt(grimwardskills.value, 10) || 0, 0), 20);
let battlecommandvalue = Math.min(Math.max(parseInt(battlecommandskills.value, 10) || 0, 0), 20);
let battlecryvalue = Math.min(Math.max(parseInt(battlecryskills.value, 10) || 0, 0), 20);
let generalmasteryvalue = Math.min(Math.max(parseInt(generalmasteryskills.value, 10) || 0, 0), 20);
let throwingmasteryvalue = Math.min(Math.max(parseInt(throwingmasteryskills.value, 10) || 0, 0), 20);
let polearmandspearmasteryvalue = Math.min(Math.max(parseInt(polearmandspearmasteryskills.value, 10) || 0, 0), 20);
let combatreflexesvalue = Math.min(Math.max(parseInt(combatreflexesskills.value, 10) || 0, 0), 20);
let ironskinvalue = Math.min(Math.max(parseInt(ironskinskills.value, 10) || 0, 0), 20);
let increasedspeedvalue = Math.min(Math.max(parseInt(increasedspeedskills.value, 10) || 0, 0), 20);
let naturalresistancevalue = Math.min(Math.max(parseInt(naturalresistanceskills.value, 10) || 0, 0), 20);
let deepwoundsvalue = Math.min(Math.max(parseInt(deepwoundsskills.value, 10) || 0, 0), 20);
let bashvalue = Math.min(Math.max(parseInt(bashskills.value, 10) || 0, 0), 20);
let doubleswingvalue = Math.min(Math.max(parseInt(doubleswingskills.value, 10) || 0, 0), 20);
let frenzyvalue = Math.min(Math.max(parseInt(frenzyskills.value, 10) || 0, 0), 20);
let stunvalue = Math.min(Math.max(parseInt(stunskills.value, 10) || 0, 0), 20);
let concentratevalue = Math.min(Math.max(parseInt(concentrateskills.value, 10) || 0, 0), 20);
let doublethrowvalue = Math.min(Math.max(parseInt(doublethrowskills.value, 10) || 0, 0), 20);
let leapvalue = Math.min(Math.max(parseInt(leapskills.value, 10) || 0, 0), 20);
let leapattackvalue = Math.min(Math.max(parseInt(leapattackskills.value, 10) || 0, 0), 20);
let berserkvalue = Math.min(Math.max(parseInt(berserkskills.value, 10) || 0, 0), 20);
let whirlwindvalue = Math.min(Math.max(parseInt(whirlwindskills.value, 10) || 0, 0), 20);
let firestormvalue = Math.min(Math.max(parseInt(firestormskills.value, 10) || 0, 0), 20);
let arcticblastvalue = Math.min(Math.max(parseInt(arcticblastskills.value, 10) || 0, 0), 20);
let moltenbouldervalue = Math.min(Math.max(parseInt(moltenboulderskills.value, 10) || 0, 0), 20);
let cyclonearmorvalue = Math.min(Math.max(parseInt(cyclonearmorskills.value, 10) || 0, 0), 20);
let fissurevalue = Math.min(Math.max(parseInt(fissureskills.value, 10) || 0, 0), 20);
let twistervalue = Math.min(Math.max(parseInt(twisterskills.value, 10) || 0, 0), 20);
let gustvalue = Math.min(Math.max(parseInt(gustskills.value, 10) || 0, 0), 20);
let volcanovalue = Math.min(Math.max(parseInt(volcanoskills.value, 10) || 0, 0), 20);
let tornadovalue = Math.min(Math.max(parseInt(tornadoskills.value, 10) || 0, 0), 20);
let hurricanevalue = Math.min(Math.max(parseInt(hurricaneskills.value, 10) || 0, 0), 20);
let armageddonvalue = Math.min(Math.max(parseInt(armageddonskills.value, 10) || 0, 0), 20);
let werewolfvalue = Math.min(Math.max(parseInt(werewolfskills.value, 10) || 0, 0), 20);
let werebearvalue = Math.min(Math.max(parseInt(werebearskills.value, 10) || 0, 0), 20);
let lycantropyvalue = Math.min(Math.max(parseInt(lycantropyskills.value, 10) || 0, 0), 20);
let feralragevalue = Math.min(Math.max(parseInt(feralrageskills.value, 10) || 0, 0), 20);
let maulvalue = Math.min(Math.max(parseInt(maulskills.value, 10) || 0, 0), 20);
let hungervalue = Math.min(Math.max(parseInt(hungerskills.value, 10) || 0, 0), 20);
let rabiesvalue = Math.min(Math.max(parseInt(rabiesskills.value, 10) || 0, 0), 20);
let shockwavevalue = Math.min(Math.max(parseInt(shockwaveskills.value, 10) || 0, 0), 20);
let fireclawsvalue = Math.min(Math.max(parseInt(fireclawsskills.value, 10) || 0, 0), 20);
let furyvalue = Math.min(Math.max(parseInt(furyskills.value, 10) || 0, 0), 20);
let ravenvalue = Math.min(Math.max(parseInt(ravenskills.value, 10) || 0, 0), 20);
let poisoncreepervalue = Math.min(Math.max(parseInt(poisoncreeperskills.value, 10) || 0, 0), 20);
let heartofwolverinevalue = Math.min(Math.max(parseInt(heartofwolverineskills.value, 10) || 0, 0), 20);
let summonspiritwolfvalue = Math.min(Math.max(parseInt(summonspiritwolfskills.value, 10) || 0, 0), 20);
let carrionvinevalue = Math.min(Math.max(parseInt(carrionvineskills.value, 10) || 0, 0), 20);
let spiritofbarbsvalue = Math.min(Math.max(parseInt(spiritofbarbsskills.value, 10) || 0, 0), 20);
let summondirewolfvalue = Math.min(Math.max(parseInt(summondirewolfskills.value, 10) || 0, 0), 20);
let solarcreepervalue = Math.min(Math.max(parseInt(solarcreeperskills.value, 10) || 0, 0), 20);
let oaksagevalue = Math.min(Math.max(parseInt(oaksageskills.value, 10) || 0, 0), 20);
let summongrizzlyvalue = Math.min(Math.max(parseInt(summongrizzlyskills.value, 10) || 0, 0), 20);
let raiseskeletonwarriorvalue = Math.min(Math.max(parseInt(raiseskeletonwarriorskills.value, 10) || 0, 0), 20);
let skeletonmasteryvalue = Math.min(Math.max(parseInt(skeletonmasteryskills.value, 10) || 0, 0), 20);
let claygolemvalue = Math.min(Math.max(parseInt(claygolemskills.value, 10) || 0, 0), 20);
let raiseskeletalmagevalue = Math.min(Math.max(parseInt(raiseskeletalmageskills.value, 10) || 0, 0), 20);
let golemmasteryvalue = Math.min(Math.max(parseInt(golemmasteryskills.value, 10) || 0, 0), 20);
let bloodgolemvalue = Math.min(Math.max(parseInt(bloodgolemskills.value, 10) || 0, 0), 20);
let bloodwarpvalue = Math.min(Math.max(parseInt(bloodwarpskills.value, 10) || 0, 0), 20);
let irongolemvalue = Math.min(Math.max(parseInt(irongolemskills.value, 10) || 0, 0), 20);
let raiseskeletonarchervalue = Math.min(Math.max(parseInt(raiseskeletonarcherskills.value, 10) || 0, 0), 20);
let firegolemvalue = Math.min(Math.max(parseInt(firegolemskills.value, 10) || 0, 0), 20);
let revivevalue = Math.min(Math.max(parseInt(reviveskills.value, 10) || 0, 0), 20);
let teethvalue = Math.min(Math.max(parseInt(teethskills.value, 10) || 0, 0), 20);
let poisonstrikevalue = Math.min(Math.max(parseInt(poisonstrikeskills.value, 10) || 0, 0), 20);
let bonearmorvalue = Math.min(Math.max(parseInt(bonearmorskills.value, 10) || 0, 0), 20);
let corpseexplosionvalue = Math.min(Math.max(parseInt(corpseexplosionskills.value, 10) || 0, 0), 20);
let bonewallvalue = Math.min(Math.max(parseInt(bonewallskills.value, 10) || 0, 0), 20);
let desecratevalue = Math.min(Math.max(parseInt(desecrateskills.value, 10) || 0, 0), 20);
let bonespearvalue = Math.min(Math.max(parseInt(bonespearskills.value, 10) || 0, 0), 20);
let boneprisonvalue = Math.min(Math.max(parseInt(boneprisonskills.value, 10) || 0, 0), 20);
let poisonnovavalue = Math.min(Math.max(parseInt(poisonnovaskills.value, 10) || 0, 0), 20);
let bonespiritvalue = Math.min(Math.max(parseInt(bonespiritskills.value, 10) || 0, 0), 20);
let amplifydamagevalue = Math.min(Math.max(parseInt(amplifydamageskills.value, 10) || 0, 0), 20);
let cursemasteryvalue = Math.min(Math.max(parseInt(cursemasteryskills.value, 10) || 0, 0), 20);
let dimvisionvalue = Math.min(Math.max(parseInt(dimvisionskills.value, 10) || 0, 0), 20);
let darkpactvalue = Math.min(Math.max(parseInt(darkpactskills.value, 10) || 0, 0), 20);
let ironmaidenvalue = Math.min(Math.max(parseInt(ironmaidenskills.value, 10) || 0, 0), 20);
let lifetapvalue = Math.min(Math.max(parseInt(lifetapskills.value, 10) || 0, 0), 20);
let terrorvalue = Math.min(Math.max(parseInt(terrorskills.value, 10) || 0, 0), 20);
let weakenvalue = Math.min(Math.max(parseInt(weakenskills.value, 10) || 0, 0), 20);
let confusevalue = Math.min(Math.max(parseInt(confuseskills.value, 10) || 0, 0), 20);
let attractvalue = Math.min(Math.max(parseInt(attractskills.value, 10) || 0, 0), 20);
let decrepifyvalue = Math.min(Math.max(parseInt(decrepifyskills.value, 10) || 0, 0), 20);
let lowerresistvalue = Math.min(Math.max(parseInt(lowerresistskills.value, 10) || 0, 0), 20);
let mightvalue = Math.min(Math.max(parseInt(mightskills.value, 10) || 0, 0), 20);
let holyfirevalue = Math.min(Math.max(parseInt(holyfireskills.value, 10) || 0, 0), 20);
let thornsvalue = Math.min(Math.max(parseInt(thornsskills.value, 10) || 0, 0), 20);
let blessedaimvalue = Math.min(Math.max(parseInt(blessedaimskills.value, 10) || 0, 0), 20);
let concentrationvalue = Math.min(Math.max(parseInt(concentrationskills.value, 10) || 0, 0), 20);
let holyfreezevalue = Math.min(Math.max(parseInt(holyfreezyskills.value, 10) || 0, 0), 20);
let holyshockvalue = Math.min(Math.max(parseInt(holyshockskills.value, 10) || 0, 0), 20);
let sanctuaryvalue = Math.min(Math.max(parseInt(sanctuaryskills.value, 10) || 0, 0), 20);
let fanaticismvalue = Math.min(Math.max(parseInt(fanaticismskills.value, 10) || 0, 0), 20);
let convictionvalue = Math.min(Math.max(parseInt(convictionskills.value, 10) || 0, 0), 20);
let sacrificevalue = Math.min(Math.max(parseInt(sacrificeskills.value, 10) || 0, 0), 20);
let holyboltvalue = Math.min(Math.max(parseInt(holyboltskills.value, 10) || 0, 0), 20);
let smitevalue = Math.min(Math.max(parseInt(smiteskills.value, 10) || 0, 0), 20);
let zealvalue = Math.min(Math.max(parseInt(zealskills.value, 10) || 0, 0), 20);
let holylightvalue = Math.min(Math.max(parseInt(holylightskills.value, 10) || 0, 0), 20);
let chargevalue = Math.min(Math.max(parseInt(chargeskills.value, 10) || 0, 0), 20);
let vengeancevalue = Math.min(Math.max(parseInt(vengeanceskills.value, 10) || 0, 0), 20);
let blessedhammervalue = Math.min(Math.max(parseInt(blessedhammerskills.value, 10) || 0, 0), 20);
let holyswordvalue = Math.min(Math.max(parseInt(holyswordskills.value, 10) || 0, 0), 20);
let joustvalue = Math.min(Math.max(parseInt(joustskills.value, 10) || 0, 0), 20);
let fistofheavensvalue = Math.min(Math.max(parseInt(fistofheavensskills.value, 10) || 0, 0), 20);
let holyshieldvalue = Math.min(Math.max(parseInt(holyshieldskills.value, 10) || 0, 0), 20);
let holynovavalue = Math.min(Math.max(parseInt(holynovaskills.value, 10) || 0, 0), 20);
let prayervalue = Math.min(Math.max(parseInt(prayerskills.value, 10) || 0, 0), 20);
let resistfirevalue = Math.min(Math.max(parseInt(resistfireskills.value, 10) || 0, 0), 20);
let resistcoldvalue = Math.min(Math.max(parseInt(resistcoldskills.value, 10) || 0, 0), 20);
let resistlightningvalue = Math.min(Math.max(parseInt(resistlightningskills.value, 10) || 0, 0), 20);
let defiancevalue = Math.min(Math.max(parseInt(defianceskills.value, 10) || 0, 0), 20);
let cleansingvalue = Math.min(Math.max(parseInt(cleansingskills.value, 10) || 0, 0), 20);
let vigorvalue = Math.min(Math.max(parseInt(vigorskills.value, 10) || 0, 0), 20);
let meditationvalue = Math.min(Math.max(parseInt(meditationskills.value, 10) || 0, 0), 20);
let redemptionvalue = Math.min(Math.max(parseInt(redemptionskills.value, 10) || 0, 0), 20);
let salvationvalue = Math.min(Math.max(parseInt(salvationskills.value, 10) || 0, 0), 20);

let iceboltvalue = Math.min(Math.max(parseInt(iceboltskills.value, 10) || 0, 0), 20);
let coldenchantvalue = Math.min(Math.max(parseInt(coldenchantskills.value, 10) || 0, 0), 20);
let frostnovavalue = Math.min(Math.max(parseInt(frostnovaskills.value, 10) || 0, 0), 20);
let iceblastvalue = Math.min(Math.max(parseInt(iceblastskills.value, 10) || 0, 0), 20);
let shiverarmorvalue = Math.min(Math.max(parseInt(shiverarmorskills.value, 10) || 0, 0), 20);
let glacialspikevalue = Math.min(Math.max(parseInt(glacialspikeskills.value, 10) || 0, 0), 20);
let chillingarmorvalue = Math.min(Math.max(parseInt(chillingarmorskills.value, 10) || 0, 0), 20);
let icebarragevalue = Math.min(Math.max(parseInt(icebarrageskills.value, 10) || 0, 0), 20);
let blizzardvalue = Math.min(Math.max(parseInt(blizzardskills.value, 10) || 0, 0), 20);
let frozenorbvalue = Math.min(Math.max(parseInt(frozenorbskills.value, 10) || 0, 0), 20);
let coldmasteryvalue = Math.min(Math.max(parseInt(coldmasteryskills.value, 10) || 0, 0), 20);


let chargedboltvalue = Math.min(Math.max(parseInt(chargedboltskills.value, 10) || 0, 0), 20);
let telekinesisvalue = Math.min(Math.max(parseInt(telekinesisskills.value, 10) || 0, 0), 20);
let staticfieldvalue = Math.min(Math.max(parseInt(staticfieldskills.value, 10) || 0, 0), 20);
let novavalue = Math.min(Math.max(parseInt(novaskills.value, 10) || 0, 0), 20);
let lightningvalue = Math.min(Math.max(parseInt(lightningskills.value, 10) || 0, 0), 20);
let teleportvalue = Math.min(Math.max(parseInt(teleportskills.value, 10) || 0, 0), 20);
let chainlightningvalue = Math.min(Math.max(parseInt(chainlightningskills.value, 10) || 0, 0), 20);
let thunderstormvalue = Math.min(Math.max(parseInt(thunderstormskills.value, 10) || 0, 0), 20);
let energyshieldvalue = Math.min(Math.max(parseInt(energyshieldskills.value, 10) || 0, 0), 20);
let lightningmasteryvalue = Math.min(Math.max(parseInt(lightningmasteryskills.value, 10) || 0, 0), 20);


let fireboltvalue = Math.min(Math.max(parseInt(fireboltskills.value, 10) || 0, 0), 20);
let warmthvalue = Math.min(Math.max(parseInt(warmthskills.value, 10) || 0, 0), 20);
let infernovalue = Math.min(Math.max(parseInt(infernoskills.value, 10) || 0, 0), 20);
let blazevalue = Math.min(Math.max(parseInt(blazeskills.value, 10) || 0, 0), 20);
let firewallvalue = Math.min(Math.max(parseInt(firewallskills.value, 10) || 0, 0), 20);
let fireballvalue = Math.min(Math.max(parseInt(fireballskills.value, 10) || 0, 0), 20);
let lesserhydravalue = Math.min(Math.max(parseInt(lesserhydraskills.value, 10) || 0, 0), 20);
let enchantfirevalue = Math.min(Math.max(parseInt(enchantfireskills.value, 10) || 0, 0), 20);
let meteorvalue = Math.min(Math.max(parseInt(meteorskills.value, 10) || 0, 0), 20);
let combustionvalue = Math.min(Math.max(parseInt(combustionskills.value, 10) || 0, 0), 20);
let hydravalue = Math.min(Math.max(parseInt(hydraskills.value, 10) || 0, 0), 20);
let firemasteryvalue = Math.min(Math.max(parseInt(firemasteryskills.value, 10) || 0, 0), 20);

      

        
       
        
    
        const level = parseInt(document.getElementById('lvlValue').value) || 1;
        
    

        const skillHandler = new SkillHandler();


function updateCriticalHit() {
    const javelinandspearmasteryLevel = parseInt(document.getElementById('javelinandspearmasterycontainer').value || 0);
    let criticalHitValue = 0;

    if (javelinandspearmasteryLevel > 0) {
        const javelinandspearmasteryInfo = skillHandler.getSkillInfo('javelinAndSpearMastery', javelinandspearmasteryLevel);
        criticalHitValue = javelinandspearmasteryInfo?.criticalChance || 0;
    }

    const criticalhitcontainer = document.getElementById('criticalhitcontainer');
    if (criticalhitcontainer) {
        criticalhitcontainer.textContent = criticalHitValue.toFixed(2);
    }
}

document.getElementById('javelinandspearmasterycontainer').addEventListener('input', updateCriticalHit);


  
    if (jabvalue > 0 && level > 5) {
        javelinandspearmasteryskills.classList.remove('hiddenSkill6');
        powerstrikeskills.classList.remove('hiddenSkill6');
    } else {
        javelinandspearmasteryskills.classList.add('hiddenSkill6');
        powerstrikeskills.classList.add('hiddenSkill6');
    }

   
   
    document.getElementById('lvlValue').addEventListener('input', updateVisibility);




       

          if (jabvalue > 0 && poisonjavelinvalue > 0 && powerstrikevalue > 0 && level > 11) {
            lightningboltskills.classList.remove('hiddenSkill12');
        } else {
            lightningboltskills.classList.add('hiddenSkill12');
            fendskills.classList.add('hiddenSkill18');
        }

        if (jabvalue > 0 && javelinandspearmasteryvalue > 0 && level > 17) {
            fendskills.classList.remove('hiddenSkill18');
        } else {
            fendskills.classList.add('hiddenSkill18');
        }

        

        if (jabvalue > 0 && powerstrikevalue > 0 && level > 17) {
            chargedstrikeskills.classList.remove('hiddenSkill18');
        } else {
            chargedstrikeskills.classList.add('hiddenSkill18');
        }

        if (jabvalue > 0 && poisonjavelinvalue > 0 && powerstrikevalue > 0 && lightningboltvalue > 0 && level > 17) {
            plaguejavelinskills.classList.remove('hiddenSkill18');
        } else {
            plaguejavelinskills.classList.add('hiddenSkill18');
        }

        if (jabvalue > 0 &&  powerstrikevalue > 0 && chargedstrikevalue > 0 && level > 29) {
            lightningstrikeskills.classList.remove('hiddenSkill30');
        } else {
            lightningstrikeskills.classList.add('hiddenSkill30');
        }

        if (jabvalue > 0 && poisonjavelinvalue > 0 && powerstrikevalue > 0 && lightningboltvalue > 0 && plaguejavelinvalue > 0 && level > 29) {
            lightningfuryskills.classList.remove('hiddenSkill30');
        } else {
            lightningfuryskills.classList.add('hiddenSkill30');
        }

        if (level > 5) {
          evadeskills.classList.remove('hiddenSkill6');
        } else {
          evadeskills.classList.add('hiddenSkill6');
        }

        if (innersightvalue > 0 && level > 11) {
              slowmovementskills.classList.remove('hiddenSkill12');
              
          } else {
              slowmovementskills.classList.add('hiddenSkill12');
        }
       

          if (innersightvalue > 0 && evadevalue > 0 && slowmovementvalue > 0 && level > 17) {
            dodgeskills.classList.remove('hiddenSkill18');
        } else {
            dodgeskills.classList.add('hiddenSkill18');
           
        }

        if (innersightvalue > 0 && slowmovementvalue > 0 && level > 17) {
            decoyskills.classList.remove('hiddenSkill18');
        } else {
            decoyskills.classList.add('hiddenSkill18');
        }

        if (criticalstrikevalue > 0 && level > 11) {
            pierceskills.classList.remove('hiddenSkill12');
        } else {
            pierceskills.classList.add('hiddenSkill12');
        }


        if (criticalstrikevalue > 0 && piercevalue > 0 && level > 23) {
            penetrateskills.classList.remove('hiddenSkill24');
        } else {
            penetrateskills.classList.add('hiddenSkill24');
        }

        if (innersightvalue > 0 && slowmovementvalue > 0 && decoyvalue > 0 && level > 29) {
            valkyrieskills.classList.remove('hiddenSkill30');
        } else {
            valkyrieskills.classList.add('hiddenSkill30');
        }


        if (magicarrowvalue > 0 && level > 5) {
              multipleshotskills.classList.remove('hiddenSkill6');
              
              firearrowskills.classList.remove('hiddenSkill6');
              coldarrowskills.classList.remove('hiddenSkill6');
              
          } else {
              multipleshotskills.classList.add('hiddenSkill6');
              
              firearrowskills.classList.add('hiddenSkill6');
              coldarrowskills.classList.add('hiddenSkill6');
              
              
              
          }
       

          if (magicarrowvalue > 0 && firearrowvalue > 0 && level > 17) {
            explodingarrowskills.classList.remove('hiddenSkill18');
        } else {
            explodingarrowskills.classList.add('hiddenSkill18');
           
        }

        if (magicarrowvalue > 0 && coldarrowvalue > 0 && level > 11) {
            icearrowskills.classList.remove('hiddenSkill12');
        } else {
            icearrowskills.classList.add('hiddenSkill12');
        }

        if (magicarrowvalue > 0 && multipleshotvalue > 0 && level > 17) {
            guidedarrowskills.classList.remove('hiddenSkill18');
        } else {
            guidedarrowskills.classList.add('hiddenSkill18');
        }

        if (magicarrowvalue > 0 && multipleshotvalue > 0 && guidedarrowvalue > 0 && level > 23) {
            strafeskills.classList.remove('hiddenSkill24');
        } else {
            strafeskills.classList.add('hiddenSkill24');
        }


        if (magicarrowvalue > 0 && firearrowvalue > 0 && explodingarrowvalue > 0 && level > 29) {
            immolationarrowskills.classList.remove('hiddenSkill30');
        } else {
            immolationarrowskills.classList.add('hiddenSkill30');
        }

        if (magicarrowvalue > 0 && coldarrowvalue > 0 && icearrowvalue > 0 && level > 29) {
            freezingarrowskills.classList.remove('hiddenSkill30');
        } else {
            freezingarrowskills.classList.add('hiddenSkill30');
        }
      

      //assa skills tree

      

if (dragontalonvalue > 0 && level > 5) {
    
    dragonclawskills.classList.remove('hiddenSkill6');
  } else {
    
    dragonclawskills.classList.add('hiddenSkill6');
}

if (level > 5) {
    fistsoffireskills.classList.remove('hiddenSkill6');
} else {
    fistsoffireskills.classList.add('hiddenSkill6');
}

if (tigerstrikevalue > 0 && level > 11) {
    cobrastrikeskills.classList.remove('hiddenSkill12');
} else {
    cobrastrikeskills.classList.add('hiddenSkill12');
}

if (fistsoffirevalue > 0 && level > 17) {
    clawsofthunderskills.classList.remove('hiddenSkill18');
} else {
    clawsofthunderskills.classList.add('hiddenSkill18');
}

if (dragontalonvalue > 0 && dragonclawvalue > 0 && level > 17) {
    dragontailskills.classList.remove('hiddenSkill18');
} else {
    dragontailskills.classList.add('hiddenSkill18');
}

if (dragontalonvalue > 0 && dragonclawvalue > 0 && dragontailvalue > 0 && level > 23) {
    dragonflightskills.classList.remove('hiddenSkill24');
} else {
    dragonflightskills.classList.add('hiddenSkill24');
}

if (fistsoffirevalue > 0 && clawsofthundervalue > 0 && level > 23) {
    bladesoficeskills.classList.remove('hiddenSkill24');
} else {
    bladesoficeskills.classList.add('hiddenSkill24');
}

if (tigerstrikevalue > 0 && fistsoffirevalue > 0 && cobrastrikevalue > 0 && 
    clawsofthundervalue > 0 && bladesoficevalue > 0 && level > 29) {
    phoenixstrikeskills.classList.remove('hiddenSkill30');
} else {
    phoenixstrikeskills.classList.add('hiddenSkill30');
}



if (level > 5) {
    burstofspeedskills.classList.remove('hiddenSkill6');
    
} else {
    burstofspeedskills.classList.add('hiddenSkill6');
    
}

if (clawanddaggermasteryvalue > 0 && level > 11) {
    weaponblockskills.classList.remove('hiddenSkill12');
    
} else {
    weaponblockskills.classList.add('hiddenSkill12');
    
}

if (psychichammervalue > 0 && level > 11) {
    cloakofshadowsskills.classList.remove('hiddenSkill12');
} else {
    cloakofshadowsskills.classList.add('hiddenSkill12');
}


if (psychichammervalue > 0 && cloakofshadowsvalue > 0 && level > 17) {
    mindblastskills.classList.remove('hiddenSkill18');
} else {
    mindblastskills.classList.add('hiddenSkill18');
}

if (clawanddaggermasteryvalue > 0 && burstofspeedvalue > 0 && level > 17) {
   
    fadeskills.classList.remove('hiddenSkill18');
} else {
    
    fadeskills.classList.add('hiddenSkill18');
}

if (psychichammervalue > 0 && cloakofshadowsvalue > 0 && clawanddaggermasteryvalue > 0 && weaponblockvalue > 0 && level > 17) {
    shadowwarriorskills.classList.remove('hiddenSkill18');
} else {
    shadowwarriorskills.classList.add('hiddenSkill18');
}

if (psychichammervalue > 0 && cloakofshadowsvalue > 0 && clawanddaggermasteryvalue > 0 && weaponblockvalue > 0 && shadowwarriorvalue > 0 && level > 29) {
    shadowmasterskills.classList.remove('hiddenSkill30');
} else {
    shadowmasterskills.classList.add('hiddenSkill30');
}

if (clawanddaggermasteryvalue > 0 && burstofspeedvalue > 0 && fadevalue > 0 & level > 29) {
    venomskills.classList.remove('hiddenSkill30');
} else {
    venomskills.classList.add('hiddenSkill30');
}


if (level > 5) {
    shockwebskills.classList.remove('hiddenSkill6');
    bladesentinelskills.classList.remove('hiddenSkill6');
} else {
    shockwebskills.classList.add('hiddenSkill6');
    bladesentinelskills.classList.add('hiddenSkill6');
}

if (shockwebvalue > 0 && level > 11) {
    chargedboltsentryskills.classList.remove('hiddenSkill12');
} else {
    chargedboltsentryskills.classList.add('hiddenSkill12');
}

if (fireblastvalue > 0 && level > 11) {
    wakeoffireskills.classList.remove('hiddenSkill12');
} else {
    wakeoffireskills.classList.add('hiddenSkill12');
}

if (bladesentinelvalue > 0 && level > 17) {
    bladefuryskills.classList.remove('hiddenSkill18');
} else {
    bladefuryskills.classList.add('hiddenSkill18');
}

if (bladefuryvalue > 0 && level > 23) {
    bladeshieldskills.classList.remove('hiddenSkill24');
} else {
    bladeshieldskills.classList.add('hiddenSkill24');
}

if (chargedboltsentryvalue > 0 && level > 23) {
    lightningsentryskills.classList.remove('hiddenSkill24');
} else {
    lightningsentryskills.classList.add('hiddenSkill24');
}

if (wakeoffirevalue > 0 && level > 23) {
    wakeofinfernoskills.classList.remove('hiddenSkill24');
} else {
    wakeofinfernoskills.classList.add('hiddenSkill24');
}

if (lightningsentryvalue > 0 && level > 29) {
    chainlightningsentryskills.classList.remove('hiddenSkill30');
    deathsentryskills.classList.remove('hiddenSkill30');
} else {
    chainlightningsentryskills.classList.add('hiddenSkill30');
    deathsentryskills.classList.add('hiddenSkill30');
}


// War Cries
if (level > 5) {
    warcryskills.classList.remove('hiddenSkill6');
    shoutskills.classList.remove('hiddenSkill6');
} else {
    warcryskills.classList.add('hiddenSkill6');
    shoutskills.classList.add('hiddenSkill6');
}

if (findpotionvalue > 0 && level > 11) {
    finditemskills.classList.remove('hiddenSkill12');
} else {
    finditemskills.classList.add('hiddenSkill12');
}

if (shoutvalue > 0 && level > 17) {
    tauntskills.classList.remove('hiddenSkill18');
} else {
    tauntskills.classList.add('hiddenSkill18');
}

if (shoutvalue > 0 && level > 23) {
    battleordersskills.classList.remove('hiddenSkill24');
    grimwardskills.classList.remove('hiddenSkill24');
} else {
    battleordersskills.classList.add('hiddenSkill24');
    grimwardskills.classList.add('hiddenSkill24');
}

if (battleordersvalue > 0 && level > 29) {
    battlecommandskills.classList.remove('hiddenSkill30');
    battlecryskills.classList.remove('hiddenSkill30');
} else {
    battlecommandskills.classList.add('hiddenSkill30');
    battlecryskills.classList.add('hiddenSkill30');
}

// Combat Masteries
if (level > 5) {
    polearmandspearmasteryskills.classList.remove('hiddenSkill6');
} else {
    polearmandspearmasteryskills.classList.add('hiddenSkill6');
}

if (generalmasteryvalue > 0 && level > 11) {
    combatreflexesskills.classList.remove('hiddenSkill12');
} else {
  combatreflexesskills.classList.add('hiddenSkill12');
}

if (combatreflexesvalue > 0 && level > 17) {
    ironskinskills.classList.remove('hiddenSkill18');
} else {
    ironskinskills.classList.add('hiddenSkill18');
}

if (ironskinvalue > 0 && level > 23) {
    increasedspeedskills.classList.remove('hiddenSkill24');
} else {
    increasedspeedskills.classList.add('hiddenSkill24');
}

if (increasedspeedvalue > 0 && level > 29) {
    naturalresistanceskills.classList.remove('hiddenSkill30');
    deepwoundsskills.classList.remove('hiddenSkill30');
} else {
    naturalresistanceskills.classList.add('hiddenSkill30');
    deepwoundsskills.classList.add('hiddenSkill30');
}

// Combat Skills
if (level > 5) {
    frenzyskills.classList.remove('hiddenSkill6');
    stunskills.classList.remove('hiddenSkill6');
} else {
    frenzyskills.classList.add('hiddenSkill6');
    stunskills.classList.add('hiddenSkill6');
}

if (doubleswingvalue > 0 && level > 11) {
    concentrateskills.classList.remove('hiddenSkill12');
    doublethrowskills.classList.remove('hiddenSkill12');
    leapskills.classList.remove('hiddenSkill12');
} else {
    concentrateskills.classList.add('hiddenSkill12');
    doublethrowskills.classList.add('hiddenSkill12');
    leapskills.classList.add('hiddenSkill12');
}

if (concentratevalue > 0 && level > 23) {
    berserkskills.classList.remove('hiddenSkill24');
    leapattackskills.classList.remove('hiddenSkill12');
} else {
    berserkskills.classList.add('hiddenSkill24');
    leapattackskills.classList.add('hiddenSkill12');
}

if (berserkvalue > 0 && level > 29) {
    whirlwindskills.classList.remove('hiddenSkill30');
} else {
    whirlwindskills.classList.add('hiddenSkill30');
}

// Elemental Skills
if (level > 5) {
    moltenbouldercontainer.classList.remove('hiddenSkill6');
    cyclonearmorcontainer.classList.remove('hiddenSkill6');
} else {
    moltenbouldercontainer.classList.add('hiddenSkill6');
    cyclonearmorcontainer.classList.add('hiddenSkill6');
}

if ((firestormvalue > 0 || arcticblastvalue > 0) && level > 11) {
    fissurecontainer.classList.remove('hiddenSkill12');
    twistercontainer.classList.remove('hiddenSkill12');
} else {
    fissurecontainer.classList.add('hiddenSkill12');
    twistercontainer.classList.add('hiddenSkill12');
}

if ((fissurevalue > 0 || twistervalue > 0) && level > 17) {
    gustcontainer.classList.remove('hiddenSkill18');
} else {
    gustcontainer.classList.add('hiddenSkill18');
}

if ((gustvalue > 0) && level > 23) {
    volcanocontainer.classList.remove('hiddenSkill24');
    tornadocontainer.classList.remove('hiddenSkill24');
} else {
    volcanocontainer.classList.add('hiddenSkill24');
    tornadocontainer.classList.add('hiddenSkill24');
}

if ((volcanovalue > 0 || tornadovalue > 0) && level > 29) {
    hurricanecontainer.classList.remove('hiddenSkill30');
    armageddoncontainer.classList.remove('hiddenSkill30');
} else {
    hurricanecontainer.classList.add('hiddenSkill30');
    armageddoncontainer.classList.add('hiddenSkill30');
}

// Shapeshifting Skills
if (level > 5) {
    lycantropycontainer.classList.remove('hiddenSkill6');
    feralragecontainer.classList.remove('hiddenSkill6');
} else {
    lycantropycontainer.classList.add('hiddenSkill6');
    feralragecontainer.classList.add('hiddenSkill6');
}

if ((werewolfvalue > 0 || werebearvalue > 0) && level > 11) {
    maulcontainer.classList.remove('hiddenSkill12');
    hungercontainer.classList.remove('hiddenSkill12');
} else {
    maulcontainer.classList.add('hiddenSkill12');
    hungercontainer.classList.add('hiddenSkill12');
}

if ((maulvalue > 0 || hungervalue > 0) && level > 17) {
    rabiescontainer.classList.remove('hiddenSkill18');
} else {
    rabiescontainer.classList.add('hiddenSkill18');
}

if (rabiesvalue > 0 && level > 23) {
    shockwavecontainer.classList.remove('hiddenSkill24');
    fireclawscontainer.classList.remove('hiddenSkill24');
} else {
    shockwavecontainer.classList.add('hiddenSkill24');
    fireclawscontainer.classList.add('hiddenSkill24');
}

if ((shockwavevalue > 0 || fireclawsvalue > 0) && level > 29) {
    furycontainer.classList.remove('hiddenSkill30');
} else {
    furycontainer.classList.add('hiddenSkill30');
}

// Summoning Skills
if (level > 5) {
    heartofwolverinecontainer.classList.remove('hiddenSkill6');
    
} else {
    heartofwolverinecontainer.classList.add('hiddenSkill6');
    
}

if ((ravenvalue > 0 || heartofwolverinevalue > 0) && level > 11) {
    summonspiritwolfcontainer.classList.remove('hiddenSkill12');
} else {
    summonspiritwolfcontainer.classList.add('hiddenSkill12');
    
}

if ((ravenvalue > 0 || poisoncreepervalue > 0) && level > 11) {
    carrionvinecontainer.classList.remove('hiddenSkill12');
    spiritofbarbscontainer.classList.remove('hiddenSkill12');
} else {
    carrionvinecontainer.classList.add('hiddenSkill12');
    spiritofbarbscontainer.classList.add('hiddenSkill12');
}

if ((carrionvinevalue > 0 || spiritofbarbsvalue > 0) && level > 17) {
    summondirewolfcontainer.classList.remove('hiddenSkill18');
} else {
    summondirewolfcontainer.classList.add('hiddenSkill18');
}

if (summondirewolfvalue > 0 && level > 23) {
    solarcreepercontainer.classList.remove('hiddenSkill24');
    oaksagecontainer.classList.remove('hiddenSkill24');
} else {
    solarcreepercontainer.classList.add('hiddenSkill24');
    oaksagecontainer.classList.add('hiddenSkill24');
}

if ((solarcreepervalue > 0 || oaksagevalue > 0) && level > 29) {
    summongrizzlycontainer.classList.remove('hiddenSkill30');
} else {
    summongrizzlycontainer.classList.add('hiddenSkill30');
}

// Summoning Spells
if (level > 5) {
    claygolemcontainer.classList.remove('hiddenSkill6');
    
    
} else {
    claygolemcontainer.classList.add('hiddenSkill6');
    
}

if (raiseskeletonwarriorvalue > 0 && level > 11) {
  raiseskeletalmagecontainer.classList.remove('hiddenSkill12');
} else {
    raiseskeletalmagecontainer.classList.add('hiddenSkill12');
    
}

if (claygolemvalue > 0 && level > 11) {
  golemmasterycontainer.classList.remove('hiddenSkill12');
} else {
    golemmasterycontainer.classList.add('hiddenSkill12');
    
}


if ((raiseskeletonwarriorvalue > 0 || skeletonmasteryvalue > 0) && level > 11) {
    bloodgolemcontainer.classList.remove('hiddenSkill18');
    // bloodwarpcontainer.classList.remove('hiddenSkill12');
} else {
    bloodgolemcontainer.classList.add('hiddenSkill18');
    // bloodwarpcontainer.classList.add('hiddenSkill12');
}

if ((bloodgolemvalue > 0 || bloodwarpvalue > 0) && level > 17) {
    irongolemcontainer.classList.remove('hiddenSkill18');
} else {
    irongolemcontainer.classList.add('hiddenSkill18');
}

if (irongolemvalue > 0 && level > 23) {
    raiseskeletonarchercontainer.classList.remove('hiddenSkill24');
    firegolemcontainer.classList.remove('hiddenSkill24');
} else {
    raiseskeletonarchercontainer.classList.add('hiddenSkill24');
    firegolemcontainer.classList.add('hiddenSkill24');
}

if ((raiseskeletonarchervalue > 0 || firegolemvalue > 0) && level > 29) {
    revivecontainer.classList.remove('hiddenSkill30');
} else {
    revivecontainer.classList.add('hiddenSkill30');
}

// Poison and Bone Spells
if (level > 5) {
    bonearmorcontainer.classList.remove('hiddenSkill6');
    
    corpseexplosioncontainer.classList.remove('hiddenSkill6');
    bonewallcontainer.classList.remove('hiddenSkill6');
} else {
    bonearmorcontainer.classList.add('hiddenSkill6');
    corpseexplosioncontainer.classList.add('hiddenSkill6');
    bonewallcontainer.classList.add('hiddenSkill6');
}

if ((teethvalue > 0 || poisonstrikevalue > 0) && level > 11) {
    desecratecontainer.classList.remove('hiddenSkill12');
    bonespearcontainer.classList.remove('hiddenSkill12');
} else {
    desecratecontainer.classList.add('hiddenSkill12');
    bonespearcontainer.classList.add('hiddenSkill12');
}

if ((desecratevalue > 0 || bonespearvalue > 0) && level > 17) {
    boneprisoncontainer.classList.remove('hiddenSkill18');
} else {
    boneprisoncontainer.classList.add('hiddenSkill18');
}

if (boneprisonvalue > 0 && level > 23) {
    poisonnovacontainer.classList.remove('hiddenSkill24');
    bonespiritcontainer.classList.remove('hiddenSkill24');
} else {
    poisonnovacontainer.classList.add('hiddenSkill24');
    bonespiritcontainer.classList.add('hiddenSkill24');
}

// Curses
if (level > 5) {
    dimvisioncontainer.classList.remove('hiddenSkill6');
    darkpactcontainer.classList.remove('hiddenSkill6');
    ironmaidencontainer.classList.remove('hiddenSkill6');
} else {
    dimvisioncontainer.classList.add('hiddenSkill6');
    darkpactcontainer.classList.add('hiddenSkill6');
    ironmaidencontainer.classList.add('hiddenSkill6');
}

if ((amplifydamagevalue > 0 || cursemasteryvalue > 0) && level > 11) {
    lifetapcontainer.classList.remove('hiddenSkill12');
    terrorcontainer.classList.remove('hiddenSkill12');
} else {
    lifetapcontainer.classList.add('hiddenSkill12');
    terrorcontainer.classList.add('hiddenSkill12');
}

if ((lifetapvalue > 0 || terrorvalue > 0) && level > 17) {
    weakencontainer.classList.remove('hiddenSkill18');
} else {
    weakencontainer.classList.add('hiddenSkill18');
}

if (weakenvalue > 0 && level > 23) {
    confusecontainer.classList.remove('hiddenSkill24');
    attractcontainer.classList.remove('hiddenSkill24');
} else {
    confusecontainer.classList.add('hiddenSkill24');
    attractcontainer.classList.add('hiddenSkill24');
}

if ((confusevalue > 0 || attractvalue > 0) && level > 29) {
    decrepifycontainer.classList.remove('hiddenSkill30');
    lowerresistcontainer.classList.remove('hiddenSkill30');
} else {
    decrepifycontainer.classList.add('hiddenSkill30');
    lowerresistcontainer.classList.add('hiddenSkill30');
}

// Defensive Auras
if (level > 5) {
    defiancecontainer.classList.remove('hiddenSkill6');
} else {
    defiancecontainer.classList.add('hiddenSkill6');
}

if (prayervalue > 0 && level > 11) {
    cleansingcontainer.classList.remove('hiddenSkill12');
} else {
    cleansingcontainer.classList.add('hiddenSkill12');
}

if (prayervalue > 0 && resistfirevalue > 0 && level > 17) {
    vigorcontainer.classList.remove('hiddenSkill18');
} else {
    vigorcontainer.classList.add('hiddenSkill18');
}

if (prayervalue > 0 && cleansingvalue > 0 && level > 23) {
    meditationcontainer.classList.remove('hiddenSkill24');
} else {
    meditationcontainer.classList.add('hiddenSkill24');
}

if (prayervalue > 0 && cleansingvalue > 0 && meditationvalue > 0 && level > 29) {
    redemptioncontainer.classList.remove('hiddenSkill30');
    salvationcontainer.classList.remove('hiddenSkill30');
} else {
    redemptioncontainer.classList.add('hiddenSkill30');
    salvationcontainer.classList.add('hiddenSkill30');
}


// Offensive Auras
if (level > 5) {
    holyfirecontainer.classList.remove('hiddenSkill6');
    thornscontainer.classList.remove('hiddenSkill6');
} else {
    holyfirecontainer.classList.add('hiddenSkill6');
    thornscontainer.classList.add('hiddenSkill6');
}

if (mightvalue > 0 && level > 11) {
    blessedaimcontainer.classList.remove('hiddenSkill12');
} else {
    blessedaimcontainer.classList.add('hiddenSkill12');
}

if (mightvalue > 0 && blessedaimvalue > 0 && level > 17) {
    concentrationcontainer.classList.remove('hiddenSkill18');
    holyfreezecontainer.classList.remove('hiddenSkill18');
} else {
    concentrationcontainer.classList.add('hiddenSkill18');
    holyfreezecontainer.classList.add('hiddenSkill18');
}

if (concentrationvalue > 0 && level > 23) {
    holyshockcontainer.classList.remove('hiddenSkill24');
    sanctuarycontainer.classList.remove('hiddenSkill24');
} else {
    holyshockcontainer.classList.add('hiddenSkill24');
    sanctuarycontainer.classList.add('hiddenSkill24');
}

if (concentrationvalue > 0 && holyfreezevalue > 0 && level > 29) {
    fanaticismcontainer.classList.remove('hiddenSkill30');
    convictioncontainer.classList.remove('hiddenSkill30');
} else {
    fanaticismcontainer.classList.add('hiddenSkill30');
    convictioncontainer.classList.add('hiddenSkill30');
}

//combatskills pal

if (level > 5) {
    zealcontainer.classList.remove('hiddenSkill6');
    holylightcontainer.classList.remove('hiddenSkill6');
} else {
    zealcontainer.classList.add('hiddenSkill6');
    holylightcontainer.classList.add('hiddenSkill6');
}

if (sacrificevalue > 0 && level > 11) {
    chargecontainer.classList.remove('hiddenSkill12');
} else {
    chargecontainer.classList.add('hiddenSkill12');
}

if (sacrificevalue > 0 && zealvalue > 0 && level > 17) {
    vengeancecontainer.classList.remove('hiddenSkill18');
    blessedhammercontainer.classList.remove('hiddenSkill18');
    holyswordcontainer.classList.remove('hiddenSkill18');
} else {
    vengeancecontainer.classList.add('hiddenSkill18');
    blessedhammercontainer.classList.add('hiddenSkill18');
    holyswordcontainer.classList.add('hiddenSkill18');
}

if (zealvalue > 0 && chargevalue > 0 && level > 23) {
    joustcontainer.classList.remove('hiddenSkill24');
    fistofheavenscontainer.classList.remove('hiddenSkill24');
    holyshieldcontainer.classList.remove('hiddenSkill24');
} else {
    joustcontainer.classList.add('hiddenSkill24');
    fistofheavenscontainer.classList.add('hiddenSkill24');
    holyshieldcontainer.classList.add('hiddenSkill24');
}

if (vengeancevalue > 0 && blessedhammervalue > 0 && holyshieldvalue > 0 && level > 29) {
    holynovacontainer.classList.remove('hiddenSkill30');
} else {
    holynovacontainer.classList.add('hiddenSkill30');
}

// Cold Spells Conditions
if (level > 5) {
    frostnovacontainer.classList.remove('hiddenSkill6');
    iceblastcontainer.classList.remove('hiddenSkill6');
} else {
    frostnovacontainer.classList.add('hiddenSkill6');
    iceblastcontainer.classList.add('hiddenSkill6');
}

if (iceboltvalue > 0 && level > 11) {
    shiverarmorcontainer.classList.remove('hiddenSkill12');
} else {
    shiverarmorcontainer.classList.add('hiddenSkill12');
}

if (iceboltvalue > 0 && iceblastvalue > 0 && level > 17) {
    glacialspikecontainer.classList.remove('hiddenSkill18');
} else {
    glacialspikecontainer.classList.add('hiddenSkill18');
}

if (glacialspikevalue > 0 && level > 23) {
    chillingarmorcontainer.classList.remove('hiddenSkill24');
    icebarragecontainer.classList.remove('hiddenSkill24');
    blizzardcontainer.classList.remove('hiddenSkill24');
} else {
    chillingarmorcontainer.classList.add('hiddenSkill24');
    icebarragecontainer.classList.add('hiddenSkill24');
    blizzardcontainer.classList.add('hiddenSkill24');
}

if (glacialspikevalue > 0 && blizzardvalue > 0 && level > 29) {
    frozenorbcontainer.classList.remove('hiddenSkill30');
    coldmasterycontainer.classList.remove('hiddenSkill30');
} else {
    frozenorbcontainer.classList.add('hiddenSkill30');
    coldmasterycontainer.classList.add('hiddenSkill30');
}

// Lightning Spells Conditions
if (chargedboltvalue > 0 && level > 11) {
    novacontainer.classList.remove('hiddenSkill12');
    lightningcontainer.classList.remove('hiddenSkill12');
} else {
    novacontainer.classList.add('hiddenSkill12');
    lightningcontainer.classList.add('hiddenSkill12');
}

if (staticfieldvalue > 0 && novavalue > 0 && level > 17) {
    teleportcontainer.classList.remove('hiddenSkill18');
} else {
    teleportcontainer.classList.add('hiddenSkill18');
}

if (lightningvalue > 0 && level > 23) {
    chainlightningcontainer.classList.remove('hiddenSkill24');
    thunderstormcontainer.classList.remove('hiddenSkill24');
} else {
    chainlightningcontainer.classList.add('hiddenSkill24');
    thunderstormcontainer.classList.add('hiddenSkill24');
}

if (thunderstormvalue > 0 && chainlightningvalue > 0 && level > 29) {
    energyshieldcontainer.classList.remove('hiddenSkill30');
    lightningmasterycontainer.classList.remove('hiddenSkill30');
} else {
    energyshieldcontainer.classList.add('hiddenSkill30');
    lightningmasterycontainer.classList.add('hiddenSkill30');
}

// Fire Spells Conditions
if (level > 5) {
    blazecontainer.classList.remove('hiddenSkill6');
} else {
    blazecontainer.classList.add('hiddenSkill6');
}

if (fireboltvalue > 0 && level > 11) {
    firewallcontainer.classList.remove('hiddenSkill12');
    fireballcontainer.classList.remove('hiddenSkill12');
    lesserhydracontainer.classList.remove('hiddenSkill12');
} else {
    firewallcontainer.classList.add('hiddenSkill12');
    fireballcontainer.classList.add('hiddenSkill12');
    lesserhydracontainer.classList.add('hiddenSkill12');
}

if (fireballvalue > 0 && warmthvalue > 0 && level > 17) {
    enchantfirecontainer.classList.remove('hiddenSkill18');
} else {
    enchantfirecontainer.classList.add('hiddenSkill18');
}

if (fireballvalue > 0 && enchantfirevalue > 0 && level > 23) {
    meteorcontainer.classList.remove('hiddenSkill24');
    combustioncontainer.classList.remove('hiddenSkill24');
} else {
    meteorcontainer.classList.add('hiddenSkill24');
    combustioncontainer.classList.add('hiddenSkill24');
}

if (meteorvalue > 0 && combustionvalue > 0 && level > 29) {
    hydracontainer.classList.remove('hiddenSkill30');
    firemasterycontainer.classList.remove('hiddenSkill30');
} else {
    hydracontainer.classList.add('hiddenSkill30');
    firemasterycontainer.classList.add('hiddenSkill30');
}

// updateSkillDisplay(); 
   

document.getElementById('lvlValue').addEventListener('input', updateVisibility);



        jabskills.value = jabvalue;
        poisonjavelinskills.value = poisonjavelinvalue;
        javelinandspearmasteryskills.value = javelinandspearmasteryvalue;
        powerstrikeskills.value = powerstrikevalue;
        lightningboltskills.value = lightningboltvalue;
        fendskills.value = fendvalue;
        chargedstrikeskills.value = chargedstrikevalue;
        plaguejavelinskills.value = plaguejavelinvalue;
        lightningstrikeskills.value = lightningstrikevalue;
        lightningfuryskills.value = lightningfuryvalue;
        innersightskills.value = innersightvalue;
        criticalstrikeskills.value = criticalstrikevalue;
        evadeskills.value = evadevalue;
        slowmovementskills.value = slowmovementvalue;
        pierceskills.value = piercevalue;
        dodgeskills.value = dodgevalue;
        decoyskills.value = decoyvalue;
        penetrateskills.value = penetratevalue;
        valkyrieskills.value = valkyrievalue;
        magicarrowskills.value = magicarrowvalue;
        multipleshotskills.value = multipleshotvalue;
        firearrowskills.value = firearrowvalue;
        coldarrowskills.value = coldarrowvalue;
        icearrowskills.value = icearrowvalue;
        guidedarrowskills.value = guidedarrowvalue;
        explodingarrowskills.value = explodingarrowvalue;
        strafeskills.value = strafevalue;
        immolationarrowskills.value = immolationarrowvalue;
        freezingarrowskills.value = freezingarrowvalue;
        tigerstrikeskills.value = tigerstrikevalue;
        cobrastrikeskills.value = cobrastrikevalue;
        phoenixstrikeskills.value = phoenixstrikevalue;
        dragontalonskills.value = dragontalonvalue;
        fistsoffireskills.value = fistsoffirevalue;
        clawsofthunderskills.value = clawsofthundervalue;
        dragonclawskills.value = dragonclawvalue;
        

      };
     
    
   


const skillvalues = document.querySelectorAll('[id$="container"]');
skillvalues.forEach(skillvalue => {
    skillvalue.addEventListener('input', updateVisibility);


    
});
  
   
   
  </script>
   
 
  <script src="SkillHandler.js"></script>
  <script src="skillRestriction.js"></script>
  <script src="skillUpdates.js"></script>
  <script src="DPSSimulator.js"></script>
   <!-- <script src="enhancedDamage.js"></script> -->
  <script src="login.js"></script>
  <script src="achievements.obfuscated.js"></script>
    <!-- <script src="damageCalculator.js"></script> -->
    
      
      
  </script>
<script>

const dragState = {
    isDragging: false,
    currentContainer: null,
    shiftX: 0,
    shiftY: 0
};

function onMouseDown(event) {
    if (event.target.tagName.toLowerCase() === 'input') return;
    if (event.button !== 0) return;
    
    dragState.isDragging = true;
    dragState.currentContainer = event.currentTarget;
    
    dragState.shiftX = event.clientX - dragState.currentContainer.getBoundingClientRect().left;
    dragState.shiftY = event.clientY - dragState.currentContainer.getBoundingClientRect().top;
    
    function moveAt(pageX, pageY) {
        if (!dragState.isDragging) return;
        dragState.currentContainer.style.left = (pageX - dragState.shiftX) + 'px';
        dragState.currentContainer.style.top = (pageY - dragState.shiftY) + 'px';
    }
    
    function onMouseMove(event) {
        if (dragState.isDragging) {
            moveAt(event.pageX, event.pageY);
        }
    }

    function onMouseUp() {
        dragState.isDragging = false;
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
    }

    document.addEventListener('mousemove', onMouseMove);
    document.addEventListener('mouseup', onMouseUp);
    
    
    event.preventDefault();
}

function addDragHandlers() {
    const containers = [
        'javelinandspearskillscontainer',
        'passiveskillscontainer',
        'bowandcrossbowskillscontainer',
        'trapskillscontainer',
        'shadowskillscontainer',
        'martialartskillscontainer',
        'warcriesskillscontainer',
        'combatmasteriesskillscontainer',
        'combatskillsskillscontainer',
        'elementalskillsskillscontainer',
        'shapeshiftingskillsskillscontainer',
        'summoningskillsskillscontainer',
        'poisonandbonespellsskillscontainer',
        'cursesskillscontainer',
        'summoningspellsskillscontainer',
        'offensiveaurasskillscontainer',
        'defensiveaurasskillscontainer',
        'combatpalaskillsskillscontainer',
        'coldspellsskillscontainer',
        'lightningspellsskillscontainer',
        'firespellsskillscontainer'



    ];

    containers.forEach(id => {
        const container = document.getElementById(id);
        if (container) {
            container.style.position = 'absolute';
            container.style.cursor = 'move';
            container.style.zIndex = '1000';
            container.style.userSelect = 'none';
            
            
            container.removeEventListener('mousedown', onMouseDown);
            container.addEventListener('mousedown', onMouseDown);
            
            
        }
    });
}


// Initialize on DOM load
document.addEventListener('DOMContentLoaded', function() {
    // Add CSS styles
    const style = document.createElement('style');
    style.textContent = `
        .skill-container {
            position: absolute !important;
            cursor: move !important;
            user-select: none !important;
            z-index: 1000;
        }
    `;
    document.head.appendChild(style);
    
    // Initialize drag handlers
    addDragHandlers();
});




document.addEventListener('DOMContentLoaded', async function() {
    const skillHandler = new SkillHandler();
    await skillHandler.loadSkillData();

    if (!skillHandler.skillData || Object.keys(skillHandler.skillData).length < 5) {
        
        return;
    }

  

    const skillNameMap = {
        'jabcontainer': 'jab',
        'poisonjavelincontainer': 'poisonJavelin',
        'javelinandspearmasterycontainer': 'javelinAndSpearMastery',
        'powerstrikecontainer': 'powerStrike',
        'lightningboltcontainer': 'lightningBolt',
        'fendcontainer': 'fend',
        'chargedstrikecontainer': 'chargedStrike',
        'plaguejavelincontainer': 'plagueJavelin',
        'lightningstrikecontainer': 'lightningStrike',
        'lightningfurycontainer': 'lightningFury',
        'innersightcontainer': 'innerSight',
        'criticalstrikecontainer': 'criticalStrike',
        'evadecontainer': 'evade',
        'slowmovementcontainer': 'slowMovement',
        'piercecontainer': 'pierce',
        'dodgecontainer': 'dodge',
        'decoycontainer': 'decoy',
        'penetratecontainer': 'penetrate',
        'valkyriecontainer': 'valkyrie',
        'magicarrowcontainer': 'magicArrow',
        'multipleshotcontainer': 'multipleShot',
        'firearrowcontainer': 'fireArrow',
        'coldarrowcontainer': 'coldArrow',
        'icearrowcontainer': 'iceArrow',
        'guidedarrowcontainer': 'guidedArrow',
        'explodingarrowcontainer': 'explodingArrow',
        'strafecontainer': 'strafe',
        'immolationarrowcontainer': 'immolationArrow',
        'freezingarrowcontainer': 'freezingArrow',
        'tigerstrikecontainer': 'tigerStrike',
        'dragontaloncontainer': 'dragonTalon',
        'dragonclawcontainer': 'dragonClaw',
        'fistsoffirecontainer': 'fistsOfFire',
        'cobrastrikecontainer': 'cobraStrike',
        'clawsofthunderwcontainer': 'clawsOfThunder',
        'dragontailcontainer': 'dragonTail',
        'dragonflightcontainer': 'dragonFlight',
        'bladesoficecontainer': 'bladesOfIce',
        'phoenixstrikecontainer': 'phoenixStrike',
        'psychichammercontainer': 'psychicHammer',
        'mindblastcontainer': 'mindBlast',
        'fireblastcontainer': 'fireBlast',
        'shockwebcontainer': 'shockWeb',
        'bladesentinelcontainer': 'bladeSentinel',
        'chargedboltsentrycontainer': 'chargedBoltSentry',
        'wakeoffirecontainer': 'wakeOfFury',
        'bladefurycontainer': 'bladeFury',
        'bladeshieldcontainer': 'bladeShield',
        'lightningsentrycontainer': 'lightningSentry',
        'wakeofinfernocontainer': 'wakeOfInferno',
        'chainlightningsentrycontainer': 'chainLightningSentry',
        'howlcontainer': 'howl',
        'findpotioncontainer': 'findPotion',
        'shoutcontainer': 'shout',
        'raiseskeletonwarriorcontainer': 'raiseSkeletonWarrior',
        'skeletonmasterycontainer': 'skeletonMastery',
        'claygolemcontainer': 'clayGolem',
        'raiseskeletalmagecontainer': 'raiseSkeleton',
        'golemmasterycontainer': 'golemMastery',
        'bloodgolemcontainer': 'bloodGolem',
        'bloodwarpcontainer': 'bloodWarp',
        'irongolemcontainer': 'ironGolem',
        'raiseskeletonarchercontainer': 'raiseSkeletonArcher',
        'firegolemcontainer': 'fireGolem',
        'revivecontainer': 'revive',
        'teethcontainer': 'teeth',
        'poisonstrikecontainer': 'poisonStrike',
        'bonearmorcontainer': 'boneArmor',
        'corpseexplosioncontainer': 'corpseExplosion',
        'bonewallcontainer': 'boneWall',
        'desecratecontainer': 'desecrate',
        'bonespearcontainer': 'boneSpear',
        'boneprisoncontainer': 'bonePrison',
        'poisonnovacontainer': 'poisonNova',
        'bonespiritcontainer': 'boneSpirit',
        'amplifydamagecontainer': 'amplifyDamage',
        'cursemasterycontainer': 'curseMastery',
        'dimvisioncontainer': 'dimVision',
        'darkpactcontainer': 'darkPact',
        'ironmaidencontainer': 'ironMaiden',
        'lifetapcontainer': 'lifeTap',
        'terrorcontainer': 'terror',
        'weakencontainer': 'weaken',
        'confusecontainer': 'confuse',
        'attractcontainer': 'attract',
        'decrepifycontainer': 'decrepify',
        'lowerresistcontainer': 'lowerResist',
        'defiancecontainer': 'defiance',
        'prayervalue': 'prayer',
        'cleansingcontainer': 'cleansing',
        'vigorcontainer': 'vigor',
        'meditationcontainer': 'meditation',
        'redemptioncontainer': 'redemption',
        'salvationcontainer': 'salvation',
        'holyfirecontainer': 'holyfire',
        'thornscontainer': 'thorns',
        'blessedaimcontainer': 'blesseaim',
        'concentrationcontainer': 'concentration',
        'holyfreezecontainer': 'holyfreeze',
        'holyshockcontainer': 'holyshock',
        'sanctuarycontainer': 'sanctuary',
        'fanaticismcontainer': 'fanaticism',
        'convictioncontainer': 'conviction',
        'zealcontainer': 'zeal',
        'holylightcontainer': 'holylight',
        'sacrificecontainer': 'sacrifice',
        'chargecontainer': 'charge',
        'vengeancecontainer': 'vengeance',
        'blessedhammercontainer': 'blessedhammer',
        'holyswordcontainer': 'holysword',
        'joustcontainer': 'joust',
        'fistofheavenscontainer': 'fistofheavens',
        'holyshieldcontainer': 'holyshield',
        'holynovacontainer': 'holynova'

           

    };


    function updateDamageCalculations() {
      const skillHandler = new SkillHandler(); // Ensure a fresh instance
    const selectedSkillContainer = document.getElementById('left-skill')?.value;
    const selectedSkillName = skillNameMap[selectedSkillContainer];
    const currentSkillLevel = parseInt(document.getElementById(selectedSkillContainer)?.value || 0);
    const allSkillsValue = parseInt(document.getElementById('allskillscontainer').textContent || 
                            document.getElementById('allskillscontainer').value || 0);
  const totalSkillLevel = currentSkillLevel + allSkillsValue;

  const skillInfo = skillHandler.getSkillInfo(selectedSkillName, totalSkillLevel);
    
    let baseMinDmg = parseInt(document.getElementById('onehandmindmgcontainer')?.textContent || 0);
    let baseMaxDmg = parseInt(document.getElementById('onehandmaxdmgcontainer')?.textContent || 0);
    let totalStr = parseInt(document.getElementById('straccr')?.textContent || 0);
    
    let totalEDMG = 0;
    ['helms-dropdown', 'armors-dropdown', 'offs-dropdown', 
     'gloves-dropdown', 'belts-dropdown', 'boots-dropdown', 'ringsone-dropdown', 
     'ringstwo-dropdown', 'amulets-dropdown'].forEach(id => {
        const item = itemList[document.getElementById(id)?.value];
        if (item?.properties?.edmg) {
            totalEDMG += item.properties.edmg / 100;
        }
    });

    const critMultiplier = parseFloat(document.getElementById('crithitmultipliercontainer')?.textContent || 1);

    
    
    // Get flat damage additions
    let totalFlatColdDmg = parseInt(document.getElementById('flatcoldcontainer')?.textContent || 0);
    let totalFlatLightDmg = parseInt(document.getElementById('flatlightcontainer')?.textContent || 0);
    let totalFlatFireDmg = parseInt(document.getElementById('flatfirecontainer')?.textContent || 0);
    let totalFlatMagicDmg = parseInt(document.getElementById('flatmagiccontainer')?.textContent || 0);
    let totalFlatPoisonDmg = parseInt(document.getElementById('flatpoisoncontainer')?.textContent || 0);
    if (skillInfo && skillInfo.damage) {
        // Define skill groups
        const lightningSkills = ['powerStrike', 'lightningBolt', 'chargedStrike', 'lightningStrike', 'lightningFury'];
        const poisonSkills = ['poisonJavelin', 'plagueJavelin'];
        const coldSkills = ['coldArrow', 'iceArrow', 'freezingArrow'];
        const fireSkills = ['fireArrow', 'explodingArrow', 'immolationArrow'];
        const magicSkills = ['magicArrow'];

        // Handle different damage types
        if (poisonSkills.includes(selectedSkillName)) {
            const poisonMin = Math.floor(skillInfo.damage.min * (1 + skillInfo.damage.synergyBonus/100));
            const poisonMax = Math.floor(skillInfo.damage.max * (1 + skillInfo.damage.synergyBonus/100));
            document.getElementById('damageOutput').textContent = 
                `${poisonMin}-${poisonMax} Poison Damage`;
        }
        else if (lightningSkills.includes(selectedSkillName)) {
            const lightningMin = Math.floor(skillInfo.damage.min * (1 + skillInfo.damage.synergyBonus/100));
            const lightningMax = Math.floor(skillInfo.damage.max * (1 + skillInfo.damage.synergyBonus/100));
            document.getElementById('damageOutput').textContent = 
                `${lightningMin}-${lightningMax} Lightning Damage`;
        }
        else if (coldSkills.includes(selectedSkillName)) {
            const coldMin = Math.floor(skillInfo.damage.min * (1 + skillInfo.damage.synergyBonus/100));
            const coldMax = Math.floor(skillInfo.damage.max * (1 + skillInfo.damage.synergyBonus/100));
            document.getElementById('damageOutput').textContent = 
                `${coldMin}-${coldMax} Cold Damage`;
        }
        else if (fireSkills.includes(selectedSkillName)) {
            const fireMin = Math.floor(skillInfo.damage.min * (1 + skillInfo.damage.synergyBonus/100));
            const fireMax = Math.floor(skillInfo.damage.max * (1 + skillInfo.damage.synergyBonus/100));
            document.getElementById('damageOutput').textContent = 
                `${fireMin}-${fireMax} Fire Damage`;
        }
        else if (magicSkills.includes(selectedSkillName)) {
            const magicMin = Math.floor(skillInfo.damage.min * (1 + skillInfo.damage.synergyBonus/100));
            const magicMax = Math.floor(skillInfo.damage.max * (1 + skillInfo.damage.synergyBonus/100));
            document.getElementById('damageOutput').textContent = 
                `${magicMin}-${magicMax} Magic Damage`;
        }

        else {
                // Physical/enhanced damage skills with flat damage additions
                let totalMinDmg = baseMinDmg;
                let totalMaxDmg = baseMaxDmg;
                
                if (typeof skillInfo.damage === 'object') {
                  totalMinDmg = Math.floor((baseMinDmg * (1 + skillInfo.damage.min/100 + skillInfo.damage.synergyBonus/100 + totalStr * 1.1/100 + totalEDMG) * critMultiplier));
                  totalMaxDmg = Math.floor((baseMaxDmg * (1 + skillInfo.damage.min/100 + skillInfo.damage.synergyBonus/100 + totalStr * 1.1/100 + totalEDMG) * critMultiplier));
                }
                
                // Add flat damages
                totalMinDmg = Math.floor(totalMinDmg + totalFlatColdDmg + totalFlatFireDmg + totalFlatLightDmg + totalFlatMagicDmg + totalFlatPoisonDmg);
                totalMaxDmg = Math.floor(totalMaxDmg + totalFlatColdDmg + totalFlatFireDmg + totalFlatLightDmg + totalFlatMagicDmg + totalFlatPoisonDmg);
                
                document.getElementById('damageOutput').textContent = `${totalMinDmg}-${totalMaxDmg} Phys/Ele Damage`;
                
        }

        // Update other displays
        document.getElementById('jabValueOutput').textContent = totalSkillLevel;
        document.getElementById('attackRatingOutput').textContent = `${skillInfo.attackRating || 0}%`;
        document.getElementById('manaCostOutput').textContent = (skillInfo.manaCost || 0).toFixed(1);
    }
}


function setupEquipmentListeners() {
    const equipmentSlots = ['helms-dropdown', 'armors-dropdown', 'weapons-dropdown', 'offs-dropdown', 'gloves-dropdown', 'belts-dropdown', 'boots-dropdown', 'ringsone-dropdown', 'ringstwo-dropdown', 'amulets-dropdown'];
    const strInput = document.getElementById('str');
    
    // Remove existing listeners if any
    equipmentSlots.forEach(id => {
        const element = document.getElementById(id);
        element.replaceWith(element.cloneNode(true));
    });
    
    // Add optimized listeners with debouncing
    let debounceTimer;
    const debouncedUpdate = () => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => {
            updateVisibility();
            updateDamageCalculations();
            PropertyManager.updateProperties();
        }, 100);
    };

    // Add new listeners
    equipmentSlots.forEach(id => {
        document.getElementById(id).addEventListener('change', debouncedUpdate);
    });
    strInput.addEventListener('input', debouncedUpdate);
}

// Call this on page load
document.addEventListener('DOMContentLoaded', setupEquipmentListeners);


// Ensure event binding
document.getElementById('left-skill').addEventListener('change', updateDamageCalculations);
document.querySelectorAll('[id$="skillscontainer"] input[type="number"]')
    .forEach(input => input.addEventListener('input', updateDamageCalculations));
    
  
    {



        const selectedSkillContainer = document.getElementById('left-skill').value;
        const skillInput = document.getElementById(selectedSkillContainer);
        
        if (!skillInput) return;

        const skillLevel = parseInt(skillInput.value) || 0;
        const skillName = skillNameMap[selectedSkillContainer];
        
        const allSkillsValue = parseInt(document.getElementById('allskillscontainer').textContent || 
                                      document.getElementById('allskillscontainer').value || 0);
        const totalSkillLevel = skillLevel + allSkillsValue;

        //const criticalhitValue =  parseInt(document.getElementById('criticalhitcontainer').value || 0);
        const javelinandspearmasteryLevel = parseInt(document.getElementById('javelinandspearmasterycontainer').value || 0);
  let criticalHitValue = 0;

  if (javelinandspearmasteryLevel > 0) {
    const javelinandspearmasteryInfo = skillHandler.getSkillInfo('javelinAndSpearMastery', javelinandspearmasteryLevel);
    criticalHitValue = javelinandspearmasteryInfo?.criticalChance || 0;
  }

  // Only update if the current value is different
  const currentCritValue = parseInt(document.getElementById('criticalhitcontainer').value || 0);
  if (currentCritValue !== criticalHitValue) {
    document.getElementById('criticalhitcontainer').value = criticalHitValue;
  }

// Get deadly strike value correctly
deadlyStrikeValue = parseFloat(document.getElementById('deadlystrikecontainer').value || 0);
weaponMasteryValue = parseFloat(document.getElementById('weaponmasterycontainer').value || 0);
const totalDeadlyStrike = deadlyStrikeValue / 100;
const totalCriticalHit = criticalHitValue / 100;
const totalWeaponMastery = weaponMasteryValue / 100;

const totalCritMultiplier = 0.5 * (1 - (1 - totalDeadlyStrike) * (1 - totalCriticalHit) * (1 - totalWeaponMastery)) + 1;
document.getElementById('crithitmultipliercontainer').value = totalCritMultiplier.toFixed(3);



   
    const deadlyStrikeElement = document.getElementById('deadlystrikecontainer');
    const criticalHitElement = document.getElementById('criticalhitcontainer');
    const weaponMasteryElement = document.getElementById('weaponmasterycontainer');
// Listen for changes to deadly strike
deadlyStrikeElement.addEventListener('input', UpdateDamageCalculations());
criticalHitElement.addEventListener('input', UpdateDamageCalculations());   
weaponMasteryElement.addEventListener('input', UpdateDamageCalculations());

  
    updateDamageCalculations();





        if (skillLevel === 0) {
            document.getElementById('jabValueOutput').textContent = '0';
            document.getElementById('attackRatingOutput').textContent = '0%';
            document.getElementById('damageOutput').textContent = '0';
            document.getElementById('manaCostOutput').textContent = '0';
            return;
        }

        const skillInfo = skillHandler.getSkillInfo(skillName, totalSkillLevel);
        
        if (skillInfo) {
            document.getElementById('jabValueOutput').textContent = totalSkillLevel;
            document.getElementById('attackRatingOutput').textContent = `${skillInfo.attackRating || 0}%`;
            document.getElementById('damageOutput').textContent = getSkillDamage(skillInfo, skillName);
            document.getElementById('manaCostOutput').textContent = skillInfo.manaCost?.toFixed(1) || 0;
        }
    }

    
    const skillInputs = document.querySelectorAll('#javelinandspearskillscontainer input[type="number"], #passiveskillscontainer input[type="number"], #bowandcrossbowskillscontainer input[type="number"], #trapskillscontainer input[type="number"], #shadowskillscontainer input[type="number"], #martialartskillscontainer input[type="number"], #warcriesskillscontainer input[type="number"], #combatmasteriesskillscontainer input[type="number"], #combatskillsskillscontainer input[type="number"], #elementalskillsskillscontainer input[type="number"], #shapeshiftingskillsskillscontainer input[type="number"], #summoningskillsskillscontainer input[type="number"], #poisonandbonespellsskillscontainer input[type="number"], #cursesskillscontainer input[type="number"], #summoningspellsskillscontainer input[type="number"], #offensiveaurasskillscontainer input[type="number"], #defensiveaurasskillscontainer input[type="number"], #combatpalaskillsskillscontainer input[type="number"], #coldspellsskillscontainer input[type="number"], #lightningspellsskillscontainer input[type="number"], #firespellsskillscontainer input[type="number"]');

function showWarning(message, isError = false) {
    const warningDiv = document.createElement('div');
    warningDiv.style.position = 'fixed';
    warningDiv.style.top = '10px';
    warningDiv.style.right = '10px';
    warningDiv.style.padding = '10px';
    warningDiv.style.backgroundColor = isError ? '#ff6b6b' : '#ffd93d';
    warningDiv.style.color = isError ? 'white' : 'black';
    warningDiv.style.borderRadius = '5px';
    warningDiv.textContent = message;
    document.body.appendChild(warningDiv);

    setTimeout(() => warningDiv.remove(), 3000);
}

// Separate level change listener
document.getElementById('lvlValue').addEventListener('input', function() {
    checkSkillPoints();
});

function checkSkillPoints() {
    const currentLevel = parseInt(document.getElementById('lvlValue').value) || 1;
    const maxPoints = (currentLevel) + 11;
    
    let totalPointsUsed = 0;

    const allSkillInputs = document.querySelectorAll(`
            #javelinandspearskillscontainer input[type="number"], 
            #passiveskillscontainer input[type="number"], 
            #bowandcrossbowskillscontainer input[type="number"],
            #trapskillscontainer input[type="number"],
            #shadowskillscontainer input[type="number"],
            #martialartskillscontainer input[type="number"],
            #warcriesskillscontainer input[type="number"],
            #combatmasteriesskillscontainer input[type="number"],
            #combatskillsskillscontainer input[type="number"],
            #elementalskillsskillscontainer input[type="number"],
            #shapeshiftingskillsskillscontainer input[type="number"],
            #summoningskillsskillscontainer input[type="number"],
            #poisonandbonespellsskillscontainer input[type="number"],
            #cursesskillscontainer input[type="number"],
            #summoningspellsskillscontainer input[type="number"],
            #offensiveaurasskillscontainer input[type="number"],
            #defensiveaurasskillscontainer input[type="number"],
            #combatpalaskillsskillscontainer input[type="number"],
            #coldspellsskillscontainer input[type="number"],
            #lightningspellsskillscontainer input[type="number"],
            #firespellsskillscontainer input[type="number"]

        `);

    allSkillInputs.forEach(skillInput => {
            totalPointsUsed += parseInt(skillInput.value || 0);
        });
      
    const remainingPoints = maxPoints - totalPointsUsed;
    
    document.addEventListener('DOMContentLoaded', function() {
    const skillInputs = document.querySelectorAll('[id$="skillscontainer"] input[type="number"]');
    
    skillInputs.forEach(input => {
        // Add event listeners for both input and keydown events
        input.addEventListener('input', handleSkillInput);
        input.addEventListener('keydown', handleKeyDown);
        input.addEventListener('paste', handlePaste);
    });
});


}

skillInputs.forEach(input => {
    input.addEventListener('input', function() {
        const currentInput = {
            inputId: input.id,
            parentContainer: input.closest('div').id,
            value: input.value
        };
        

        // Check points limit
        if (!checkSkillPoints()) {
            input.value = parseInt(input.value) - 1;
            return;
        }

        const selectedSkillContainer = document.getElementById('left-skill')?.value;
        const selectedSkillName = skillNameMap[selectedSkillContainer];
        
       

        if (!selectedSkillContainer || !selectedSkillName) {
            
            return;
        }
        updateDamageCalculations();

        // Update logic
        const selectedSkill = skillHandler.skillData[selectedSkillName];
        if (input.id === selectedSkillContainer || 
            (selectedSkill?.synergies?.some(syn => (syn.split(',')[0] + 'container') === input.id)) ||
            (skillHandler.skillData[skillNameMap[input.id]]?.synergies?.some(syn => 
                (syn.split(',')[0] + 'container') === selectedSkillContainer))) {
            updateDamageCalculations();
        }
    });
});

    const skillSelect = document.getElementById('left-skill');
    skillSelect.addEventListener('change', updateDamageCalculations);

    const allSkillsContainer = document.getElementById('allskillscontainer');
    const observer = new MutationObserver(updateDamageCalculations);
    observer.observe(allSkillsContainer, { 
        childList: true, 
        characterData: true, 
        subtree: true,
        characterDataOldValue: true 
    });

    allSkillsContainer.addEventListener('change', updateDamageCalculations);
    
    updateDamageCalculations();
  });


  document.addEventListener('DOMContentLoaded', function() {
    const defaultClass = 'amazon';
    updateSkillDropdown(defaultClass);
    switchSkillContainers(defaultClass);
});

document.querySelector('.menucontainer').addEventListener('change', function(e) {
    const selectedClass = e.target.value.toLowerCase();
    resetAllSkillInputs();
    switchSkillContainers(selectedClass);
    updateSkillDropdown(selectedClass);
    
    const selectedSkill = document.getElementById('left-skill').value;
    if (selectedSkill) {
        document.getElementById(selectedSkill).value = "0";
    }
});
function resetAllSkillInputs() {
  const levelInput = document.getElementById('lvlValue');
    if (levelInput) {
        levelInput.value = "1";
    }
    // Reset Amazon skills
    const amazonSkills = document.querySelectorAll('#javelinandspearskillscontainer input[type="number"], #passiveskillscontainer input[type="number"], #bowandcrossbowskillscontainer input[type="number"]');
    
    // Reset Assassin skills
    const assassinSkills = document.querySelectorAll('#trapskillscontainer input[type="number"], #shadowskillscontainer input[type="number"], #martialartskillscontainer input[type="number"]');

    const barbarianSkills = document.querySelectorAll('#warcriesskillscontainer input[type="number"], #combatmasteriesskillscontainer input[type="number"], #combatskillsskillscontainer input[type="number"]');
    const druidSkills = document.querySelectorAll('#elementalskillsskillscontainer input[type="number"], #shapeshiftingskillsskillscontainer input[type="number"], #summoningskillsskillscontainer input[type="number"]');
    const necromancerSkills = document.querySelectorAll('#poisonandbonespellsskillscontainer input[type="number"], #cursesskillscontainer input[type="number"], #summoningspellsskillscontainer input[type="number"]');
    const paladinSkills = document.querySelectorAll('#offensiveaurasskillscontainer input[type="number"], #defensiveaurasskillscontainer input[type="number"], #combatpalaskillsskillscontainer input[type="number"]');
    const sorceressSkills = document.querySelectorAll('#coldspellsskillscontainer input[type="number"], #lightningspellsskillscontainer input[type="number"], #firespellsskillscontainer input[type="number"]');
    // Reset all inputs
    [...amazonSkills, ...assassinSkills, ...barbarianSkills, ...druidSkills, ...necromancerSkills, ...paladinSkills, ...sorceressSkills].forEach(input => {
        input.value = "0";
    });

    // Reset display values
    document.getElementById('jabValueOutput').textContent = '0';
    document.getElementById('attackRatingOutput').textContent = '0%';
    document.getElementById('damageOutput').textContent = '0';
    document.getElementById('manaCostOutput').textContent = '0';
    
    
}

function updateSkillDropdown(className) {
    const skillDropdown = document.getElementById('left-skill');
    if (!skillDropdown) {
        console.error('Dropdown not found');
        return;
    }

    skillDropdown.innerHTML = '';

    const skillOptions = {
        amazon: [
            { value: 'jabcontainer', text: 'Jab' },
            { value: 'poisonjavelincontainer', text: 'Poison Javelin' },
            { value: 'powerstrikecontainer', text: 'Power Strike' },
            { value: 'lightningboltcontainer', text: 'Lightning Bolt' },
            { value: 'fendcontainer', text: 'Fend' },
            { value: 'chargedstrikecontainer', text: 'Charged Strike' },
            { value: 'plaguejavelincontainer', text: 'Plague Javelin' },
            { value: 'lightningstrikecontainer', text: 'Lightning Strike' },
            { value: 'lightningfurycontainer', text: 'Lightning Fury' },
            { value: 'decoycontainer', text: 'Decoy' },
            { value: 'valkyriecontainer', text: 'Valkyrie' },
            { value: 'magicarrowcontainer', text: 'Magic Arrow' },
            { value: 'multipleshotcontainer', text: 'Multiple Shot' },
            { value: 'firearrowcontainer', text: 'Fire Arrow' },
            { value: 'coldarrowcontainer', text: 'Cold Arrow' },
            { value: 'icearrowcontainer', text: 'Ice Arrow' },
            { value: 'guidedarrowcontainer', text: 'Guided Arrow' },
            { value: 'explodingarrowcontainer', text: 'Exploding Arrow' },
            { value: 'strafecontainer', text: 'Strafe' },
            { value: 'immolationarrowcontainer', text: 'Immolation Arrow' },
            { value: 'freezingarrowcontainer', text: 'Freezing Arrow' }
        ],
        assassin: [
            { value: 'tigerstrikecontainer', text: 'Tiger Strike' },
            { value: 'dragontaloncontainer', text: 'Dragon Talon' },
            { value: 'dragonclawcontainer', text: 'Dragon Claw' },
            { value: 'fistsoffirecontainer', text: 'Fists of Fire' },
            { value: 'cobrastrikecontainer', text: 'Cobra Strike' },
            { value: 'clawsofthundercontainer', text: 'Claws of Thunder' },
            { value: 'dragontailcontainer', text: 'Dragon Tail' },
            { value: 'dragonflightcontainer', text: 'Dragon Flight' },
            { value: 'bladesoficecontainer', text: 'Blades of Ice' },
            { value: 'phoenixstrikecontainer', text: 'Phoenix Strike' },
            { value: 'psychichammercontainer', text: 'Psychic Hammer' },
            { value: 'mindblastcontainer', text: 'Mind Blast' },
            { value: 'fireblastcontainer', text: 'Fire Blast' },
            { value: 'shockwebcontainer', text: 'Shock Web' },
            { value: 'bladesentinelcontainer', text: 'Blade Sentinel' },
            { value: 'chargedboltsentrycontainer', text: 'Charged Bolt Sentry' },
            { value: 'wakeoffirecontainer', text: 'Wake of Fire' },
            { value: 'bladefurycontainer', text: 'Blade Fury' },
            { value: 'lightningsentrycontainer', text: 'Lightning Sentry' },
            { value: 'wakeofinfernocontainer', text: 'Wake of Inferno' },
            { value: 'chainlightningsentrycontainer', text: 'Chain Lightning Sentry' },
            { value: 'deathsentrycontainer', text: 'Death Sentry' }
        ],
        barbarian: [
            { value: 'warcrycontainer', text: 'War Cry' },
            { value: 'bashcontainer', text: 'Bash' },
            { value: 'doubleswingcontainer', text: 'Double Swing' },
            { value: 'frenzycontainer', text: 'Frenzy' },
            { value: 'stuncontainer', text: 'Stun' },
            { value: 'concentratecontainer', text: 'Concentrate' },
            { value: 'doublethrowcontainer', text: 'Double Throw' },
            { value: 'leapattackcontainer', text: 'Leap Attack' },
            { value: 'berserkcontainer', text: 'Berserk' },
            { value: 'whirlwindcontainer', text: 'Whirlwind' }
        ],
        druid: [
            { value: 'firestormcontainer', text: 'Firestorm' },
            { value: 'arcticblastcontainer', text: 'Arctic Blast' },
            { value: 'moltenbouldercontainer', text: 'Molten Boulder' },
            { value: 'fissurecontainer', text: 'Fissure' },
            { value: 'volcanocontainer', text: 'Volcano' },
            { value: 'armageddoncontainer', text: 'Armageddon' },
            { value: 'twistercontainer', text: 'Twister' },
            { value: 'tornadocontainer', text: 'Tornado' },
            { value: 'hurricanecontainer', text: 'Hurricane' },
            
            { value: 'furycontainer', text: 'Fury' },
            { value: 'fireclawscontainer', text: 'Fire Claws' },
            { value: 'rabiescontainer', text: 'Rabies' },
            { value: 'feralragecontainer', text: 'Feral Rage' },
            { value: 'maulcontainer', text: 'Maul' },
            { value: 'hungercontainer', text: 'Hunger' },
            { value: 'shockwavecontainer', text: 'Shock Wave' },

            { value: 'ravencontainer', text: 'Raven' },
            { value: 'summonspiritwolfcontainer', text: 'Summon Spirit Wolf' },
            { value: 'summondirewolfcontainer', text: 'Summon Dire Wolf' },
            { value: 'summongrizzlycontainer', text: 'Summon Grizzly' },
            { value: 'poisoncreepercontainer', text: 'Poison Creeper' }
        ],
        necromancer: [
            { value: 'amplifydamagecontainer', text: 'Amplify Damage' },
            { value: 'teethcontainer', text: 'Teeth' },
            { value: 'claygolemcontainer', text: 'Clay Golem' },
            { value: 'ironmaidencontainer', text: 'Iron Maiden' },
            { value: 'terrorcontainer', text: 'Terror' },
                { value: 'boneprisoncontainer', text: 'Bone Prison' },
                { value: 'decrepifycontainer', text: 'Decrepify' },
                { value: 'darkpactcontainer', text: 'Dark Pact' },
                
                { value: 'poisonnovacontainer', text: 'Poison Nova' },
                
                { value: 'poisonexplosioncontainer', text: 'Poison Explosion' },
                { value: 'bonespearcontainer', text: 'Bone Spear' },
                { value: 'bonespiritcontainer', text: 'Bone Spirit' },
                { value: 'corpseexplosioncontainer', text: 'Corpse Explosion' },
                { value: 'bloodgolemcontainer', text: 'Blood Golem' }
        ],
        paladin: [
                { value: 'sacrificecontainer', text: 'Sacrifice' },
                { value: 'smitecontainer', text: 'Smite' },
                { value: 'holyboltcontainer', text: 'Holy Bolt' },
                { value: 'zealcontainer', text: 'Zeal' },
                { value: 'chargecontainer', text: 'Charge' },
                { value: 'vengeancecontainer', text: 'Vengeance' },
                    { value: 'blessedhammercontainer', text: 'Blessed Hammer' },
                    { value: 'conversioncontainer', text: 'Conversion' },
                    { value: 'holyshieldcontainer', text: 'Holy Shield' },
                    
                    { value: 'fistoftheheavenscontainer', text: 'Fist of the Heavens' },
                    
                    { value: 'holyfirecontainer', text: 'Holy Fire' },
                    { value: 'holyfreezecontainer', text: 'Holy Freeze' },
                    { value: 'holyshockcontainer', text: 'Holy Shock' }
                    
                    ],
                    sorceress: [
                { value: 'iceboltcontainer', text: 'Ice Bolt' },
                { value: 'frostnovacontainer', text: 'Frost Nova' },
                { value: 'iceblasttcontainer', text: 'Ice Blast' }
                ]
    };

    const options = skillOptions[className] || [];
    options.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.text;
        skillDropdown.appendChild(option);
    });

    // Force select first option and trigger change event
    if (skillDropdown.options.length > 0) {
        skillDropdown.selectedIndex = 0;
        skillDropdown.dispatchEvent(new Event('change'));
    }
}

function switchSkillContainers(className) {
    // Hide all skill containers first
    const allSkillContainers = [
        document.getElementById('javelinandspearskillscontainer'),
        document.getElementById('passiveskillscontainer'),
        document.getElementById('bowandcrossbowskillscontainer'),
        document.getElementById('trapskillscontainer'),
        document.getElementById('shadowskillscontainer'),
        document.getElementById('martialartskillscontainer'),
        document.getElementById('warcriesskillscontainer'),
        document.getElementById('combatmasteriesskillscontainer'),
        document.getElementById('combatskillsskillscontainer'),
        document.getElementById('elementalskillsskillscontainer'),
        document.getElementById('shapeshiftingskillsskillscontainer'),
        document.getElementById('summoningskillsskillscontainer'),
        document.getElementById('poisonandbonespellsskillscontainer'),
        document.getElementById('cursesskillscontainer'),
        document.getElementById('summoningspellsskillscontainer'),
        document.getElementById('offensiveaurasskillscontainer'),
        document.getElementById('defensiveaurasskillscontainer'),
        document.getElementById('combatpalaskillsskillscontainer'),
        document.getElementById('coldspellsskillscontainer'),
        document.getElementById('lightningspellsskillscontainer'),
        document.getElementById('firespellsskillscontainer')
    ];

    allSkillContainers.forEach(container => {
        if (container) {
            container.style.display = 'none';
        }
    });

    // Show containers based on class
    switch(className.toLowerCase()) {
        case 'amazon':
            document.getElementById('javelinandspearskillscontainer').style.display = 'block';
            document.getElementById('passiveskillscontainer').style.display = 'block';
            document.getElementById('bowandcrossbowskillscontainer').style.display = 'block';
            break;
        case 'assassin':
            document.getElementById('trapskillscontainer').style.display = 'block';
            document.getElementById('shadowskillscontainer').style.display = 'block';
            document.getElementById('martialartskillscontainer').style.display = 'block';
            break;
        case 'barbarian':
            document.getElementById('warcriesskillscontainer').style.display = 'block';
            document.getElementById('combatmasteriesskillscontainer').style.display = 'block';
            document.getElementById('combatskillsskillscontainer').style.display = 'block';
            break;
        case 'druid':
            document.getElementById('elementalskillsskillscontainer').style.display = 'block';
            document.getElementById('shapeshiftingskillsskillscontainer').style.display = 'block';
            document.getElementById('summoningskillsskillscontainer').style.display = 'block';
            break;
        case 'necromancer':
            document.getElementById('poisonandbonespellsskillscontainer').style.display = 'block';
            document.getElementById('cursesskillscontainer').style.display = 'block';
            document.getElementById('summoningspellsskillscontainer').style.display = 'block';
            break;
        case 'paladin':
            document.getElementById('offensiveaurasskillscontainer').style.display = 'block';
            document.getElementById('defensiveaurasskillscontainer').style.display = 'block';
            document.getElementById('combatpalaskillsskillscontainer').style.display = 'block';
            break;
        case 'sorceress':
            document.getElementById('coldspellsskillscontainer').style.display = 'block';
            document.getElementById('lightningspellsskillscontainer').style.display = 'block';
            document.getElementById('firespellsskillscontainer').style.display = 'block';
            break;
    }
}





const inventory = document.querySelector('.inventorycontainer');
const modal = document.getElementById('charmModal');
const closeModal = document.getElementById('closeModal');
let selectedSlot = null;
let draggedCharm = null;

function isSlotAvailable(position, charmType) {
  const row = Math.floor(position / 10);
  const slotsNeeded = charmType === 'grand-charm' ? 3 : charmType === 'large-charm' ? 2 : 1;
  
  for(let i = 0; i < slotsNeeded; i++) {
    const checkPosition = position + (i * 10);
    if (checkPosition >= 40) return false;
    
    const slot = inventory.children[checkPosition];
    if (slot && (slot.textContent !== '' && slot.textContent !== 'X')) {
      return false;
    }
  }

  const currentSlot = inventory.children[position];
  return !(currentSlot && currentSlot.textContent === 'X');
}

function markSlotsBelow(position, charmType) {
  const row = Math.floor(position / 10);
  
  if (charmType === 'large-charm' && row < 3) {
    const slotBelow = inventory.children[position + 10];
    if (slotBelow) {
      slotBelow.textContent = 'X';
      slotBelow.style.color = 'red';
      slotBelow.style.backgroundColor = 'rgba(56, 189, 85, 0.5)';
      slotBelow.style.fontSize = '24px';
    }
  }
  else if (charmType === 'grand-charm' && row < 2) {
    const slot1Below = inventory.children[position + 10];
    const slot2Below = inventory.children[position + 20];
    if (slot1Below) {
      slot1Below.textContent = 'X';
      slot1Below.style.color = 'red';
      slot1Below.style.backgroundColor = 'rgba(50, 24, 119, 0.5)';
      slot1Below.style.fontSize = '24px';
    }
    if (slot2Below) {
      slot2Below.textContent = 'X';
      slot2Below.style.color = 'red';
      slot2Below.style.backgroundColor = 'rgba(50, 24, 119, 0.5)';
      slot2Below.style.fontSize = '24px';
    }
  }
}

function removeCharm(position) {
  const slot = inventory.children[position];
  if (slot) {
    slot.className = 'charm1';
    slot.textContent = '';
    slot.style.backgroundColor = '';
    slot.style.color = '';
    slot.style.fontSize = '';
    
    const slot1Below = inventory.children[position + 10];
    const slot2Below = inventory.children[position + 20];
    if (slot1Below) {
      slot1Below.className = 'charm1';
      slot1Below.textContent = '';
      slot1Below.style.backgroundColor = '';
      slot1Below.style.color = '';
      slot1Below.style.fontSize = '';
    }
    if (slot2Below) {
      slot2Below.className = 'charm1';
      slot2Below.textContent = '';
      slot2Below.style.backgroundColor = '';
      slot2Below.style.color = '';
      slot2Below.style.fontSize = '';
    }
  }
}

function validateColumn(column) {
  const columnSlots = [];
  for(let row = 0; row < 4; row++) {
    columnSlots.push(inventory.children[row * 10 + column]);
  }

  const validBackgroundCells = new Set();

  columnSlots.forEach((slot, row) => {
    if (slot.textContent && slot.textContent !== 'X') {
      if (slot.classList.contains('large-charm') && row <= 2) {
        validBackgroundCells.add(row);
        validBackgroundCells.add(row + 1);
      } else if (slot.classList.contains('grand-charm') && row <= 1) {
        validBackgroundCells.add(row);
        validBackgroundCells.add(row + 1);
        validBackgroundCells.add(row + 2);
      }
    }
  });

  columnSlots.forEach((slot, row) => {
    if (!validBackgroundCells.has(row) && slot.textContent === 'X') {
      slot.className = 'charm1';
      slot.textContent = '';
      slot.style.backgroundColor = '';
      slot.style.color = '';
      slot.style.fontSize = '';
    }
  });
}

inventory.addEventListener('contextmenu', e => e.preventDefault());

inventory.addEventListener('mousedown', (e) => {
  if (e.button === 2 && e.target.classList.contains('charm1') && e.target.textContent && e.target.textContent !== 'X') {
    draggedCharm = {
      text: e.target.textContent,
      classes: [...e.target.classList]
    };
  }
});

inventory.addEventListener('mouseup', (e) => {
  if (draggedCharm && e.target.classList.contains('charm1')) {
    const position = Array.from(inventory.children).indexOf(e.target);
    const row = Math.floor(position / 10);
    const charmType = draggedCharm.classes.find(cls => cls === 'large-charm' || cls === 'grand-charm');
    
    if ((charmType === 'grand-charm' && row > 1) ||
        (charmType === 'large-charm' && row > 2) ||
        !isSlotAvailable(position, charmType)) {
      draggedCharm = null;
      return;
    }

    e.target.textContent = draggedCharm.text;
    draggedCharm.classes.forEach(cls => e.target.classList.add(cls));
    
    if (charmType) markSlotsBelow(position, charmType);
    validateColumn(position % 10);
  }
  draggedCharm = null;
});

inventory.addEventListener('click', (e) => {
  if (e.target.classList.contains('charm1') && e.target.textContent !== 'X') {
    selectedSlot = e.target;
    modal.classList.add('active');
  }
});

closeModal.addEventListener('click', () => modal.classList.remove('active'));

const selectedProperties = {
  prefix: null,
  suffix: null
};

// Property descriptions
const descriptions = {
  Stout: 'Defense',
  Stout2: 'Defense',
  Burly: 'Defense',
  Stalwart: 'Defense',
  Red: 'to Minimum Damage',
  Jagged: 'to Maximum Damage',
  Bronze: 'to Attack Rating',
  Bronze2: 'to Attack Rating',
  Iron: 'to Attack Rating',
  Steel: 'to Attack Rating',
  Fine: 'to Maximum Damage/AttR',
  Lizards: 'to Mana',
  Lizards2: 'to Mana',
  Snakes: 'to Mana',
  Serpents: 'to Mana',
  Shimmering: 'to All Resistances',
  Azure: '% to Cold Resist',
  Lapis: '% to Cold Resist',
  Cobalt: '% to Cold Resist',
  Sapphire: '% to Cold Resist',
  Crimson: '% to Fire Resist',
  Russet: '% to Fire Resist',
  Garnet: '% to Fire Resist',
  Ruby: '% to Fire Resist',
  Tangerine: '% to Lightning Resist',
  Ocher: '% to Lightning Resist',
  Coral: '% to Lightning Resist',
  Amber: '% to Lightning Resist',
  Beryl: '% to Poison Resist',
  Viridian: '% to Poison Resist',
  Jade: '% to Poison Resist',
  Emerald: '% to Poison Resist',
  Snowy: 'Cold Damage',
  Shivering: 'Cold Damage',
  Boreal: 'Cold Damage',
  Hibernal: 'Cold Damage',
  Fiery: 'Fire Damage',
  Smoldering: 'Fire Damage',
  Smoking: 'Fire Damage',
  Flaming: 'Fire Damage',
  Static: 'Lightning Damage',
  Glowing: 'Lightning Damage',
  Arcing: 'Lightning Damage',
  Shocking: 'Lightning Damage',
  Septic: 'Poison Damage',
  Foul: 'Poison Damage',
  Toxic: 'Poison Damage',
  Pestilent: 'Poison Damage',
  Offrost: 'Cold Damage (1 sec)',
  Oficicle: 'Cold Damage (1 sec)',
  Ofglacier: 'Cold Damage (1 sec)',
  Ofwinter: 'Cold Damage (1 sec)',
  Offlame: 'Fire Damage',
  Offire: 'Fire Damage',
  Ofburning: 'Fire Damage',
  Ofincineration: 'Fire Damage',
  Ofshock: 'Lightning Damage',
  Oflightning: 'Lightning Damage',
  Ofthunder: 'Lightning Damage',
  Ofstorms: 'Lightning Damage',
  Ofcraftsmanship: 'to Maximum Damage',
  Ofblight: 'Poison Damage',
  Ofvenom: 'Poison Damage',
  Ofpestilence: 'Poison Damage',
  Ofanthrax: 'Poison Damage',
  Ofbalance: '% to FHR',
  Ofgreed: '% to GF',
  Offortune: '% to MF',
  Ofgoodluck: '% to MF',
  Oflife: 'Life',
  Ofsustenance: 'Life',
  Ofvita: 'Life',
  Ofstrength: 'to Strength',
  Ofstrength2: 'to Strength', 
  Ofdexterity: 'to Dexterity',
  Ofdexterity2: 'to Dexterity',
  Ofinertia: '% to FRW',
  Customforty: 'to Maximum Damage/AttR',
  Customeighty: 'to Maximum Damage/AttR',
  Customhundredtwenty: 'to Maximum Damage/AttR',
  Custommin: 'to Minimum Damage',
  Customlife: 'Life',
  Customallskills: 'to All Skills'

};

// Add event listeners for all range sliders
document.querySelectorAll('.propertyrange').forEach(slider => {
  slider.addEventListener('input', function() {
    // Get the corresponding value span (remove 'Range' from id and add 'Value')
    const valueId = this.id.replace('Range', 'Value');
    const valueSpan = document.getElementById(valueId);
    if (valueSpan) {
      valueSpan.textContent = this.value;
    }
  });
});

// Add confirm buttons to modal
const modalContent = document.querySelector('.modal-content');
const confirmButtonsDiv = document.createElement('div');
confirmButtonsDiv.id = 'confirmButtons';
confirmButtonsDiv.style.display = 'none';
confirmButtonsDiv.innerHTML = `
  <button id="confirmProperties" class="confirm-btn">Confirm Properties</button>
  <button id="cancelProperties" class="confirm-btn">Cancel</button>
`;
modalContent.appendChild(confirmButtonsDiv);

// Add event listeners for all range sliders
document.querySelectorAll('.propertyrange').forEach(slider => {
  slider.addEventListener('input', function() {
    const valueId = this.id.replace('Range', 'Value');
    const valueSpan = document.getElementById(valueId);
    if (valueSpan) {
      valueSpan.textContent = this.value;
    }
  });
});

// Style the buttons and modal
const style = document.createElement('style');
style.textContent = `
  
  
  .confirm-btn {
    margin: 5px;
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    background-color: #4a4a4a;
    color: white;
  }
  
  .property-button {
  font-family: monospace;
    background-color: black;
    color: white;
    border: 1px solid #666;
    margin: 2px;
    padding: 5px 10px;
    cursor: pointer;
  }
  
  .property-button.selected {
    background-color: #666;
    border-color: #999;
  }
  
  .propertyrange {
    margin: 0 10px;
  }
`;
document.head.appendChild(style);

// Update modal event listener
modal.addEventListener('click', (e) => {
  if (!selectedSlot) return;
  
  if (e.target.dataset.type) {
    const charmType = e.target.dataset.type;
    const position = Array.from(inventory.children).indexOf(selectedSlot);
    const row = Math.floor(position / 10);
    
    if ((charmType === 'grand-charm' && row > 1) || 
        (charmType === 'large-charm' && row > 2) ||
        !isSlotAvailable(position, charmType)) {
      return;
    }

    removeCharm(position);
    selectedSlot.classList.add(charmType);
    selectedSlot.textContent = charmType.split('-')
      .map(word => word.charAt(0).toUpperCase() + word.slice(1))
      .join(' ');
    
    markSlotsBelow(position, charmType);
    validateColumn(position % 10);
    
    document.querySelector('.prefixproperties').style.display = 'block';
    document.querySelector('.suffixproperties').style.display = 'block';
    document.querySelector('.charm-types').style.display = 'none';
    confirmButtonsDiv.style.display = 'block';
  }

  if (e.target.dataset.property) {
    const prop = e.target.dataset.property;
    const isPrefixProperty = e.target.closest('.prefixproperties') !== null;
    const isSuffixProperty = e.target.closest('.suffixproperties') !== null;
    
    if (isPrefixProperty) {
      selectedProperties.prefix = {
        property: prop,
        value: document.getElementById(`${prop.toLowerCase()}Value`).textContent
      };
      document.querySelectorAll('.prefixproperties button').forEach(btn => {
        btn.classList.remove('selected');
      });
    } else if (isSuffixProperty) {
      selectedProperties.suffix = {
        property: prop,
        value: document.getElementById(`${prop.toLowerCase()}Value`).textContent
      };
      document.querySelectorAll('.suffixproperties button').forEach(btn => {
        btn.classList.remove('selected');
      });
    }
    
    e.target.classList.add('selected');
  }
});

// Add confirm properties handler
document.getElementById('confirmProperties').addEventListener('click', () => {
  if (!selectedSlot || (!selectedProperties.prefix && !selectedProperties.suffix)) return;
  
  let charmName = selectedSlot.textContent.split(' ').slice(0, 2).join(' ');
  let description = '';
  
  if (selectedProperties.prefix) {
    description += `+${selectedProperties.prefix.value} ${descriptions[selectedProperties.prefix.property]} `;
  }
  
  if (selectedProperties.suffix) {
    description += `+${selectedProperties.suffix.value} ${descriptions[selectedProperties.suffix.property]}`;
  }
  
  selectedSlot.textContent = `${charmName} ${description.trim()}`;
  
  selectedProperties.prefix = null;
  selectedProperties.suffix = null;
  modal.classList.remove('active');
  document.querySelector('.prefixproperties').style.display = 'none';
  document.querySelector('.suffixproperties').style.display = 'none';
  document.querySelector('.charm-types').style.display = 'block';
  confirmButtonsDiv.style.display = 'none';
  
  document.querySelectorAll('.property-button').forEach(btn => {
    btn.classList.remove('selected');
  });
});

// Add cancel properties handler
document.getElementById('cancelProperties').addEventListener('click', () => {
  selectedProperties.prefix = null;
  selectedProperties.suffix = null;
  modal.classList.remove('active');
  document.querySelector('.prefixproperties').style.display = 'none';
  document.querySelector('.suffixproperties').style.display = 'none';
  document.querySelector('.charm-types').style.display = 'block';
  confirmButtonsDiv.style.display = 'none';
  
  document.querySelectorAll('.property-button').forEach(btn => {
    btn.classList.remove('selected');
  });
});

// Initialize property buttons
document.querySelectorAll('[data-property]').forEach(button => {
  button.classList.add('property-button');
});
</script>
  
<button id="saveButton">Save as hexcode HTML</button>

<script>
     function generateHexCode() {
            const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            let hexCode = "";
            for (let i = 0; i < 7; i++) {
                hexCode += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return hexCode;
        }

    document.getElementById("saveButton").addEventListener("click", () => {
        
        const inputs = document.querySelectorAll("input, select, textarea");
        inputs.forEach(input => {
                if (input.tagName === "SELECT") {
                    
                    const selectedValue = input.value;
                    input.querySelectorAll("option").forEach(option => {
                        if (option.value === selectedValue) {
                            option.setAttribute("selected", "selected");
                        } else {
                            option.removeAttribute("selected");
                        }
                    });
                } else {
                    input.setAttribute("value", input.value); 
                }
            });


        
        const clonedDocument = document.documentElement.cloneNode(true);

        
        const doctype = new XMLSerializer().serializeToString(document.doctype);
        const html = clonedDocument.outerHTML;
        const fullHTML = `${doctype}\n${html}`;

        
        const hexCode = generateHexCode();

        
        const blob = new Blob([fullHTML], { type: "text/html" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `${hexCode}.html`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        alert(`File saved as ${hexCode}.html`);
    });
</script>

<br><br><br><br><br>
<iframe src="https://ptb.discord.com/widget?id=284432411553562624&theme=dark" width="250" height="300" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
<div class="auth-container">
  <form id="loginForm" onsubmit="handleLogin(event)">
      <h2>Login</h2>
      <input type="text" id="loginInput" placeholder="Email or Username" required>
      <input type="password" id="passwordInput" placeholder="Password" required>
      <button type="submit">Login</button>
  </form>


  <div id="welcomeMsg" class="welcome-message" style="display: none;">
      Welcome, so there is not much to do right now... except you can try to unlock 2 achievements while building your character! <span id="userDisplay"></span>
      <button onclick="handleLogout()" id="logoutBtn">Logout</button>
  </div>

  <div id="passwordError" class="error-message">
    Password must be at least 10 characters long and contain at least one number
</div>


<div class="profile-container" id="profileContainer">
  <div class="tabs">
      <button class="tab active" onclick="showTab('profile')">Profile</button>
      <button class="tab" onclick="showTab('achievements')">Achievements</button>
      <button class="tab" onclick="showTab('settings')">Settings</button>
  </div>

  <div id="profileTab" class="tab-content active">
      <div class="profile-info">
          <h2>Profile</h2>
          <p>Username: <span id="profileUsername"></span></p>
          <p>Member since: <span id="profileCreatedAt"></span></p>
      </div>
  </div>

  <div id="achievementsTab" class="tab-content">
      <h2>Achievements</h2>
      <div id="achievementsList">
         
      </div>
  </div>

  <div id="settingsTab" class="tab-content">
      <h2>Settings</h2>
      <div class="settings-option">
          <label>
              Theme:
              <select id="themeSelect">
                  <option value="light">Light</option>
                  <option value="dark">Dark</option>
              </select>
          </label>
      </div>
      <div class="settings-option">
          <label>
              <input type="checkbox" id="notificationsToggle">
              Enable Notifications
          </label>
      </div>
      <button onclick="saveSettings()">Save Settings</button>
  </div>
</div>


  <form id="signupForm" onsubmit="handleSignup(event)">
      <h2>Sign Up</h2>
      <input type="email" id="signupEmail" placeholder="Email" required>
      <input type="text" id="signupUsername" placeholder="Username" required>
      <input type="password" id="signupPassword" placeholder="Password" required>
      <button type="submit">Sign Up</button>
  </form>
</div>

<script>
  // Your existing JavaScript code here
  async function handleSignup(event) {
    event.preventDefault();
    
    const email = document.getElementById('signupEmail').value;
    const username = document.getElementById('signupUsername').value;
    const password = document.getElementById('signupPassword').value;
    const passwordError = document.getElementById('passwordError');
    
    // Password validation
    if (password.length < 10 || !/\d/.test(password)) {
        passwordError.style.display = 'block';
        return;
    }
    passwordError.style.display = 'none';
    
    try {
        const response = await fetch('http://localhost:3000/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, username, password })
        });

        const data = await response.json();
        if (response.ok) {
            alert('Signup successful! Please login.');
            document.getElementById('signupForm').reset();
        } else {
            alert(data.error || 'Signup failed');
        }
    } catch (error) {
        console.error('Signup error:', error);
        alert('Signup failed');
    }
}

  function handleLogout() {
      localStorage.removeItem('token');
      localStorage.removeItem('username');
      updateUIState();
  }

  async function handleLogin(event) {
    event.preventDefault(); // Make sure this line is here!
    console.log('Login attempted');
    
    const login = document.getElementById('loginInput').value;
    const password = document.getElementById('passwordInput').value;
    console.log('Attempting login for:', login);
    
    try {
        const response = await fetch('http://localhost:3000/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ login, password })
        });

        const data = await response.json();
        console.log('Login response:', data);
        
        if (data.token) {
            localStorage.setItem('token', data.token);
            localStorage.setItem('username', data.username);
            updateUIState(data.username);
            alert('Login successful!');
        } else {
            alert('Login failed');
        }
    } catch (error) {
        console.error('Login error:', error);
        alert('Login failed');
    }
}

function updateUIState(username = null) {
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const welcomeMsg = document.getElementById('welcomeMsg');
    const profileContainer = document.getElementById('profileContainer');

    if (username) {
        loginForm.style.display = 'none';
        signupForm.style.display = 'none';
        welcomeMsg.style.display = 'block';
        profileContainer.style.display = 'block';
        loadProfileData();
    } else {
        loginForm.style.display = 'block';
        signupForm.style.display = 'block';
        welcomeMsg.style.display = 'none';
        profileContainer.style.display = 'none';
    }
}

// Add these new functions
async function loadProfileData() {
    try {
        const token = localStorage.getItem('token');
        const response = await fetch('http://localhost:3000/profile', {
            headers: {
                'Authorization': `Bearer ${token}`
            }
        });
        const data = await response.json();
        
        document.getElementById('profileUsername').textContent = data.username;
        document.getElementById('profileCreatedAt').textContent = new Date(data.createdAt).toLocaleDateString();
        
        // Load achievements
        const achievementsList = document.getElementById('achievementsList');
        achievementsList.innerHTML = data.achievements.length ? 
            data.achievements.map(a => `
                <div class="achievement">
                    <strong>${a.name}</strong>
                    <span>Unlocked: ${new Date(a.unlockedAt).toLocaleDateString()}</span>
                </div>
            `).join('') :
            '<p>No achievements yet</p>';
            
        // Load settings
        document.getElementById('themeSelect').value = data.settings.theme;
        document.getElementById('notificationsToggle').checked = data.settings.notifications;
    } catch (error) {
        console.error('Error loading profile:', error);
    }
}

function showTab(tabName) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(`${tabName}Tab`).classList.add('active');
    document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
}

async function saveSettings() {
    const token = localStorage.getItem('token');
    const settings = {
        theme: document.getElementById('themeSelect').value,
        notifications: document.getElementById('notificationsToggle').checked
    };
    
    try {
        const response = await fetch('http://localhost:3000/profile/settings', {
            method: 'PUT',
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(settings)
        });
        
        if (response.ok) {
            alert('Settings saved successfully');
        }
    } catch (error) {
        console.error('Error saving settings:', error);
        alert('Failed to save settings');
    }
}


  // Check auth state on page load
  window.onload = () => {
      const username = localStorage.getItem('username');
      if (username) {
          updateUIState(username);
      }
  };


  
</script>


<script>
 document.addEventListener('DOMContentLoaded', () => {
    const skillHandler = new SkillHandler();
    const javelinandspearmasteryContainer = document.getElementById('javelinandspearmasterycontainer');
    const criticalHitContainer = document.getElementById('criticalhitcontainer');
    const lvlValue = document.getElementById('lvlValue');

    function updateCriticalHit() {
        const masteryLevel = parseInt(javelinandspearmasteryContainer.value || 0);
        const currentLevel = parseInt(lvlValue.value || 1);

        let critValue = 0;

        try {
            const masteryInfo = skillHandler.getSkillInfo('javelinAndSpearMastery', masteryLevel);

            if (masteryInfo && masteryInfo.criticalChance) {
                critValue += masteryInfo.criticalChance;
            }

            criticalHitContainer.value = critValue.toFixed(2);
            criticalHitContainer.setAttribute('value', critValue.toFixed(2));
        } catch (error) {
            console.error('Error updating critical hit:', error);
        }
    }

    const triggerElements = [
        javelinandspearmasteryContainer,
        lvlValue,
        document.getElementById('selectClass'),
        document.getElementById('helms-dropdown'),
        document.getElementById('armors-dropdown'),
        document.getElementById('weapons-dropdown'),
        document.getElementById('offs-dropdown'),
        document.getElementById('gloves-dropdown'),
        document.getElementById('belts-dropdown'),
        document.getElementById('boots-dropdown'),
        document.getElementById('ringsone-dropdown'),
        document.getElementById('ringstwo-dropdown'),
        document.getElementById('amulets-dropdown')
    ];

    triggerElements.forEach(el => {
        if (el) {
            el.addEventListener('change', updateCriticalHit);
            el.addEventListener('input', updateCriticalHit);
        }
    });

    updateCriticalHit();
  });
  </script>
  <script>
function updateInventoryStats() {
   let baseStats = {
     poison: 0, 
     cold: 0, 
     light: 0, 
     fire: 0, 
     maxdam: 0, 
     mindam: 0,
     allskills: 0,
     coldres: 30,  
     fireres: 30,
     lightres: 30,
     poisonres: 30,
     allres: 0
     
   };
   
   let charmResistances = {
     coldres: 0,
     fireres: 0,
     lightres: 0,
     poisonres: 0
   };


//def calcs

let equipmentDefense = 0;
    ['helms-dropdown', 'armors-dropdown', 'offs-dropdown', 'gloves-dropdown', 'belts-dropdown', 'boots-dropdown', 'ringsone-dropdown', 
     'ringstwo-dropdown', 'amulets-dropdown'].forEach(slot => {
        const item = itemList[document.getElementById(slot)?.value];
        if(item?.properties?.defense) {
            equipmentDefense += item.properties.defense;
        }
        //need to add dex/4 to Defense
    });

    // Get charm defense from all charms (separate loop)
    let charmDefense = 0;
    document.querySelectorAll('.charm1').forEach(charm => {
        if(!charm.textContent || charm.textContent.includes('X')) return;
        
        const text = charm.textContent;
        const stoutMatch = text.match(/\+(\d+)\s+Defense/);
        if(stoutMatch) {
            const defenseValue = parseInt(stoutMatch[1]);
            charmDefense += defenseValue;
        }
    });






   // Process equipped items
   ['helms-dropdown', 'armors-dropdown', 'weapons-dropdown', 'offs-dropdown', 
    'gloves-dropdown', 'belts-dropdown', 'boots-dropdown', 'ringsone-dropdown', 
    'ringstwo-dropdown', 'amulets-dropdown'].forEach(slot => {
      const item = itemList[document.getElementById(slot)?.value];
       if(item?.properties) {
           if(item.properties.poisondmg && item.properties.poisontime) {
               baseStats.poison += item.properties.poisondmg / item.properties.poisontime;
           }
           
           if(item.properties.colddmgmin && item.properties.colddmgmax) {
               baseStats.cold += (item.properties.colddmgmin + item.properties.colddmgmax) / 2;
           }
           
           if(item.properties.lightdmgmin && item.properties.lightdmgmax) {
               baseStats.light += (item.properties.lightdmgmin + item.properties.lightdmgmax) / 2;
           }
           
           if(item.properties.firedmgmin && item.properties.firedmgmax) {
               baseStats.fire += (item.properties.firedmgmin + item.properties.firedmgmax) / 2;
           }
           
           if(item.properties.onehandmax) {
               baseStats.maxdam += item.properties.onehandmax;
           }
           
           if(item.properties.onehandmin) {
               baseStats.mindam += item.properties.onehandmin;
           }
           if(item.properties.coldres || item.properties.allres) {
               baseStats.coldres += (item.properties.coldres || 0) + (item.properties.allres || 0);
           }
           if(item.properties.firres || item.properties.allres) {
               baseStats.fireres += (item.properties.firres || 0) + (item.properties.allres || 0);
           }
           if(item.properties.ligres || item.properties.allres) {
               baseStats.lightres += (item.properties.ligres || 0) + (item.properties.allres || 0);
           }
           if(item.properties.poisres || item.properties.allres) {
               baseStats.poisonres += (item.properties.poisres || 0) + (item.properties.allres || 0);
           }
   

           
           if(item.properties.allsk) {
               baseStats.allskills += item.properties.allsk;
           }
           
          
          
         

       }
   });



   // Process charms for non-life stats first
   document.querySelectorAll('.charm1').forEach(charm => {
       if(!charm.textContent || charm.textContent.includes('X')) return;
       
       const text = charm.textContent;
       
       const coldMatch = text.match(/\+(\d+)\s+Cold\s+Damage/);
       if(coldMatch) {
           baseStats.cold += parseInt(coldMatch[1]) / 2;
       }
       
       const poisonMatch = text.match(/\+(\d+)\s+Poison\s+Damage/);
       if(poisonMatch) {
           baseStats.poison += parseInt(poisonMatch[1]) / 2;
       }

       const fireMatch = text.match(/\+(\d+)\s+Fire\s+Damage/);
       if(fireMatch) {
           baseStats.fire += parseInt(fireMatch[1]) / 2;
       }

       const lightMatch = text.match(/\+(\d+)\s+Lightning\s+Damage/);
       if(lightMatch) {
           baseStats.light += parseInt(lightMatch[1]) / 2;
       }

       const maxdamMatch = text.match(/\+(\d+)\s+to Maximum Damage\/AttR/);
       if(maxdamMatch) {
           baseStats.maxdam += parseInt(maxdamMatch[1]);
       }
       
       const mindamMatch = text.match(/\+(\d+)\s+to Minimum Damage/);
       if(mindamMatch) {
           baseStats.mindam += parseInt(mindamMatch[1]);
       }

       // Check for all skills on charms if they exist
       const allSkillsMatch = text.match(/\+(\d+)\s+to All Skills/);
       if(allSkillsMatch) {
           baseStats.allskills += parseInt(allSkillsMatch[1]);
       }

   

       // In the charm processing section
       const coldResMatch = text.match(/\+(\d+)\s*%\s*to Cold Resist/);  // Allow optional spaces
if(coldResMatch) {
    const value = parseInt(coldResMatch[1]);
    charmResistances.coldres += value;
    console.log('Found cold resistance:', {
        charmText: text,
        resistValue: value,
        totalColdRes: charmResistances.coldres
    });
}

       // Fire resistance from charms
       const fireResMatch = text.match(/\+(\d+)\s*%\s*to Fire Resist/);
       if(fireResMatch) {
        const value2 = parseInt(fireResMatch[1]);
        charmResistances.fireres += value2;
       }

       // Lightning resistance from charms
       const lightResMatch = text.match(/\+(\d+)\s*%\s*to Lightning Resist/);
       if(lightResMatch) {
        const value3 = parseInt(lightResMatch[1]);
        charmResistances.lightres += value3;
       }

       // Poison resistance from charms
       const poisonResMatch = text.match(/\+(\d+)\s*%\s*to Poison Resist/);
       if(poisonResMatch) {
        const value4 = parseInt(poisonResMatch[1]);
        charmResistances.poisonres += value4;
       }
      
   });

   baseStats.coldres += charmResistances.coldres;
   baseStats.fireres += charmResistances.fireres;
   baseStats.lightres += charmResistances.lightres;
   baseStats.poisonres += charmResistances.poisonres;

   const container = document.getElementById('coldresistcontainer');
   const span = container.querySelector('.resist-cold');
   if (span) {
       span.textContent = `${baseStats.coldres}`;
   }

   const container2 = document.getElementById('fireresistcontainer');
   const span2 = container2.querySelector('.resist-fire');
   if (span2) {
       span2.textContent = `${baseStats.fireres}`;
   }

   const container3 = document.getElementById('lightresistcontainer');
   const span3 = container3.querySelector('.resist-light');
   if (span3) {
       span3.textContent = `${baseStats.lightres}`;
   }

   const container4 = document.getElementById('poisonresistcontainer');
   const span4 = container4.querySelector('.resist-poison');
   if (span4) {
       span4.textContent = `${baseStats.poisonres}`;
   }

   console.log('Charm resistances:', charmResistances.coldres);
   console.log('Charm resistances light:', charmResistances.lightres);

   
  
  
    
    // Update defense container
   


   // Update damage and elemental containers
   document.getElementById('flatpoisoncontainer').textContent = baseStats.poison.toFixed(1);
   document.getElementById('flatcoldcontainer').textContent = baseStats.cold.toFixed(1);
   document.getElementById('flatfirecontainer').textContent = baseStats.fire.toFixed(1);
   document.getElementById('flatlightcontainer').textContent = baseStats.light.toFixed(1);
   document.getElementById('onehandmaxdmgcontainer').textContent = baseStats.maxdam.toFixed(0);
   document.getElementById('onehandmindmgcontainer').textContent = baseStats.mindam.toFixed(0);
   document.getElementById('allskillscontainer').textContent = baseStats.allskills.toFixed(0);
   document.getElementById('defensecontainer').textContent = (equipmentDefense + charmDefense).toFixed(0);
}

// Initialize event listeners
document.addEventListener('DOMContentLoaded', () => {
   const observer = new MutationObserver(updateInventoryStats);
   observer.observe(document.querySelector('.inventorycontainer'), {
       childList: true,
       subtree: true, 
       characterData: true
   });

   // Add listeners to dropdowns
   document.querySelectorAll('select[id$="-dropdown"]').forEach(select => {
       select.addEventListener('change', updateInventoryStats);
   });

   // Add listeners to all relevant inputs
   ['lvlValue', 'str', 'dex', 'vit', 'enr', 'left-skill'].forEach(id => {
       const element = document.getElementById(id);
       if (element) {
           element.addEventListener('input', updateInventoryStats);
       }
   });

   // Add listeners to skill containers
   document.querySelectorAll('[id$="skillscontainer"] input[type="number"]')
       .forEach(input => input.addEventListener('input', updateInventoryStats));

   // Initial update
   updateInventoryStats();
});






</script>


<script>
function updateLifeFromCharms() {
  let totalCharmLife = 0;
  
  // Get all charms in the inventory
  document.querySelectorAll('.charm1').forEach(charm => {
    if (!charm.textContent || charm.textContent.includes('X')) return;
    
    const text = charm.textContent;
    
    // Match all variations of life bonus text
    const lifePatterns = [
      /\+(\d+)\s+Life/,
      /\+(\d+)\s+to Life/,
      /\+(\d+)\s+Maximum Life/
    ];
    
    for (const pattern of lifePatterns) {
      const match = text.match(pattern);
      if (match) {
        totalCharmLife += parseInt(match[1]);
        break;
      }
    }
  });

  // Get current life display
  const lifeDisplay = document.getElementById('lifeValue');
  if (!lifeDisplay) return;
  
  // Extract current base life value
  const currentLifeMatch = lifeDisplay.textContent.match(/Life:\s*(\d+)/);
  const currentLife = currentLifeMatch ? parseInt(currentLifeMatch[1]) : 0;

  // Create or update total life display
  let totalLifeDisplay = document.getElementById('totalLifeValue');
  if (!totalLifeDisplay) {
    totalLifeDisplay = document.createElement('span');
    totalLifeDisplay.id = 'totalLifeValue';
    totalLifeDisplay.style.marginLeft = '10px';
    totalLifeDisplay.style.color = '#888';
    lifeDisplay.parentNode.insertBefore(totalLifeDisplay, lifeDisplay.nextSibling);
  }
  
  // Update total life display
  const totalLife = currentLife + totalCharmLife;
  totalLifeDisplay.textContent = `Total Life: ${totalLife}`;
}

// Add this to existing event listeners
document.addEventListener('DOMContentLoaded', () => {
  // Create a MutationObserver that updates total life for multiple scenarios
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'childList' || mutation.type === 'characterData') {
        updateLifeFromCharms();
      }
    });
  });

  // Watch for changes to inventory
  const inventoryContainer = document.querySelector('.inventorycontainer');
  if (inventoryContainer) {
    observer.observe(inventoryContainer, {
      childList: true,
      subtree: true,
      characterData: true
    });
  }

  // Watch for changes to base life value
  const lifeDisplay = document.getElementById('lifeValue');
  if (lifeDisplay) {
    observer.observe(lifeDisplay, {
      childList: true,
      subtree: true,
      characterData: true
    });
  }

  // Initial update
  updateLifeFromCharms();
});

</script>










<script>
function showAllSkillsBonus() {
    const totalAllSkill = parseInt(document.getElementById('allskillscontainer').textContent || 0);
    if (totalAllSkill <= 0) {
        document.querySelectorAll('.skill-bonus').forEach(el => el.remove());
        return;
    }

   
    document.querySelectorAll('.skill-container input[type="number"]').forEach(input => {
        if (parseInt(input.value) > 0) {
           
            let bonus = input.parentElement.querySelector('.skill-bonus');
            if (!bonus) {
                bonus = document.createElement('div');
                bonus.className = 'skill-bonus';
                bonus.style.cssText = `
                    display: inline;
                    color: #F5F2A6;
                    margin-left: 60px;
                    position: absolute;
                `;
                input.parentElement.appendChild(bonus);
            }
            
            const originalValue = parseInt(input.value);
            const totalSkills = originalValue + totalAllSkill;
            bonus.textContent = `${totalSkills}`;
        }
    });
}


const allSkillsContainer = document.getElementById('allskillscontainer');
if (allSkillsContainer) {
    new MutationObserver(showAllSkillsBonus).observe(allSkillsContainer, {
        characterData: true,
        subtree: true
    });
}


document.querySelectorAll('.skill-container input[type="number"]').forEach(input => {
    input.addEventListener('change', showAllSkillsBonus);
});


</script>

<script>
  function updateDamageDisplay() {
  const selectedSkill = document.getElementById('left-skill').value;
  const currentLevel = parseInt(document.getElementById(selectedSkill)?.value || 0);
  const skillName = skillNameMap[selectedSkill];
  
  if (!currentLevel || !skillName) {
    document.getElementById('damageOutput').textContent = '0';
    return;
  }

  const skillInfo = skillHandler.getSkillInfo(skillName, currentLevel);
  
  if (!skillInfo || !skillInfo.damage) return;

  const damage = skillInfo.damage;
  const synergyMod = 1 + (damage.synergyBonus || 0) / 100;

  let displayText = '';
  switch(damage.type) {
    case 'poison':
      displayText = `${Math.floor(damage.min * synergyMod)}-${Math.floor(damage.max * synergyMod)} Poison Damage`;
      break;
    case 'lightning':
      displayText = `${Math.floor(damage.min * synergyMod)}-${Math.floor(damage.max * synergyMod)} Lightning Damage`;
      break;
    case 'cold':
      displayText = `${Math.floor(damage.min * synergyMod)}-${Math.floor(damage.max * synergyMod)} Cold Damage`;
      break;
    case 'fire':
      displayText = `${Math.floor(damage.min * synergyMod)}-${Math.floor(damage.max * synergyMod)} Fire Damage`;
      break;
    

  document.getElementById('damageOutput').textContent = displayText;
  document.getElementById('attackRatingOutput').textContent = `${skillInfo.attackRating || 0}%`;
  document.getElementById('manaCostOutput').textContent = (skillInfo.manaCost || 0).toFixed(1);
}}
</script>










<script>
function updateResistanceDisplay() {
  // Get the existing containers
  const containers = {
    fire: document.getElementById('fireresistcontainer'),
    cold: document.getElementById('coldresistcontainer'),
    light: document.getElementById('lightresistcontainer'),
    poison: document.getElementById('poisonresistcontainer')
  };

  // Check if containers exist before proceeding
  if (!containers.fire || !containers.cold || !containers.light || !containers.poison) {
    return;
  }

  // Calculate total max resistances from equipment
  let totalMaxFireRes = 75;
  let totalMaxColdRes = 75;
  let totalMaxLightRes = 75;
  let totalMaxPoisonRes = 75;

  // Get all equipment data
  const equipmentSlots = {
    helm: document.getElementById('helms-dropdown'),
    armor: document.getElementById('armors-dropdown'),
    weapon: document.getElementById('weapons-dropdown'),
    off: document.getElementById('offs-dropdown'),
    gloves: document.getElementById('gloves-dropdown'),
    belt: document.getElementById('belts-dropdown'),
    boots: document.getElementById('boots-dropdown'),
    ringOne: document.getElementById('ringsone-dropdown'),
    ringTwo: document.getElementById('ringstwo-dropdown'),
    amulet: document.getElementById('amulets-dropdown')
  };

  // Calculate total max resistances from all equipment
  Object.entries(equipmentSlots).forEach(([slot, element]) => {
    if (element && element.value) {
      const itemData = itemList[element.value];
      if (itemData?.properties) {
        totalMaxFireRes += itemData.properties.maxfirres || 0;
        totalMaxColdRes += itemData.properties.maxcoldres || 0;
        totalMaxLightRes += itemData.properties.maxlightres || 0;
        totalMaxPoisonRes += itemData.properties.maxpoisonres || 0;
      }
    }
  });

  // Add styles for the glow effects
  const style = document.createElement('style');
  style.textContent = `
    .resist-fire {
      color: #ff0000;
      text-shadow: 0 0 5px #ff0000;
    }
    .resist-cold {
      color: #00c4ff;
      text-shadow: 0 0 5px #00c4ff;
    }
    .resist-light {
      color: #ffd700;
      text-shadow: 0 0 5px #ffd700;
    }
    .resist-poison {
      color: #00ff00;
      text-shadow: 0 0 5px #00ff00;
    }
  `;
  document.head.appendChild(style);


  const currentValues = {
    fire: parseInt(containers.fire.querySelector('.resist-fire')?.textContent || '0'),
    cold: parseInt(containers.cold.querySelector('.resist-cold')?.textContent || '0'),
    light: parseInt(containers.light.querySelector('.resist-light')?.textContent || '0'),
    poison: parseInt(containers.poison.querySelector('.resist-poison')?.textContent || '0')
  };




  // Update each resistance container with current and max values
  if (!containers.fire.textContent.includes('/')) {
    containers.fire.innerHTML = `<span class="resist-fire">${currentValues.fire}</span>/<span class="resist-fire">${totalMaxFireRes}</span>`;
  }
  
  if (!containers.cold.textContent.includes('/')) {
    containers.cold.innerHTML = `<span class="resist-cold">${currentValues.cold}</span>/<span class="resist-cold">${totalMaxColdRes}</span>`;
  }
  
  if (!containers.light.textContent.includes('/')) {
    containers.light.innerHTML = `<span class="resist-light">${currentValues.light}</span>/<span class="resist-light">${totalMaxLightRes}</span>`;
  }
  
  if (!containers.poison.textContent.includes('/')) {
    containers.poison.innerHTML = `<span class="resist-poison">${currentValues.poison}</span>/<span class="resist-poison">${totalMaxPoisonRes}</span>`;
  }
}

// The rest of the event listeners remain the same
const elementsToWatch = [
  'lvlValue',
  'str',
  'dex',
  'vit',
  'enr',
  'helms-dropdown',
  'armors-dropdown',
  'weapons-dropdown',
  'offs-dropdown',
  'gloves-dropdown',
  'belts-dropdown',
  'boots-dropdown',
  'ringsone-dropdown',
  'ringstwo-dropdown',
  'amulets-dropdown'
];

elementsToWatch.forEach(elementId => {
  const element = document.getElementById(elementId);
  if (element) {
    element.addEventListener('change', () => {
      setTimeout(updateResistanceDisplay, 0);
    });
    element.addEventListener('input', () => {
      setTimeout(updateResistanceDisplay, 0);
    });
  }
});

const resistanceContainers = ['fireresistcontainer', 'coldresistcontainer', 'lightresistcontainer', 'poisonresistcontainer'];

resistanceContainers.forEach(containerId => {
  const container = document.getElementById(containerId);
  if (container) {
    const observer = new MutationObserver(() => {
      if (!container.textContent.includes('/')) {
        setTimeout(updateResistanceDisplay, 0);
      }
    });
    
    observer.observe(container, {
      childList: true,
      characterData: true,
      subtree: true
    });
  }
});

document.addEventListener('DOMContentLoaded', () => {

const updateAll = () => {
    updateResistanceDisplay();
    setTimeout(updateInventoryStats, 0);
  };

  // Update all event listeners to use updateAll
  elementsToWatch.forEach(elementId => {
    const element = document.getElementById(elementId);
    if (element) {
      element.addEventListener('change', updateAll);
      element.addEventListener('input', updateAll);
    }
  });
});

</script>




<div class="hirelingcontainer">Mercenary Class
  <select id="mercclass">
    <option value="No Mercenary">No Mercenary</option>
    <option value="A1 Fire (Vigor)">A1 Fire (Vigor)</option>
    <option value="A1 Cold (Meditation)">A1 Cold (Meditation)</option>
    <option value="A1 Magic (Slow Movement)">A1 Magic (Slow Movement)</option>
    <option value="A2 Defensive (Defiance)">A2 Defensive (Defiance)</option>
    <option value="A2 Offensive (Blessed Aim)">A2 Offensive (Blessed Aim)</option>
    <option value="A2 Combat (Thorns)">A2 Combat (Thorns)</option>
    <option value="A3 Fire (Cleansing)">A3 Fire (Cleansing)</option>
    <option value="A3 Cold (Prayer)">A3 Cold (Prayer)</option>
    <option value="A3 Lightning (Holy Shock)">A3 Lightning (Holy Shock)</option>
    <option value="A4 Light (Sanctuary)">A4 Light (Sanctuary)</option>
    <option value="A4 Dark (Amplify Damage)">A4 Dark (Amplify Damage)</option>
    <option value="A5 Combat (Might)">A5 Combat (Might)</option>
    <option value="A5 Warcries (Battle Orders)">A5 Warcries (Battle Orders)</option>
  </select>
  <div class="merclvl">
    Mercenary Level
    <input type="number" min="1" max="99" value="1" id="merclvlValue">
  </div>
  <div class="mercdifficulty">
    Hired Difficulty
  <select id="mercdiff">
    <option value="Normal">Normal</option>
    <option value="Nightmare">Nightmare</option>
    <option value="Hell">Hell</option>
  </select>
  </div>
</div>
<div id="buff1"></div>
<div id="buff2"></div>
<div id="buff3"></div>
<div id="buff4"></div>
<div id="buff5"></div>
<div id="buff6"></div>
<div id="buff7"></div>
<div id="buff8"></div>
<div id="buff9"></div>
<div id="buff10"></div>
<iframe 
  src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSKOc3YUtoywqTuV7x3Qo6NRGIF8sjS_eoa4cfNaXPP3VAehmgPRBICfipWLWjhRxONiiKrVHBV2ODf/pubhtml?gid=0&single=true&range=E9" 
  width="160px" 
  height="80px" 
  style="filter: invert(1) hue-rotate(180deg); border: none;"
scrolling="no">
</iframe>

<script>
const mercbuff = document.getElementById('mercclass');
const buffs = document.querySelectorAll('[id^="buff"]');
const merclvlValue = document.getElementById('merclvlValue');

function getNextFreeBuffSlot() {
 for (let i = 0; i < buffs.length; i++) {
   if (!buffs[i].style.backgroundImage) {
     return buffs[i];
   }
 }
 return null;
}

function clearAllBuffs() {
 buffs.forEach(buff => buff.style.backgroundImage = '');
}

mercbuff.addEventListener('change', (e) => {
 clearAllBuffs();
 const selectedValue = e.target.value;

 if (selectedValue === 'A1 Fire (Vigor)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/vigor2.png")';
 } else if (selectedValue === 'A1 Cold (Meditation)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/meditation2.png")';
  } else if (selectedValue === 'A1 Magic (Slow Movement)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/slowmovement2.png")';
  } else if (selectedValue === 'A2 Defensive (Defiance)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/defiance2.png")';
  } else if (selectedValue === 'A2 Offensive (Blessed Aim)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/blessedaim2.png")'; 
  } else if (selectedValue === 'A2 Combat (Thorns)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/thorns2.png")'; 
  } else if (selectedValue === 'A3 Fire (Cleansing)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/cleansing2.png")'; 
  } else if (selectedValue === 'A3 Cold (Prayer)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/prayer2.png")'; 
  } else if (selectedValue === 'A3 Lightning (Holy Shock)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/holyshock2.png")'; 
  } else if (selectedValue === 'A4 Light (Sanctuary)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/sanctuary2.png")'; 
  } else if (selectedValue === 'A4 Dark (Amplify Damage)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/amplifydamage2.png")'; 
  } else if (selectedValue === 'A5 Combat (Might)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/might2.png")'; 
  } else if (selectedValue === 'A5 Warcries (Battle Orders)') {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/battleorders2.png")'; 
  }

 if (parseInt(merclvlValue.value) > 10) {
   let slot = getNextFreeBuffSlot();
   if (slot) slot.style.backgroundImage = 'url("img/holyshock2.png")';
 }
});

merclvlValue.addEventListener('input', () => {
 clearAllBuffs();
 mercbuff.dispatchEvent(new Event('change'));
});
</script>

<div id="socketModal" class="socketingmodal">
  <div class="socketmodal-content">
    <span class="socket-close">&times;</span>
    <h2>Socket Options, with corrupts u will be able to add more sockets</h2>
    <div class="socket-options">
      <!-- Gem options -->
      <div class="socket-item" data-gem="chipped-sapphire">
        <img src="img/amethyst3.png" class="sock-img">
        <div class="sock-info">
          <div class="sock-name">Red jewel</div>
          <div class="sock-stats">
            <div>Weapon: +1-3 Cold Damage</div>
            <div>Armor/Helm: +10 to Mana</div>
            <div>Shield: Cold Resist +12%</div>
          </div>
        </div>
      </div>

      <div class="socket-item" data-gem="flawed-sapphire">
        <img src="img/diamond2.png" class="sock-img">
        <div class="sock-info">
          <div class="sock-name">Emerald</div>
          <div class="sock-stats">
            <div>Weapon: +3-5 Cold Damage</div>
            <div>Armor/Helm: +17 to Mana</div>
            <div>Shield: Cold Resist +16%</div>
          </div>
        </div>
      </div>

      <div class="socket-item" data-gem="sapphire">
        <img src="img/bluejewel3.png" class="sock-img">
        <div class="sock-info">
          <div class="sock-name">Ort</div>
          <div class="sock-stats">
            <div>Weapon: +4-7 Cold Damage</div>
            <div>Armor/Helm: +24 to Mana</div>
            <div>Shield: Cold Resist +22%</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add this where you want the socket container to appear -->
<div class="socketcontainer">
  <!-- <div class="socket empty" data-socket="1">
    <img src="" class="socket-sock-img" style="display: none;">
  </div>
  <div class="socket empty" data-socket="2">
    <img src="" class="socket-sock-img" style="display: none;">
  </div>
  <div class="socket empty" data-socket="3">
    <img src="" class="socket-sock-img" style="display: none;">
  </div> -->
</div>

<div class="socketcontainer2">
  </div>
  


<div class="helmsocket"></div>
<div class="armorsocket"></div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('socketModal');
    const closeBtn = document.querySelector('.socket-close');
    const socketItems = document.querySelectorAll('.socket-item');
    const helmDropdown = document.getElementById('helms-dropdown');
    const armorDropdown = document.getElementById('armors-dropdown');
    const socketContainers = {
      container1: document.querySelector('.socketcontainer'),
      container2: document.querySelector('.socketcontainer2'),
    };
    let currentSocket = null;

    // Function to attach event listeners to sockets
    function attachSocketListeners(socket) {
      // Left-click to open modal
      socket.addEventListener('click', (e) => {
        modal.style.display = 'block';
        currentSocket = e.target.closest('.socket'); // Get the actual socket element
      });

      // Right-click to remove gem
      socket.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        if (!socket.classList.contains('empty')) {
          socket.classList.add('empty');
          const socketImg = socket.querySelector('.socket-sock-img');
          socketImg.src = '';
          socketImg.style.display = 'none';
          socket.dataset.gemType = '';
        }
      });
    }

    // Function to display the appropriate number of sockets for a given container
    function updateSocketsForContainer(container, numberOfSockets) {
      // Clear the existing sockets
      container.innerHTML = '';

      // Add the required number of sockets
      for (let i = 0; i < numberOfSockets; i++) {
        const socket = document.createElement('div');
        socket.classList.add('socket', 'empty'); // Add necessary classes
        socket.setAttribute('data-socket', i + 1); // Set a data attribute
        const img = document.createElement('img');
        img.src = '';
        img.classList.add('socket-sock-img');
        img.style.display = 'none';
        socket.appendChild(img);
        container.appendChild(socket);

        // Attach event listeners to the newly created socket
        attachSocketListeners(socket);
      }
    }

    function updateSockets() {
      const helmName = helmDropdown.value.trim();
      
      let numberOfSocketsContainer1 = 3;
      let numberOfSocketsContainer2 = 6;

  switch (helmName) {
    case "Biggin's Bonnet":
    case "Tarnhelm":
    case "Coif of Glory":
    case "Duskeep":
    case "The Face of Horror":
    case "Wormskull":
    case "Howltusk":
    case "Undead Crown":
    case "Peasant Crown":
    case "Rockstopper":
    case "Stealskull":
    case "Darksight Helm":
    case "Blackhorn's Face":
    case "Valkyrie Wing":
    case "Crown of Thieves":
    case "Harlequin Crest":
    case "Steel Shade":
    case "Andariel's Visage":
    case "Giant Skull":
    case "Veil of Steel":
    case "Nightwing's Veil":
    case "Crown of Ages":
    case "Overlord's Helm":
    case "Kira's Guardian":
    case "Griffon's Eye":
    case "Cyclopean Roar":
    case "Arreat's Face":
    case "Wolfhowl":
    case "Demonhorn's Edge":
    case "Halaberd's Reign":
    case "Raekor's Virtue":
    case "Quetzalcoatl":
    case "Jalal's Mane":
    case "Cerebus' Bite":
    case "Denmother":
    case "Ravenlore":
    case "Spirit Keeper":
    case "Ursa's Nightmare":
    case "Arcanna's Head":
      numberOfSocketsContainer1 = 2;
      break;
    default:
      numberOfSocketsContainer1 = 3;
  }

  const armorName = armorDropdown.value.trim();
  switch (armorName) {
    case "Greyform":
    case "Blinkbat's Form":
    case "The Centurion":
    case "Twitchthroe":
    case "Darkglow":
    case "Hawkmail":
    case "Sparking Mail":
    case "Venom Ward":
    case "Iceblink":
    case "Boneflesh":
    case "Rockfleece":
    case "Rattlecage":
    case "Heavenly Garb":
    case "Goldskin":
    case "Silks of the Victor":
    case "Spirit Shroud":
    case "Vipermagi":
      numberOfSocketsContainer2 = 2; // Set 2 sockets for these armors
      break;
    default:
      numberOfSocketsContainer2 = 6; // Default to 1 socket for any other armor
  }


      // Update each container
      updateSocketsForContainer(socketContainers.container1, numberOfSocketsContainer1);
      updateSocketsForContainer(socketContainers.container2, numberOfSocketsContainer2);
    }

    // Gem item selection handler
    socketItems.forEach(item => {
      item.addEventListener('click', (e) => {
        const actualItem = e.target.closest('.socket-item'); // Get the clicked item

        if (currentSocket) {
          const gemType = actualItem.dataset.gem;
          const gemImg = actualItem.querySelector('.sock-img').src;

          // Remove empty class
          currentSocket.classList.remove('empty');

          // Get the image element inside the socket
          const socketImg = currentSocket.querySelector('.socket-sock-img');

          // Update image
          socketImg.src = gemImg;
          socketImg.alt = gemType;
          socketImg.style.display = 'block';

          // Store gem type
          currentSocket.dataset.gemType = gemType;

          // Close modal
          modal.style.display = 'none';
          currentSocket = null;
        }
      });
    });

    // Close modal button handler
    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      currentSocket = null;
    });

    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.style.display = 'none';
        currentSocket = null;
      }
    });

    // Run the function initially
    updateSockets();

    // Update sockets when the dropdown changes
    helmDropdown.addEventListener('change', updateSockets);
    armorDropdown.addEventListener('change', updateSockets);
  });
</script>
</body>
</html>